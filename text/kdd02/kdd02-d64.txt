Mining Knowledge Sharing Sites for Viral Marketing
Matthew Richardson and Pedro Domingos Department of Computer Science and Engineering
University of Washington
Box 352350
Seattle , WA 98195 2350
{mattr,pedrod}@cswashingtonedu
ABSTRACT Viral marketing takes advantage of networks of influence among customers to inexpensively achieve large changes in behavior . Our research seeks to put it on a firmer footing by mining these networks from data , building probabilistic models of them , and using these models to choose the best viral marketing plan . Knowledge sharing sites , where customers review products and advise each other , are a fertile source for this type of data mining . In this paper we extend our previous techniques , achieving a large reduction in computational cost , and apply them to data from a knowledge sharing site . We optimize the amount of marketing funds spent on each customer , rather than just making a binary decision on whether to market to him . We take into account the fact that knowledge of the network is partial , and that gathering that knowledge can itself have a cost . Our results show the robustness and utility of our approach .
Categories and Subject Descriptors H28 [ Database Management ] : Database Applications – data mining ; I26 [ Artificial Intelligence ] : Learning – induction ; I51 [ Pattern Recognition ] : Models – statistical ; J.4 [ Computer Applications ] : Social and Behavioral Sciences
Keywords Probabilistic models , linear models , direct marketing , viral marketing , social networks , knowledge sharing
1 . INTRODUCTION Marketing has been one of the major applications of data mining since the field emerged . Typically , the decision of whether or not to market to a particular person is based solely on their characteristics ( direct marketing ) , or those of the population segment to which they belong ( mass marketing ) . This often leads to suboptimal marketing decisions by not taking into account the effect that members of a market have on each other ’s purchasing decisions . In many markets , customers are strongly influenced by the opinions of their peers . Viral marketing takes advantage of this to inexpensively promote a product by marketing primarily to those with the strongest influence in the market . The use of relation ships between people makes viral marketing potentially more profitable than direct marketing . Data mining techniques have been successfully employed for direct marketing [ 9 ] . By building models that predict future purchasing behavior from past behavior , marketing can be more targeted and lead to increases in profit [ 18][22 ] . In previous work [ 5 ] , we showed that the same could be done for viral marketing . By explicitly modeling the market as a social network [ 24 ] , we were able to use the influence between customers to our advantage to significantly increase profits . Viral marketing uses the customers in a market to promote a product . This “ word of mouth ” advertising can be much more cost effective than traditional methods since it leverages the customers themselves to carry out most of the promotional effort . Further , people typically trust and act on recommendations from friends more than from the company selling the product . Examples of viral marketing are becoming increasingly common . A classic example of this is the Hotmail free email service , which grew from zero to 12 million users in 18 months on a miniscule advertising budget , thanks to the inclusion of a promotional message with the service ’s URL in every email sent using it [ 13 ] . Competitors using conventional marketing fared far less well . Many markets , notably those associated with information goods ( eg , software , media , telecommunications , etc . ) contain strong network effects ( known in the economics literature as network externalities ) . In these , ignoring the relationships between customers can lead to a severely sub optimal marketing plan . In the presence of strong network effects , it is crucial to consider not only a customer ’s intrinsic value ( his value as a customer based on the products he is likely to purchase ) , but also his network value . The network value of a customer is high when he is expected to have a very positive influence on others’ probabilities of purchasing the product . A customer whose intrinsic value is less than the cost of marketing may in fact be worth marketing to when his network value is considered . The immediate effect of marketing to him may be negative , but the overall effect may be positive once his influence on his friends , their influences on their friends , and so on is taken into account . Further , a customer who looks valuable based on intrinsic value alone may in fact not be worth marketing to if he is expected to have an overall negative effect on others in the market ( eg , a person who tends to give very low product ratings ) . Ignoring the network value can result in incorrect marketing decisions , especially in a market with strong network effects . To estimate the network value of its customers , a company needs to know the relationships between them . One source of such information is the Internet , with its plethora of chat rooms , discus sion forums , and knowledge sharing web sites . In these is found a wealth of social interaction , often product related , which a company could use to gather information on the relationships between its customers . Knowledge sharing sites in particular are often product oriented . On these sites , information about product likes and dislikes , ratings of quality , benchmarks , and comparisons are exchanged , making them an ideal source for data about customer preferences and interactions . In this paper , we extend ideas from our earlier work [ 5 ] and apply them to the domain of knowledge sharing sites . We show how to find optimal viral marketing plans , use continuously valued marketing actions , and reduce computational costs ( Sections 2 and 3 ) . In Sections 4 and 5 , we apply the model to Epinions , a popular knowledge sharing site . In practice , the relationships between customers is often unknown , but may be obtained at some cost . We introduce a technique for marketing in such a situation and show that it performs well even with very limited marketing research funds . We conclude with a discussion of related work and future directions . 2 . THE MODEL Consider a set of n potential customers , and let Xi be a Boolean variable that takes the value 1 if customer i buys the product being marketed , and 0 otherwise . Let the neighbors of Xi be the customers who directly influence Xi : Ni={Xi,1,…,Xi,ni} ˝ X {Xi} , where X={X1,…,Xn} . The product is described by a set of attributes Y={Y1,…,Ym} . Let Mi be the marketing action that is taken for customer i . For example , Mi could be a Boolean variable , with Mi=1 if the customer is ( say ) offered a discount , and Mi=0 otherwise . Alternatively , Mi could be a continuous variable indicating the size of the discount offered , or a nominal variable indicating which of several possible actions is taken . Let M={M1,…,Mn} be the marketing plan . Then , for all Xi , we will assume that XP
( i
| = =
,
X { XP b
X | ( XP 0 i (
MY ) } , i MYN , , Y M i |
, i i i
) )
+ 1( b
)
XP N
( i i
|
MYN
,
, i
( 1 )
) b i £
P0( Xi | Y , Mi ) is Xi ’s internal probability of purchasing the product . PN(Xi | Ni , Y , M ) is the effect that Xi ’s neighbors have on him . b i is a scalar with 0 £ 1 that measures how self reliant Xi is . For many products , such as cellular telephones , multi player computer games , and Internet chat programs , a customer ’s probability of purchasing depends strongly on whether his friends have also purchased the product . In previous work [ 5 ] we modeled this interaction with a non linear function . In this paper , we employ a simple linear model to approximate this effect : XP N i MYN
( 2 )
|1
=
=
)
(
,
, j i
Xw iN ij jX ijw iNjX
1=
0 and where wij represents how much customer i is influenced by his neighbor j , with wij ‡ ( Note , wij = 0 if j ˇ Ni ) . While not exact , we believe it is a reasonable approximation when the probabilities are all small , as is typically the case for marketing domains . Linear models often perform well , especially when data is sparse [ 4 ] , and provide significant advantages for computation . Note that we are modeling only positive interactions between customers , which we found in our previous work to be the most common type .
Combining Equations 1 and 2 , we get
XP
( i
=
|1
MYN ) = b
, , i XP 0
( i i
= |1
Y
,
M
) i
+ 1( b i
) jX
Xw iN ij j
( 3 )
For the purposes of this paper , we will be calculating the optimal marketing plan for a product that has not yet been introduced to the market . In this situation , the state of the neighbors will not be known , so we derive a formula for computing P( Xi = 1 | Y , M ) . We first sum over all possible neighbor states :
XP
( i
=
|1
MY
,
)
=
( XP iN ) i
~ N
C
(
=
|1
~ MYNMYN
P
~
(
)
,
,
,
|
) where C(Ni ) is the set of all possible configurations of the neighbors of Xi , and hence Ñ is an set of neighbor state assignments . Substituting equation 3 , we get : XP
MY
|1
=
=
)
( i
, b N i
=
|1
Y
,
XP 0
( i i )
~ N
C
(
PM
) i
(
~ MYN
,
|
)
+
1( b i
) X j
~ N
C
(
N
) i
~ j
PNw N i ij
~ MYN
,
|
)
( where Ñj is the value of Xj specified by Ñ . P0( Xi | Y , Mi ) is independent of Ñ , so the first term simplifies to it . We swap the summation order in the second term , and note that it is zero whenever Ñj is zero . This leads to : ( XP = b
MY |1
, =
~ MYN
+ 1(
Pw
M
|1
Y
= b
(
)
)
)
(
,
,
| i
XP 0 i i ij i i
) X
N i j
~ N C with
N ( ~ N j
) i = 1
Since the inner summation is over all possible values of Ñ whenever Ñj=1 , it is equivalent to wijP( Xj = 1 | Y , M ) , hence : ( XP b =
, =
( 4 )
MY ) |1
MY
+ 1(
= |1 ( XP 0
M
|1
Y
= b
)
)
(
,
, j i i i i i
) jX
XPw iN ij
Because Equation 4 expresses the probabilities P( Xi = 1 | Y , M ) as a function of themselves , it can be applied iteratively to find them , starting from a suitable initial assignment . A natural choice for initialization is to use the internal probabilities P0( Xi = 1 | Y , Mi ) . The marketer ’s goal is to find the marketing plan that maximizes profit . For simplicity , assume that M is a Boolean vector ( ie , only one type of marketing action is being considered , such as offering the customer a given discount ) . Let c be the cost of marketing to a customer ( assumed constant ) , r0 be the revenue from selling the product to the customer if no marketing action is performed , and r1 be the revenue if marketing is performed . r0 and r1 will be the same unless the marketing action includes offering a 1(M ) be the result of setting Mi to 1 and leaving the discount . Let fi 0(M ) . The expected lift in rest of M unchanged , and similarly for fi profit from marketing to customer i in isolation ( ie , ignoring his effect on other customers ) is then [ 3 ]
1 ELP i
(
MY
,
)
=
(
XPr 1 XPr 0
(
= = i i
|1
MY
( f
,
) )
|1
Y
, f
(
M
) ) c
1 i 0 i
( cid:229 ) ˛ ( cid:229 ) ˛ ( cid:229 ) ˛ ( cid:229 ) ˛ ( cid:229 ) ( cid:229 ) ( cid:229 ) ˛ ˛ ˛ ( cid:229 ) ( cid:229 ) ˛ ˛ ( cid:229 ) ˛ We also refer to this as the customer ’s intrinsic value . Let M0 be the null vector ( all zeros ) . The global lift in profit that results from a particular marketing plan M is then ELP
=
= i
|1
MY
,
)
XPr 0
( i
=
|1
MY
,
)
0
] c i
)
MY ( , [ n XPr i
(
= 1 i
1(M ) ) – ELP(Y , fi where ri=r1 and ci=c if Mi=1 , and ri=r0 and ci=0 if Mi=0 . A customer ’s total value is the global lift in profit from marketing 0(M ) ) . A customer ’s network to him : ELP(Y , fi value is the difference between his total and intrinsic values . A customer with a high network value is one who , when marketed to , directly or indirectly influences many others to purchase . Our previous work was based on this Boolean marketing case , but in this paper we explore continuous valued marketing actions as well . The expected lift in profit in the continuous case is a straightforward extension of the Boolean one . Let z be a marketing action , with 0 £ 1 , and z = 0 when no marketing is performed . Let c(z ) be the cost of performing the action ( with c(0)=0 ) , and r(z ) be the revenue obtained if the product is purchased . Let be the result of setting Mi to z and leaving the rest of M unchanged . The expected lift in profit from performing marketing action z on customer i in isolation is then
( Mz z £ if
) z
ELP i
(
MY
,
)
=
)( XPzr
( i r
)0(
XP
( i
= =
|1
Y
, f
(
M
) ) z i 0
|1
Y
, f i
(
M
) )
)( zc
( 5 )
(
The global lift in profit is ELP [ n ( XPMr
MY
|1
=
=
(
)
)
,
MY
, i i
= 1 i
) r
)0(
XP
( i
=
|1
MY
,
)
0
( Mc
) i
]
3 . INFERENCE AND SEARCH Our goal is to find the M that maximizes ELP(Y , M ) . In our previous work , we assumed marketing actions were Boolean , and heuristically searched through the vast space of possible marketing plans . Because of the linearity of the model presented here ( see Equation 3 ) , the effect that marketing to a person has on the rest of the network ( their network effect ) is independent of the marketing actions to other customers . From a customer ’s network effect , we can directly compute whether he is worth marketing to . Let the D i(Y ) be the network effect of customer i for a product with attributes Y . It is defined as the total increase in probability of purchasing in the network ( including Xi ) that results from a unit change in P0(Xi ) : ( XP j ( XP 0
MY , 0 Y , M
|1 |1
= =
( 6 )
) )
Y
= 1
=
)
( n j i i i
Since D can calculate D Appendix for a proof ) i(Y ) is the same for any M , we define it for M = M0 . We i(Y ) using the following recursive formula ( see the
=
(
Y
) i n
= 1 j w ji
(
Y
) j
( 7 )
Intuitively , customer i ’s network effect is simply the effect that he has on people he influences , times their effect on the network . i(Y ) is initially set to 1 for all i , then recursively re calculated using equation 7 until convergence ( note this takes approximately linear time in the number of non zero wij ’s ) . Empirically , we found it converged quickly ( 10 20 iterations ) . Note that while the network value of a customer depends on the marketing scenario , the network effect does not . The network effect simply describes how much influence a customer has on the network . The network value depends on the network effect , the customer ’s responsiveness to marketing , and the costs and revenues associated with the marketing scenario . With the network effects in hand , we can calculate the expected lift in profit of marketing to each customer . For convenience , we define D Pi(z,Y ) to be the immediate change in customer i ’s probability of purchasing when he is marketed to with marketing action z :
= Y ,( zP i [ b XP 0
) ( i
= i
|1
Y
,
= zM
) i
From Equation 6 , and given that arly with purchasing across the entire network is then
Y= |1
( 0 XP
M
)
, i i i
,
(
Y
M
XP 0
])0 varies line , the change in the probability of
= = |1 0MY= |1
( jXP
)
, i n
= 1 j
XP
( j
=
|1
MY
,
)
0
D=
D=
(
Y
)
(
Y
) i i
XP 0
( i
=
|1
Y
,
M
) i
,( zP i
Y
)
Typically , only a small portion of the network will be marketed to . Therefore , it is relatively safe to approximate the increase in revenue from the network due to marketing to customer i as his influence on the network multiplied by r(0 ) . The total lift in profit is this increase in revenue on the network , plus the change in revenue from customer i , minus the cost of the marketing action :
ELP i z , total
,
=
) Y (
MY ( [ ( )0( r + )( XPzr )( zc
[
( i
)1 ) =
|1 i
,( zP i z f
( i
Y
M
Y
,
)
] ) ) r
)0(
XP
( i
=
|1
MY
,
)
]
Notice that this approximation is exact when r(z ) is constant , which is the case in any marketing scenario that is advertisingbased ( ie , if it does not offer discounts ) . When this is the case , the equation simplifies to :
ELP i z , total
MY ( , [ = ( r D= r
) ( i Y ( i
Y )
] Y ) )( zc
,( zP i Y )
)1 ) ,( zP i
[ D+ ,( zPr i
]
Y
)
)( zc
( 8 )
With Equation 8 , we can directly estimate customer i ’s lift in profit for any marketing action z . Typically , we will want to find the z that maximizes the lift in profit . To do this , we take the derivative with respect to z and set it equal to zero , resulting in : r
(
Y
) i
,( zPd i dz
Y
)
=
)( zdc dz
( 9 )
Assuming D Pi(z,Y ) is differentiable , this allows us to directly z ,total(Y , M ) which , because calculate the z which maximizes ELPi our model is linear , is the optimal value for Mi in the M that
( cid:229 ) ( cid:229 ) ( cid:229 ) ¶ ¶ D ( cid:229 ) D D D D D ( cid:215 ) D ( cid:215 ) D ( cid:229 ) D ( cid:215 ) D D ( cid:215 ) D ( cid:215 ) D D D maximizes ELP(Y , M ) . Hence , from the customers’ network effects , D i(Y ) , we can directly calculate the optimal marketing plan . We now show how this model can be applied to knowledgesharing sites . 4 . MINING KNOWLEDGE SHARING SITES Internet use has exploded over the past decade . Millions of people interact with each other online , and , in many instances , those social interactions are recorded in archives that reach back twenty years or more1 . As a result , there are many online opportunities to mine social networks for the purposes of viral marketing . UseNet newsgroups , IRC , instant messaging , online forums , and email mailing lists are examples of possible sources . In this paper , we concentrate on knowledge sharing sites . On such sites , volunteers offer advice , product ratings , or help to other users , typically for free . Social interaction on knowledge sharing sites comes in a variety of forms . One feature that is often found is some form of explicit trust between users . For example , at many sites , users rate reviews according to how helpful or accurate they are . On others , users directly rate other users . Without a filtering feature such as this , knowledge sharing sites can quickly become mired in inaccurate or inappropriate reviews . We have chosen to mine Epinions2 , possibly the best known knowledge sharing site . On Epinions , members submit product reviews , including a rating ( from 0 to 5 stars ) for any of over one hundred thousand products . As added incentive , reviewers are paid each time one of their reviews is read . Epinions users interact with each other in both of the ways outlined above , by rating reviews , and also by listing reviewers that they trust . The network of trust relationships between users is called the “ web of trust ” , and is used by Epinions to re order the product reviews such that a user first sees reviews by users that they trust . The trust relationships between users , and thus the entire web of trust , can be obtained by crawling through the pages of the individual users3 . With over 75k users and 500k edges in its web of trust , and 586k reviews over 104k products , Epinions is an ideal source for experiments on social networks and viral marketing . Interestingly , we found that the distribution of trust relationships in the web of trust is Zipfian [ 25 ] , as has been found in many social networks [ 24 ] . This is evidence that the web of trust is a representative example of a social network , and thus is a good basis for our study . A Zipfian distribution of trust is also indicative of a skewed distribution of network values , and therefore of the potential utility of viral marketing . To apply our model to Epinions , we needed to estimate some parameters , such as the effect that marketing has on a customer ’s probability of purchasing , the self reliance factor b i , and the amount of influence between customers wij . In practice , the marketing research department of a company , or the maintainers of the knowledge sharing site itself , would typically have the resources and access to customers necessary to experimentally de
1 See http://groupsgooglecom/ and http://wwwarchiveorg/ 2 http://wwwepinionscom 3 Epinions does not provide a list of all of its users , so we seeded the crawl with the top reviewers in each product category and followed both “ trusts ” and “ trusted by ” links to find other users . termine these parameters . For instance , the effect that marketing has on a customer could be measured by selecting users at random and recording their responses ( both when being marketed to and not ) . The parameters could be estimated individually for each user , or ( requiring far less data ) as the same for all users , as was done in Chickering and Heckerman [ 3 ] . If this is not feasible , they could be set using a combination of prior knowledge and any demographic information available . For Epinions , we made the simplifying assumption that a user is more likely to purchase a product if it was reviewed by a person he trusts . Though not required by the model , we considered all trusted people to have equal influence , as there is no data in Epinions to inform otherwise . Thus , Ni={Xj such that i trusts j} and wij=1/|Ni| for Xj˛ Ni . For the product attribute vector Y , we used a single attribute : the product category ( from one of 25 top level categories defined by Epinions ) . The model supports more complex attribute vectors . For example , one could imagine using the text description of products , possibly augmented by the product category and sub category . We plan to explore their effect in future work . All that remained to define was P0( Xi | Y , Mi ) , which we estimated using a naïve Bayes model[4 ] for Xi as a function of Y and Mi .
XP 0
( i
|
Y
,
M
) i
=
=
X
X
( P 0 P 0
Y | Y (
|
0
)
(
) XPXMPX i i | ( XPXMPX
)
(
)
(
)
0
| i i i
0 i ( XP 0 i ( XP 0
| i i
Y ) Y | i
|
( ) XMP 0 i ) | XMP 0
( i i
) i i
0 i
)
We used a naïve Bayes model for P0( Xi | Y ) . We equated reviewing a product with purchasing it4 , so training the model was simply a matter of counting . In the case of Epinions , measuring the effectiveness of marketing on the users was not possible for us . We expected marketing to have a larger effect on a customer who was already inclined to purchase the product , so we followed our previous work and set P0( Mi | Xi ) so as to obtain ( for the Boolean marketing scenario ) : )1 XP ( 10 ) 0 where a > 1 is a parameter that specifies the magnitude of the marketing effect5 . 5 . EXPERIMENTS We built the model based on Epinions data , as discussed above , and used it to gather empirical results . For all of the experiments , we used just one of the 25 product categories , “ Kids & Family ” , as it had the most reviews per product ( 10.2 , on average ) and a min{
XP 0
}1),0
M
M
|1
|1
=
=
=
=
=
(
( i i i i
4 We expect that more users purchase the product than review it . However , purchasers who do not review have no additional effect on the network , so knowing the ratio of purchasers to reviewers would simply scale the results . The results would be affected if we knew , per user , the probability of purchasing vs . reviewing , but this information is not available to us .
5 To fully specify P( Mi | Xi ) we used the additional constraint that P( Y , Mi=1 ) = P( Y , Mi=0 ) . With the values of a we used it was always possible to satisfy Equation 10 and this constraint simultaneously .
( cid:229 ) ( cid:229 ) reviews per person who submitted at least one review in the category ( 5.8 , on average ) . We first tested the Boolean marketing case . We hypothesized a simple advertising situation with a =2 , r0=1 , r1=1 , which meant revenues were in units of the number of products sold , and a person ’s internal probability of purchasing a product doubled after being advertised to6 . In earlier work , we varied a and found that , while it affected the scale of the results , it had little effect on the qualitative nature of them . Thus , for this paper , we fixed a and instead varied other characteristics of the model . We had no data to estimate users’ self reliance , so we simply chose to set b i=0.5 for all customers . To combat data sparseness , P0( Xi | Y ) was smoothed using an m estimate with m=2 and the population average as the prior . These parameters were all chosen before running any experiments .
Table 1 : Profit results for Boolean marketing scenario for various costs of marketing .
No Marketing Direct Marketing Viral Marketing a =2 , r0=1 , r1=1 c = 0.01 c = 0.001
37.78 42.71 60.54
37.78 66.08 70.23 c = 0.1
37.78 37.78 47.25
5.1 Profits and Network Values Viral marketing resulted in a considerable increase in profit over direct marketing ( see Table 1 ) . Notice that when the cost of marketing is a significant fraction of the revenue , the direct marketer will choose to market to no one because the cost of marketing exceeds the expected revenue from the customer ( since the customers’ influences on each other are being ignored ) . As this scenario illustrates , assuming the model is accurate , viral marketing will always perform at least as well as direct marketing , often outperforming it by a substantial margin . We measured the network value of all of the customers . Figure 1 shows the 500 highest network values ( out of 75888 ) in decreasing order . The unit of value in this graph is the average revenue that would be obtained by marketing to a customer in isolation , without costs or discounts . Thus , a network value of 200 for a given customer implies that by marketing to him we essentially get free marketing to an additional 200 customers . The scale of the graph depends on the marketing scenario ( eg , network values increase with a ) , but the shape generally remains the same . The figure shows that a few users have very high network value . This is the ideal situation for the type of targeted viral marketing we propose , since we can effectively market to many people while incurring only the expense of marketing to those few . A customer with high network value is one who : ( 1 ) Is likely to purchase the product , and thus is more affected by the marketing , and ( 2 ) is trusted by many other people in the network , who tend
6 In previous work we varied the value of a and found that , while it affected the scale of results , they remained qualitatively similar . l e u a V k r o w t e N d e z i l a m r o N
25000
20000
15000
10000
5000
0
Rank
Figure 1 : Typical distribution of network value . to have low b i , and who also have characteristic 2 , and so on recursively . For instance , the customer with the highest network value ( 22,000 ) influences 784 people , and has a probability of purchasing of 0.03 , which is 23 times that of the average person . 5.2 Speed The linear model introduced in this paper has tremendous speed advantages over a non linear model such as that introduced in our previous work . Because of the independence that linearity provides , we are able to simultaneously calculate the network value for all customers . The network value is independent of the marketing actions being performed on others , which allows us to find the optimal marketing plan7 without performing a heuristic search over plans . It would take approximately 100 hours to perform the single pass search ( the fastest of the heuristic search methods introduced in our previous work ) with this model , or about 10 15 minutes if we make approximations in the inference . In contrast , the linear model takes 1.05 seconds to find the optimal marketing plan . At these speeds , our model could be used to find optimal marketing plans for markets involving hundreds of millions of customers in just hours . 5.3 Continuous Marketing Actions Continuous valued marketing actions ( Mi˛ [ 0,1 ] ) allow the marketer to better optimize the marketing plan – tailoring the action for each person specifically to his characteristics . Our framework allows for any function to be used to model P0( Xi | Y , Mi ) , as long as it is differentiable in Mi . As in the Boolean case , we have chosen to model the effect of marketing as a multiplicative factor on the internal probability of purchasing : = )0 zMXP 0 a ( z ) could be any differentiable function , and we assume a ( 0)=1 . c(z ) also could be any differentiable function . We have chosen c(z)=c1z such that the cost of marketing is directly proportional to the amount of marketing being performed .
)( MXPz
=
= a
)
(
0
| i i
(
| i i
7 The plan is optimal if r0=r1 ( or if r(z ) is constant in the continuous marketing scenarios ) . If r1<r0 then the plan overestimates the revenues from influence on the network , potentially resulting in a sub optimal marketing plan . In our experience , this overestimation ranged from 1 % to 10 % of the profits . We thus believe the resulting plan was still nearly optimal .
( cid:215 ) ) z (
2.5
2
1.5
1
0.5
0
0
0.2
0.4
0.6
0.8
1
Marketing Action ( z )
Figure 2 : Marketing effect vs . marketing action .
= a
)( z
+ 1(
We believe an exponentially asymptotic function for a ( z ) is reasonable ; it models the phenomenon of diminishing returns ( ie , the more money that is spent on marketing , the less improvement is derived from it ) . We also experimented with logarithmic and inverse polynomial functions , which gave similar results . The function we used was : l a ze Note that a ( 0)=1 , and a ( z)fi ¥ . The parameter l affects the curvature of the function ; a ( z ) converges to a ¥ more quickly with a large l . In the experiments below , we used l =5 , which is large enough that a ( 1 ) » a ¥ , yet low enough that a ( z ) does not converge to a ¥ too quickly . The resulting curve , for a ¥ =2 , is shown in Figure 2 . From equation 9 , we can find the optimal marketing action for each customer a ¥ as zfi a
)
)( zdc dz c
D= r b
(
Y
) i
= r
(
Y
) i
(
XP 0 i lb i
1( i
= a
|1
Y
,
M i
=
)0 l z
) e a ( d
)1)( z dz ln r
(
Y
) i lb i
1( a
= z c (
) XP 0 l
= i
|1
Y
,
M i
=
)0
The second derivative is negative , implying the point is a maximum . We ran the same experiments as in the Boolean case , with a ¥ =2 so that marketing fully to a customer will double their internal probability of purchasing the product , as before . The results are presented in Table 2 . In all three scenarios , and for both direct and viral marketing , continuous marketing actions resulted in a higher lift in profit than Boolean actions , sometimes by a very significant amount . Viral marketing also continued to consistently outperform direct marketing . The increased lift in profit is due to two factors : ( 1 ) At low z , the a ( z ) curve provides a more favorable ratio of marketing effect to cost , and ( 2 ) tailoring the marketing action for each customer allows us to optimize the tradeoff between the cost and benefit of marketing on a per customer basis .
Table 2 : Profit results for continuous marketing scenario for various costs of marketing . a ¥ =2 , r(z)=1 , l =5
No Marketing Direct Marketing Viral Marketing Lift over Boolean Viral Marketing c1 = 0.1 37.78 37.84 51.14 3.89 c1 = 0.01 c1 = 0.001
37.78 51.71 63.23 2.69
37.78 68.38 71.28 1.05
( 41.08 % )
( 11.82 % )
( 3.24 % )
To verify that factor ( 1 ) is not the sole cause of the increase in profit , we ran Boolean marketing experiments with a =a ( z ) and c=c(z ) for z ranging from 0 to 1 . Doing so simulates a company which globally optimizes its choice of marketing action , but still performs that same ( or no ) action on each customer . The maximum realizable profits in this case were 49.90 , 61.60 , and 70.23 for a c1 of 0.1 , 0.01 , and 0001 These results show that tailoring the marketing action for each customer is indeed a significant cause of the increase in profits derived from the continuous marketing case . One interesting question is what happens if the marketing effect function a ( z ) is linear , a ( z)= a z . In this case , continuous valued marketing reduces to Boolean marketing . If it would be profitable to market to a customer some ( z>0 ) , then the benefit of marketing to him must be higher than the cost for any z ( since both the cost and the benefit are linear ) , and it would thus advantageous to market to him the maximum possible ( z=1 ) . 5.4 Incomplete Network Knowledge So far , we have considered only markets where the entire social network between customers is known . This is often not the case . In fact , most companies today have little or no knowledge of the actual relationships between their customers . In such a situation , companies may simply choose to use direct marketing , but if they do , they will likely lose profit opportunities , as demonstrated in earlier sections . In the following sections , we will demonstrate that even with little network knowledge , our viral marketing methods still outperform direct marketing . In all of the experiments that follow , we used continuous valued marketing actions , with the same parameters as those used for Section 5.3 ( Table 2 ) and c1 = 01
541 Viral marketing is robust We simulated partial knowledge by randomly removing members from the neighbor sets , which corresponds to randomly removing edges from the social network . This is the situation a company would be in if they had only a random sample of the neighbor relations between customers . We devised the optimal marketing plan on the incomplete network , and then tested this plan on the complete network , which simulates the “ real world ” . Naturally , when no edges are known , viral marketing is equivalent to direct marketing . a ¥ ¥ ( cid:247 ) ( cid:247 ) ł ( cid:246 ) ( cid:231 ) ( cid:231 ) Ł ( cid:230 ) D ( cid:222 ) D ( cid:222 ) ¥ ¥ t i f o r P n
I t f i L l a n o i t i d d A g n i t e k r a M t c e r i D e v o b a
16 14 12 10 8 6 4 2 0
Actual Estimated
0
0.2
0.4
0.6
0.8
1
Fraction of edges known t i f o r P n
I t f i L
14
12
10
8
6
4
2
0
By Network Effect
Random
0
20000
40000
60000
80000
Customers Queried
Figure 3 : Actual and estimated difference between viral marketing and direct marketing profits with only partial network knowledge .
In Figure 3 ( “ Actual ” ) , we show the difference in profit between direct and viral marketing for partially known networks . Surprisingly , the company can achieve 69 % of the lift in profit knowing only 5 % of the edges in the network . Further , the algorithm considerably underestimates the lift in profit that will result ( Figure 3 , “ Estimated ” ) , meaning that for a company with only partial network knowledge , not only are viral marketing plans robust but the actual results of viral marketing will be significantly better than the algorithm estimates . We hypothesize that this robustness will occur whenever the edges are missing at random ( or approximately so ) , resulting in a correlation between the number of people who trust a given person in the partial network and the number who trust him in the true network . A customer who appears to have a high network value in the partial network is likely to have a high network value in the full network , and would thus be chosen to be marketed to . We also believe that the algorithm could use an estimate of the fraction of edges that are missing to construct an even better viral marketing plan ; we plan to investigate this in future work .
542 Acquiring new network knowledge In many instances , a company will have little or no knowledge about the relationships between its customers , but may be willing to spend marketing research funds to acquire it . More knowledge about the influences between customers will allow the company to form a marketing plan with a higher lift in profit . If the company could compute the value of information [ 8 ] of knowing the neighbors of each customer , it could then make a decisiontheoretic choice of which , and how many , customers to query . The acquisition of neighbor relations could be done in many ways . For the purposes of this paper , we assume that it is done by selecting a user to query , spending money to persuade him to provide a list of the people he trusts , selecting another user to query , and so on . We assume the company has a fixed amount of money it is willing to spend for this , and that the cost of querying a user is constant . The interesting problem is thus not how many users to query , but how to select the subset of users to query that leads to the most profit .
Figure 4 : Lift in profit ( on the full network ) for the viral marketing plan in which the given number of customers has been queried for their neighbor information .
A customer with a high network effect has a large influence on the network , and is thus one that we wish to influence to purchase the product . Apart from directly marketing to the customer , we can indirectly influence him by marketing to those that he trusts , which we can discover by querying him . One estimate for a customer ’s network effect on the full network is his network effect on the partial network . We thus query the customer with the highest network effect on the partial network , recalculate network effects with the new information , query the next customer with highest network effect , and so on until the marketing funds have been spent . We performed this experiment , starting with a network containing no neighbor information8 . Figure 4 shows the resulting lift in profit , compared to randomly selecting customers to query . Our method performs well , lifting profits an order of magnitude more than random choice would when 1000 customers are queried , and by almost 3 times the lift achieved by random choice when 10 % of the customers are queried . We must re calculate the customers’ network effects each time we query a user . We can drastically speed this up by querying the 100 customers with highest network effect at each iteration , with a potential loss of accuracy . Interestingly , the lift in profit when selecting 100 customers at a time is only ( on average ) 0.008 less than when selecting one at a time , a negligible amount compared to the lift in profit itself . Since it takes 1/100th the time to run , this approximation could be used to make knowledge acquisition tractable for non linear models , or for markets of tens of millions of customers . In future work , we would like to find a measure that estimates the increase in ELP of querying one more user , thus informing the company when to stop acquiring network knowledge . This would allow us to optimize the overall profit ( lift in profit minus funds spent to acquire network knowledge ) . We believe such a measure could be formed from the ELP , an estimate of the number of missing edges , and other statistics on the partial network .
8 The first customers to query are therefore chosen at random .
6 . RELATED WORK In our previous work [ 5 ] , we mined a collaborative filtering system to demonstrate the advantages of our viral marketing approach over direct or mass marketing . There , we used a more complicated , piecewise linear function over product ratings to determine the influences of customers on each other . In this paper , we used a model with stronger linearity assumptions to achieve greater scalability . A disadvantage of our previous work is that it required full knowledge of network structure , and restricted the marketer to selecting Boolean marketing actions . Both of these limitations were addressed and overcome in this paper . Interestingly , the computation of network effect ( see Equation 7 ) is very similar to the PageRank[21 ] algorithm , used by Google[2 ] for determining important web pages . In PageRank , a web page is valued highly if many highly valued pages point to it . Similarly , in viral marketing a customer is valued highly if he influences many highly valued customers . The computation is equivalent to finding the primary eigenvector of the matrix W , where Wij=wij ( wji for PageRank ) . The network effect of a customer is also proportional to the probability that a random walker , who randomly traverses the links of influence in the network backwards , is at that customer . Also related is the HITS[15 ] algorithm , which would find bipartite “ trusts/trusted by ” sub graphs in the web of trust . Interestingly , social networks , the World Wide Web , and many naturally occurring networks all exhibit Zipfian , or “ scale free ” characteristics , and have been the topic of much recent research [ 17 ] [ 1 ] . Social networks have been the object of much research . One classic paper is that by Milgram [ 20 ] , which estimated that every person in the world is only six acquaintances away from every other . Some recent social network research uses the Internet as a source of data . For instance , Schwartz and Wood [ 23 ] mined social relationships from email logs , the ReferralWeb project mined a social network from a wide variety of publicly available online information [ 14 ] , and the COBOT project gathered social statistics from participant interactions in the LambdaMoo MUD [ 11 ] . Our network was mined from a knowledge sharing site . A good overview of Epinions and other sites like it can be found in Frauenfelder [ 6 ] . Several researchers have studied the problem of estimating a customer ’s lifetime value from data [ 12 ] , generally focusing on variables like an individual ’s expected tenure as a customer [ 19 ] and future frequency of purchases [ 7 ] . Networks of customers have received some attention in the marketing literature [ 10 ] but most of these studies are purely qualitative , or involve very small data sets and overly simplified models . Krackhardt [ 16 ] proposes a model for optimizing which customers to offer a free sample of a product to , but the model only considers the impact on the customer ’s immediate friends , assumes the relevant probabilities are the same for all customers , and is only applied to a made up network with seven nodes . 7 . FUTURE WORK We have developed models for viral marketing on social networks mined from real world data . There are many directions in which these models , or their use , could be extended . In this section , we describe some of the main ones . In this paper , we mined a network from a single source . In general , multiple sources of relevant information will be available ; the ReferralWeb [ 14 ] project exemplified their use . Methods for combining diverse information into a sound representation of the underlying influence patterns are thus an important area for research . Here , we considered only constant r(z ) . In preliminary experiments , a decreasing r(z ) caused the algorithm to somewhat overestimate the lift in profit that would result from a particular marketing plan , therefore likely leading to a sub optimal marketing plan ( though it still outperformed direct marketing ) . In future work , we would like to investigate methods for handling variable r(z ) , which may involve , for instance , a correction factor based on the expected number of customers that will be marketed to . We have introduced methods for developing a marketing plan when the structure of the network is unknown or only partially known , but there are still many directions in which the methods could be extended . In particular , we would like to explore the effect of having a biased network sample on the resulting viral marketing plan . Knowing how the sample is biased should lead to better marketing plans . Also , with more information it may be possible to make more intelligent selections about which users to query . All information known about a user ( eg , demographic characteristics , past purchasing behavior , and partial knowledge about “ trusts/trusted by ” relations ) could be used to estimate the value of querying him . We would like to further develop the application of the theory of value of information [ 8 ] to optimizing the tradeoff between the cost and expected benefits of acquiring knowledge about the network . This paper considered making marketing decisions at a specific point in time . A more sophisticated alternative would be to plan a marketing strategy by explicitly simulating the sequential adoption of a product by customers given different interventions at different times , and adapting the strategy as new data on customer response arrives . A further time dependent aspect of the problem is that social networks are not static ; they evolve , and particularly on the Internet can do so quite rapidly . Some of the largest opportunities may lie in modeling and taking advantage of this evolution . If the network evolution is understood , it may be possible to affect the structure itself , driving the network toward one which has a higher profit potential . We would also like to investigate further the algorithmic similarities between viral marketing and web page ranking algorithms such as PageRank[21 ] and HITS[15 ] . Applying the techniques and lessons learned in viral marketing to the web domain , or vice versa , could result in new insights into the problems found in each . For instance , recent work on mining significant Web subgraphs such as bipartite cores , cliques and web rings ( eg , [ 17 ] ) may be applicable to viral marketing . Their techniques could possibly be used to study network sub structures and identify those with the highest profit potential . 8 . CONCLUSION This paper uses data mining to improve viral marketing . We apply our techniques to data mined from a real world knowledgesharing site , and show that they scale efficiently to networks of hundreds of millions of customers . We extend our techniques to handle continuously variable marketing actions and partial network knowledge . Our results show the promise of our approach .
9 . ACKNOWLEDGEMENTS This research was partly funded by NSF CAREER and IBM Faculty awards to the second author . 10 . REFERENCES [ 1 ] A . L . Barabási , R . Albert , and H . Jong . Scale free characteristics of random networks : The topology of the World Wide Web . Physica A , 281:69 77 , 2000 .
[ 2 ] S . Brin and L . Page . The anatomy of a large scale hypertextual Web search engine . In Proceedings of the Seventh International World Wide Web Conference , Brisbane , Australia , 1998 . Elsevier .
[ 3 ] D . M . Chickering and D . Heckerman . A decision theoretic approach to targeted advertising . In Proceedings of the Sixteenth Annual Conference on Uncertainty in Artificial Intelligence , Stanford , CA , 2000 . Morgan Kaufmann .
[ 4 ] P . Domingos and M . Pazanni . On the optimality of the simple Bayesian classifier under zero one loss . Machine Learning , 29:103 130 , 1997 .
[ 5 ] P . Domingos and M . Richardson . Mining the Network Value of Customers . In Proceedings of the Seventh International Conference on Knowledge Discovery and Data Mining , pages 57 66 , San Francisco , CA , 2001 . ACM Press .
[ 6 ] M . Frauenfelder . Revenge of the know it alls : Inside the Web ’s free advice revolution . Wired 8(7):144 158 , 2000 .
[ 7 ] K . Gelbrich and R . Nakhaeizadeh . Value Miner : A data mining environment for the calculation of the customer lifetime value with application to the automotive industry . In Proceedings of the Eleventh European Conference on Machine Learning , pages 154 161 , Barcelona , Spain , 2000 . Springer . [ 8 ] R . A . Howard . Information value theory . IEEE Transactions on Systems Science and Cybernetics , SSC 2:22 26 . 1966 [ 9 ] A . M . Hughes . The Complete Database Marketer : Second
Generation Strategies and Techniques for Tapping the Power of you Customer Database . Irwin , Chicago , IL , 1996 . [ 10 ] D . Iacobucci , editor . Networks in Marketing . Sage , Thousand
Oaks , CA , 1996 .
[ 11 ] C . L . Isbell , Jr . , M . Kearns , D . Korman , S . Singh , and P .
Stone . Cobot in LambdaMOO : A social statistics agent . In Proceedings of the Seventeenth National Conference on Artificial Intelligence , pages 36 41 , Austin , TX , 2000 . AAAI Press .
[ 12 ] D . R . Jackson . Strategic application of customer lifetime value in direct marketing . Journal of Targeting , Measurement and Analysis for Marketing , 1:9 17 , 1994 .
[ 13 ] S . Jurvetson . What exactly is viral marketing ? Red Herring ,
78:110 112 , 2000 .
[ 14 ] H . Kautz , B . Selman , and M . Shah . ReferralWeb : Combining social networks and collaborative filtering . Communications of the ACM , 40(3):63 66 , 1997 .
[ 15 ] J . M . Kleinberg . Authoritative sources in a hyperlinked envi ronment . In Proceedings of the Ninth Annual ACM SIAM Symposium on Discrete Algorithms , pages 668 677 , Baltimore , MD , 1998 . ACM Press .
[ 16 ] D . Krackhardt . Structural leverage in marketing . In D .
Iacobucci , editor , Networks in Marketing , pages 50 59 . Sage , Thousand Oaks , CA , 1996 .
[ 17 ] R . Kumar , P . Raghavan , S . Rajagopalan , and A . Tomkins . Extracting large scale knowledge bases from the Web . In Proceedings of the Twenty Fifth International Conference on Very Large Databases , pages 639 650 , Edinburgh , Scotland , 1999 . Morgan Kaufmann .
[ 18 ] C . X . Ling and C . Li . Data mining for direct marketing :
Problems and solutions . In Proceedings of the Fourth International Conference on Knowledge Discovery and Data Mining , pages 73 79 , New York , NY , 1998 . AAAI Press . [ 19 ] D . R . Mani , J . Drew , A . Betz , and P . Datta . Statistics and data mining techniques for lifetime value modeling . In Proceedings of the Fifth ACM SIGKDD International Conference on Knowledge Discovery and Data Mining , pages 94103 , New York , NY , 1999 . ACM Press .
[ 20 ] S . Milgram . The small world problem . Psychology Today ,
2:60 67 , 1967 .
[ 21 ] L . Page , S . Brin , R . Motwani , and T . Winograd . The PageR ank citation ranking : Bringing order to the web . Technical Report , Stanford University , Stanford , CA . 1998 .
[ 22 ] G . Piatetsky Shapiro and B . Masand . Estimating campaign benefits and modeling lift . In Proceedings of the Fifth ACM SIGKDD International Conference on Knowledge Discovery and Data Mining , pages 185 193 , San Diego , CA , 1999 . ACM Press .
[ 23 ] M . F . Schwartz and D . C . M . Wood . Discovering shared interests using graph analysis . Communications of the ACM , 36(8):78 80 , 1993 .
[ 24 ] S . Wasserman and K . Faust . Social Network Analysis : Meth ods and Applications . Cambridge University Press , Cambridge , UK , 1994 .
[ 25 ] G . K . Zipf . Human Behavior and the Principle of Least Ef fort . Addison Wesley , Boston , MA , 1949 .
11 . APPENDIX In this appendix , we give a proof for Equation 7 :
=
(
Y
) i n
= 1 j w ji
(
Y
) j
As this is an iterative equation , we identify which iteration we are on by a super script . Let = n n n
( YD=
)
|
MY
,
) and
P i
XP
( i n i i be the nth estimate of customer i ’s network effect and probability of purchasing , respectively , and let
=
PP i i
0
=
( 0 XP i
|
Y
,
M
) i since on the 0th iteration no network effect is taken into account . For notational convenience , we also define w b =
1( w
) k km km
( cid:229 ) D D D ¢ The iterative update from Equation 4 is :
= b n P k
XP 0
( k k
|
Y
,
M
) k
+ m n Pw m km
1
Thus ,
= n P k P i m w km
1 n P m P i
Note that ¶=
0 P k P i
P k P i
=
1 0 if k if k
= i i
Also note , from Equation 6 , we have
= n i k n P k P i and also
=
0 i k
=
1
0 P k P i
We will now prove by induction that
= n i k w ki
1 n k for n
1
( 12 )
We first prove that the induction hypothesis is true for the case where n = 1 :
=
1 i k
1 P k P i
1 n P m P i
=
=
= w km k m w ki k w ki
0 k k
We now prove Equation 12 is true for n if we assume it is true for n 1 .
1
= n i k w ki n k
2
By “ unrolling ” the recursion , we obtain
We first will prove by induction that
1
= n i
a a 1
2 a n
1 ww ia 1 aa 12
w a a 1 n n
2
= n P k P i
a a 1
2 a n
1 ww ia 1 aa 12
w ka n
1 for n
2
( 11 )
From the definition of n i
, and from Equation 11 :
We first show this is true for the case where n = 2 :
2 P k P i
=
=
= a 1 a 1 a 1 w ka 1
1 P a 1 P i w ma 1
0 P m P i w ka 1 m ww ka 1 ia 1
We now prove Equation 11 is true for n if we assume it is true for n 1 : n P k P i
=
=
=
= w km w km m m
1 n P m P i a a 1
2 w ka n
1 a n
1
a a 1
2 a n
1
2 a a 1 ww ia 1 n
2
a a ww ia 1 aa 12
w ma n
2 ww ia 1 aa 12
w a a 1 n n
2 n
2
w ka n
1 aa 12
This completes the proof of Equation 11 .
= n i k
= n P k P i
k a a
1
2 a n
1 ww ia 1 aa 12
w ka n
1 renaming a1 as k , aj as aj 1 for 2 £ w a ww
= n i ki j £ ka 1 a 1 n n
2 a n
1 k a 1 a n
2 n 1 , and k as an 1 , we obtain : w ka 1
w a a 1 n n
2
=
= k k w ki
a a 1 n
1 w ki
1 n k
We have shown that
= n i w ki n k
1 . If this recursion is iterated until it reaches a fixed point , the resulting values for D n i satisfy k
=
(
Y
) i n
= 1 j w ji
(
Y
) j
This completes the proof of Equation 7 .
( cid:229 ) ¢ ( cid:229 ) ¶ ¶ ¢ ¶ ¶ ( cid:238 ) ( cid:237 ) ( cid:236 ) „ ¶ ¶ ¶ ( cid:229 ) ¶ ¶ D ¶ ¶ D ( cid:229 ) ‡ ¢ ¢ ¢ ¶ ¶ ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ¢ ¢ ¶ ¶ ¢ ¢ ¶ ¶ ¢ ¶ ¶ ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¶ ¶ ¢ ¶ ¶ ‡ D ¢ D ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) D ¢ ¢ ¶ ¶ ¢ ¶ ¶ D ( cid:229 ) D ¢ D ( cid:229 ) ( cid:229 ) ( cid:229 ) ¢ ¢ ¢ D D ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ¢ ¢ ¢ ¶ ¶ D ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) ( cid:229 ) D ¢ ( cid:247 ) ( cid:247 ) ł ( cid:246 ) ( cid:231 ) ( cid:231 ) Ł ( cid:230 ) ¢ ¢ ¢ ¢ ¢ ¢ D ( cid:229 ) D ¢ D ( cid:229 ) D D
