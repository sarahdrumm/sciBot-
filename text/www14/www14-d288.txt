Predicting Crowd Behavior with Big Public Data
Massachusetts Institute of Technology
77 Massachusetts Ave E40 149
Nathan Kallus
Cambridge , MA 02139 kallus@mit.edu
4 1 0 2 b e F 0 1
] I S . s c [
1 v 8 0 3 2
.
2 0 4 1 : v i X r a
ABSTRACT With public information becoming widely accessible and shared on today ’s web , greater insights are possible into crowd actions by citizens and non state actors such as large protests and cyber activism . We present efforts to predict the occurrence , specific timeframe , and location of such actions before they occur based on public data collected from over 300,000 open content web sources in 7 languages , from all over the world , ranging from mainstream news to government publications to blogs and social media . Using natural language processing , event information is extracted from content such as type of event , what entities are involved and in what role , sentiment and tone , and the occurrence time range of the event discussed . Statements made on Twitter about a future date from the time of posting prove particularly indicative . We consider in particular the case of the 2013 Egyptian coup d’´etat . The study validates and quantifies the common intuition that data on social media ( beyond mainstream news sources ) are able to predict major events .
Keywords Web and social media mining , Twitter analysis , Crowd behavior , Forecasting , Event extraction , Temporal analytics , Sentiment analysis , Online activism
1 .
INTRODUCTION
The manifestation of crowd actions such as mass demonstrations often involves collective reinforcement of shared ideas . In today ’s online age , much of this public consciousness and comings together has a significant presence online where issues of concern are discussed and calls to arms are publicized . The Arab Spring is oft cited as an example of the new importance of online media in the formation of mass protests [ 6 ] . While the issue of whether mobilization occurs online is highly controversial , that nearly all crowd behavior in the internet connected world has some presence online is not . So while it may be infeasible to predict an action developing in secret in a single person ’s mind , the ready acces
Copyright is held by the International World Wide Web Conference Committee ( IW3C2 ) . IW3C2 reserves the right to provide a hyperlink to the author ’s site if the Material is used in electronic media . WWW’14 Companion , April 7–11 , 2014 , Seoul , Korea . ACM 978 1 4503 2745 9/14/04 . http://dxdoiorg/101145/25679482579233 sibility to public information on the web that future crowds may now be reading and reacting to or members of which are now posting on social media can offer glimpses into the formation of this crowd and the action it may take .
News from mainstream sources from all over the world can now be accessed online and about 500 million tweets are posted on Twitter each day with this rate growing steadily [ 14 ] . Blogs and online forums have become a common medium for public discourse and many government publications are offered for free online . We here investigate the potential of this publicly available information online for predicting mass actions that are so significant that they garner wide mainstream attention from around the world . Because these are events perpetrated by human actions , they are in a way endogenous to the system , enabling prediction .
But while all this information is in theory public and accessible and could lead to important insights , gathering it all and making sense of it is a formidable task . We here use data collected by Recorded Future ( wwwrecordedfuturecom ) Scanning over 300,000 different open content web sources in 7 different languages and from all over the world , mentions of events—in the past , current , or said to occur in future— are continually extracted at a rate of approximately 50 extractions per second . Using natural language processing , the type of event , the entities involved and how , and the timeframe for the event ’s occurrence are resolved and made available for analysis . With such a large dataset of what is being said online ready to be processed by a computer program , the possibilities are infinite . For one , as shown herein , the gathering of crowds into a single action can often be seen through trends appearing in this data far in advance .
We here study the cases of mass protests and politically motivated cyber campaigns involving an entity of interest , such as a country , city , or organization . We use historical data of event mentions online , in particular forward looking mentions of events yet to take place , to forecast the occurrence of these in the future . We can make predictions about particular timeframes in the future with high accuracy .
We find that the mass of publicly available information online has the power to unveil the future actions of crowds . Measuring the trends in sheer numbers we are here able to accurately predict protests in countries and in cities and large cyber campaigns by target and by perpetrator . After assembling our prediction mechanism for significant protests , we investigate the case of the 2013 Egyptian coup d’´etat and how well we were able to foresee the protests surrounding it . The ability to forecast these things has important ramifications . Countries and cities faced with a high likelihood of significant protest can prepare themselves and their citizens to avoid any unnecessary violence and damages . Companies with personnel and supply chain operations can ask their employees to stay at home and to remain apolitical and can attempt to safeguard their facilities in advance . Countries , companies , and organizations faced with possible cyber campaigns against them can beef up their cyber security in anticipation of attacks or even preemptively address the cause for the anger directed at them .
Recent work has used online media to glean insight into consumer behavior . In [ 2 ] the authors mine Twitter for insights into consumer demand with an application to forecasting movie earnings . In [ 8 ] the authors use blog chatter captured by IBM ’s WebFountain [ 7 ] to predict Amazon book sales . These works are similar to this one in that they employ very large data sets and observe trends in crowd behavior by huge volumes . Online web searches have been used to describe consumer behavior , most notably in [ 3 ] and [ 5 ] , and to predict movements in the stock market in [ 4 ] .
In [ 13 ] the authors study correlations between singular events with occurrence defined by coverage in the New York Times . By studying when does one target event ensue another specified event sometime in the future , the authors discover truly novel correlations between events such as between natural disasters and disease outbreaks . Here we are interested in the power of much larger , more social , and more varied datasets in pointing out early trends in endogenous processes ( actions by people discussed by people ) that can help predict all occurrences of an event and pinning down when they will happen , measuring performance with respect to each time window for prediction . One example of the importance of a varied dataset that includes both social media and news in Arabic is provided in the next section .
We here seek to study the predictive power of such web intelligence data and not simply the power of standard machine learning algorithms ( eg random forests vs . SVMs ) . Therefore we present only the learning machine ( random forest in the case of predicting protests ) that performed best on the training data and compare it to a data poor maximumlikelihood random walk predictor that predicts for the future the situation today . The data used in this study has been made available for download at wwwnathankallus com/PredictingCrowdBehavior/ .
We first discuss what predictive signals we expect to find in order to motivate our constructions . We then review how mentions of events , entities , and times are extracted from the wide breadth of sources . Using this data we develop a predictive mechanism to predict significant protests in countries and in cities . We consider the case of the 2013 Egyptian coup d’´etat and conclude . In an appendix we consider finding more general patterns in the data , motivating an application of the na¨ıve Bayes classifier to high dimensional sequence mining in massive datasets , which we use to forecast cyber attack campaigns by target or perpetrator .
2 . PREDICTIVE SIGNALS IN PUBLIC DATA
We begin by exemplifying anecdotally the precursory signals that exist in public data for large protests . On Sunday June 9 , 2013 a Beirut protest against Hezbollah ’s interference in Syria turned violent when clashes with Hezbollah supporters left one protester dead [ 11 ] . The story was widely reported on June 9 including in Western media , attracting more mainstream news attention than any protest event in
Lebanon in over a year marking it as a significant protest .
But not only were there signs that the protest would occur before it did , there were signs it may be large and it may turn violent . The day before , Algerian news source Ennahar published an article with the headline “ Lebanese faction organizes two demonstrations tomorrow rejecting the participation of Hezbollah in the fighting in Syria ” ( translated from Arabic using Google Translate ) . There was little other preliminary mainstream coverage and no coverage ( to our knowledge ) appeared in mainstream media outside of the Middle East North Africa ( MENA ) region or in any language other than Arabic . Moreover , without further context there would be little evidence to believe that this protest , if it occurs at all , would become large enough or violent enough to garner mainstream attention from around the world .
However , already by June 5 , four days earlier , there were many Twitter messages calling people to protest on Sunday , saying “ Say no to #WarCrimes and demonstrate against #Hezbollah fighting in #Qusayr on June 9 at 12 PM in Downtown #Beirut ” and “ Protest against Hezbollah being in #Qusair next Sunday in Beirut . ” In addition , discussion around protests in Lebanon has included particularly violent words in days prior . A June 6 article in TheBlaze.com reported , “ Fatwa Calls For Suicide Attacks Against Hezbollah , ” and a June 4 article in the pan Arabian news portal Al Bawaba reported that , “ Since the revolt in Syria , the security situation in Lebanon has deteriorated . ” A May 23 article in The Huffington Post mentioned that , “ The revolt in Syria has exacerbated tensions in Lebanon , which remains deeply divided . ” Within this wider context , understood through the lens of web accessible public information such as mainstream reporting from around the world and social media , there was a significant likelihood that the protest would be large and turn violent . These patterns persist across time ; see Figure 1 .
It is these predictive signals that we would like to mine from the web and employ in a learning machine in order to forecast significant protests and other crowd behavior . In this case , it is critical that we spread a wide net on many sources so to catch mentions in non Western media and foreign language Tweets along with mentions in media ( such as Reuters ) and languages ( such as English ) with a more global reach .
3 . EVENT EXTRACTION AND TEMPORAL
ANALYSIS
To quantify these signals we will look at time stamped event entity data . The data harvesting process extracts mentions of events from the plethora of documents continually gathered from the over 300,000 sources being monitored . An important aspect is that the event mentions are tagged
Figure 1 : Number of same day news reports of protest in Lebanon ( red ) and tweets mentioning protests said to occur over the next three days ( blue ) . Red spikes often follow blue spikes or otherwise have a recognizable convex ramp up .
MainstreamnewsForward(cid:45)lookingtweets9 1510 110 1511 111 15Day50100ReportsofprotestinLebanonbypublishday with the time range in which the event is said to occur in the mention so that forward looking statements , such as plans to protest , can be directly tied to a future time and place . Event extractions are done in Arabic , English , Farsi , French , Russian , Spanish , and Simplified and Traditional Chinese .
There are several elements in the event , entity , and time extraction process . For each document mined from the web , an ensemble of off the shelf natural language processing tools are used to extract tokens ( lemma , root , stem , and part of speech ) and entities . Entities extracted by each tool are then combined and resolved into a database of canonical entities for disambiguation . Documents are categorized by topic . Entities that are not agreed upon by the various tools and are far fetched given the topic are rejected . Ontologies of structured entity relationships constructed from online sources ( such as DBpedia ) are used to guide filtering and provide a gazetteer for additional entity extraction .
Given the set of filtered entities , a statement extractor links these entities to events stated in the document . Events are again extracted using an ensemble method of off theshelf tools and a custom made tool that relies on the above tokenization . Each event from the various extraction sources is matched up with a particular text fragment from the document that best represents it . Next , n grams in the document are matched against phrase lists organized by sentiment or tone and the fraction of these in the fragment is recorded .
All time statements made in the document are separately extracted . The tokenization of the document is parsed by a dependency grammar using the data driven parser MaltParser [ 10 ] to construct a dependency graph of the document . This is used to find time statements , both relative ( eg “ next summer ” ) and absolute . Comprehending these in machine time is based on several contextual cues . Cultural and regional categorizations are extracted from the document to inform such things as relevant hemisphere for seasons , which is the first day of the week , standard date formats ( month first or day first ) , and timezone . Moreover , contexts such as publishing date are noted . Using these , all time statements made in the document are converted to standardized time stamps , with specificity varying from second to year . Event mentions are then matched up with the most relevant time statement to the event statement based on sentence dependency .
In all , events are marked by type of event , time range of event , entities involved , role of entities involved , entities mentioned , sentiment and tone , and origin . Some postprocessing is done on the event entity level to further improve quality based on special curated ontologies . For example , known hacker groups such as Anonymous constitute one such ontology and if mentioned in a cyber event but not clearly as the perpetrator these are assumed to be so nonetheless . Similarly , impossible events are rejected . For example , one ontology keeps track of death dates of people based primarily on information harvested from Wikipedia and assists in rejecting the event “ Marco Polo will travel to China in 2015 ” as impossible because Marco Polo is dead .
The precision of event extraction is measured by workers on the Amazon Mechanical Turk ( mturkers ) . To test the precision of time stamping , for each language languagespecific Human Intelligence Tasks ( HITs ) are constructed for a random sample . Each HIT consists of the text fragment , the extracted time stamp , and the question “ is extracted time right or wrong ? ” and is given to three mturkers . It
Country Afghanistan Bahrain Egypt Greece India Indonesia Iran Italy Jordan
All Twitter 27655 177310 397105 70521 274027 17120 53962 43803 19369
60918 246136 944998 122416 491475 34007 118704 65569 35396
Country Lebanon Libya Nigeria Pakistan S . Arabia Sudan Syria Tunisia Yemen
All Twitter 23394 69437 38700 213636 13670 13654 79577 27233 16712
44153 162721 70635 289643 39556 28680 212815 99000 70583
Table 1 : Protest event mentions in the corpus . is declared successful if at least two answer “ right . ” For example , the precision of time stamping in both English and Spanish is measured at 93 % , in Arabic at 90 % , and in Simplified Chinese at 82 % . The precision of the event extraction is measured similarly by type . Protest events in English come in at 84 % . Malware threat events in English come in at 96 % and in Simplified Chinese at 90 % .
4 . PREDICTING SIGNIFICANT PROTESTS We now turn our attention to the use of this event data to the prediction of significant protests around the world . Our first forecasting question will revolve around predicting significant protests on the country level and considering that country alone . That is , a significant protest is one that receives much more same day mainstream reporting than is usual for that country . So while most days a business with supply chain operations in Egypt operate under the usual volatile circumstances ( since 2011 ) of Egypt—certainly more volatile than , say , Jordan and receiving much more attention for it—they are interested in receiving advance notice of protests that are going to be larger and more dangerous than the ordinary for Egypt . The same for another milieu . At the same time , we will use past patterns from other countries to inform the prediction mechanism when making a prediction about one country . In fact , the prediction mechanism will not be knowledgeable of the particular country in question but instead just the type of country , quantified by cluster membership . In an appendix we also investigate the question of predicting protests that are significant relative to a common baseline and on the city level instead .
We restrict to a selection of 18 countries : Afghanistan , Bahrain , Egypt , Greece , India , Indonesia , Iran , Italy , Jordan , Lebanon , Libya , Nigeria , Pakistan , Saudi Arabia , Sudan , Syria , Tunisia , and Yemen . We will consider all protest event mentions in any of these countries being published any time between January 1 , 2011 and July 10 , 2013 as the event mention corpus . January 1 , 2011 up to March 5 , 2013 will serve for supervised training ( and validation by crossvalidation ) and since March 6 , 2013 up to July 10 , 2013 will serve for test and performance scoring . Let
Mcs(i , j ) =
Number of event mentions of protest in country c taking place on day j extracted from documents published on day i from sources of type s
We tabulate some totals of these numbers over the whole event mention corpus in Table 1 . For example , nearly one million mentions of a protest event in Egypt occur in the data , over a third of a million on Twitter . 4.1 The Ground Set
For each country , the protests we are interested in forecasting are those that are significant enough to garner morethan usual real time coverage in mainstream reporting for
Figure 2 : Normalized count of mainstream reports M c ( i ) in Egypt with annotations for stretches above θ = 2.875 ( red line ) . the country . That is , there is a significant protest in country c on day i if Mc,Mainstream(i , i ) is higher than usual for country c ( in an appendix we consider an absolute scale for protest significance which naturally boosts predictability ) . Since new sources are being added daily by the hundreds or thousands to the Recorded Future source bank , there is a heterogeneous upward trend in the event mention data and what is more than usual in counts changes . To remove this trend we normalize the mention counts by the average volume in the trailing three months . That is , we let cs(i , i + k ) =
M
Mcs(i , i + k ) i−1
1
|Countries|×90 c∈Countries j=i−90 Mcs(j , j + k ) where Countries is the 18 countries . Next we define the training set average of same day mainstream reporting
M c =
1
|Train| c,Mainstream(i , i )
M i∈Train where Train denotes the set of days in the training set .
Moreover , to smooth the data we consider a three day moving average . Then we say , by definition , that a significant protest in country c ( and relative to country c ) occurs during the days i − 1 , i , i + 1 if M c,Mainstream(j , j ) i+1
≥ θ c ( i ) =
M
1 3 j=i−1
M c is larger than a threshold θ . The threshold is chosen so to select only significant protests . By inspecting the data ’s correspondence to the largest protests , we set θ = 2.875 ( which is also nearly the 94th percentile of the standard exponential distribution ) . Overall across all countries considered , this resulted in 6 % of 3 day stretches to be labeled positive , distributed mostly evenly among the countries .
An example plot of M c ( i ) for Egypt is shown in Figure 2 with annotations of top mainstream news describing the protests in each stretch of above threshold days . Notable protest events provide the reader with anchor points are the 9/11 anniversary protests in 2012 ( concurrent with the Benghazi attacks ) , the late June protests leading up to the Egyptian coup d’´etat , the riots set off by soccer fan violence in early 2012 , and the riots after 30 of the fans involved were sentenced to death which also coincided with riots connected to the anniversary of the revolution in early 2013 .
4.2 Scoring Protest Predictions
We are interested in predicting on each day i whether a significant protest will occur over the next three days i+1 , i+ 2 , i + 3 based on information published on or before i . That c ( i + 2 ) ≥ θ is , on each day i we wish to predict whether M ( which depends on days i + 1 , i + 2 , i + 3 ) . We quantify the success of a predictive mechanism based on its balanced accuracy . Let Tci ∈ {0 , 1} , Pci ∈ {0 , 1} respectively denote whether a significant protest occurs in country c during the days i + 1 , i + 2 , i + 3 and whether we predict there to be one . The true positive rate ( TPR ) is the fraction of positive instances ( Tci = 1 ) correctly predicted to be positive ( Pci = 1 ) and the true negative rate ( TNR ) is the fraction of negative instances predicted negative . The balanced accuracy ( BAC ) is the unweighted average of these : BAC = ( TPR + TNR ) /2 . BAC , unlike the marginal accuracy , cannot be artificially inflated . Always predicting “ no protest ” without using any data will yield a high 94 % marginal accuracy but only 50 % balanced accuracy . In fact , a prediction without any relevant data will always yield a BAC of 50 % on average by statistical independence . 4.3 The Features
We now attempt to quantify the predictive signals we encountered anecdotally in Section 2 . These features will serve as the data based on which we make predictions .
In Section 2 we exemplified how the violence in language surrounding discussion of protest in a country can help set the context for the danger of a future protest to get out of hand . Each event mention is rated for violent language by the fraction of n grams in the corresponding fragment ( ignoring common words ) that match a phrase list . Let Total violence rating of fragments associated with event mentions of protest in country c extracted from documents published on day i from sources of type s
Vcs(i ) =
Similarly to the normalization of event mentions due to the ever growing source bank , we normalize this quantity as cs(i ) =
V
1
|Countries|×90
Vcs(i ) i−1 c∈Countries j=i−90 Vcs(j )
In addition , forward looking mentions in mainstream news and Twitter can help indicate whether a protest is planned
11 1 1112 1 111 1 122 1 123 1 124 1 125 1 126 1 127 1 128 1 129 1 1210 1 1211 1 1212 1 121 1 132 1 133 1 134 1 135 1 136 1 137 1 13"fifthdayoffightingthathasposedgreatestcrisistothecountrysincethefallofPresidentHosniMubarakinFebruary"–NYTimes11 23 11"Crowdsofseveralhundredthousandsmarkthefirstanniversaryofuprising"–CBSNews1 25 12"Thedeathtollroseto12clashessetoffbyadeadlysoccerriotafewdaysearlier"–NYTimes2 5 12"Angryprotestseruptedinsideandoutsidethecourtastheformerpresident"–CNN6 2 12"ProtestersScaleUSEmbassyWalls,TearDo(cid:45)wnAmericanFlag"–Time9 11 12"MursidefendsnewpowersamidprotestswithteargasfiredatdemonstratorsandMolotovcocktailsthrowninreturn"–BBC11 23 12"clashedwithoppositionp(cid:45)rotestersout(cid:45)sidethepres(cid:45)identialpalaceinCairo,withatleast211peopleinjured"–AlJazeera12 6 12"AtLeast30DieinEgyptianRiotsAf(cid:45)terSoccerVerdict"–NYTimes1 26 13"Egypt(cid:247)ss(cid:45)ecuritypo(cid:45)liceandpr(cid:45)otesterscl(cid:45)ash:Thou(cid:45)sandstaketothestreets"–BostonGlobe2 9 13"Egyptprot(cid:45)esterstorchpolicestationinPortSaid"–LebanonDailyStar3 2 13"Egypt'sso(cid:45)ccerriotse(cid:45)ntencespar(cid:45)ksviolence,2killed"–JapanHerald3 9 13"4DieinEgyptasUnrestSpreadsAcrossCountry","ArmyOustsEgypt'sPr(cid:45)esident","ArmyKills51"–NYTimes6 28 13,7 3 13,and7 8 13 and estimate how many might plan to attend . We have already defined Mcs(i , i+k ) which counts this data for k ≥ 1 . In order to facilitate trans country training , we normalize these features with respect to the series we would like to predict , M c,Mainstream(i , i ) . Similar to the normalization of M c ( i ) , we normalize these features by a per country con stant coefficient,M
−1
. c
For the purposes of trans country training , we hierarchically cluster the countries using Ward ’s method [ 16 ] applied with the distance between two countries c , c equal to the Kolmogorov Smirnov uniform distance between the distribution functions of the set of training values of M ignoring the time dimension . That is , d(c , c ) = c ( i)) fififififi same distribution . We construct 2|Countries| clusters
This distance is also a non parametric test statistic to test the the hypothesis that two samples were drawn from the c ( i ) ) − I(z ≥ M
,I(z ≥ M
|Train| i∈Train sup z≥0 fififififi
1 using R function hclust [ 12 ] . We include as a feature the indicator unit vector of cluster membership of the country c associated with the instance ( c , i ) . Thus the classifier does not know the particular country about which it is making a prediction , just its type as characterized by this clustering . For each instance ( c , i ) we also include as features the ten most recent days of same day reporting on protest in c , c,Mainstream(i − 9 , i − 9 ) c,Mainstream(i , i )
M
M
M c
, . . . ,
M c along with the two most recent differences of these values . We also include the violence rating in recent mainstream reporting as the cumulative partial sums of the values
V c,Mainstream(i ) c,Mainstream(i − 9 ) V
M c
, . . . ,
M c
Next we include the counts of mentions of protests said occur over the next three days , published either in mainstream news or in Twitter over the ten recent days . We incorporate this feature as the cumulative partial sums of the values cs(i − 9 , i + k ) M c
3 k=1 M cs(i , i + k ) M c
, . . . ,
3 k=1 M for s = Mainstream and s = Twitter .
When predicting farther into the future , about the three days starting with the kth day from today , we push all indexes back by k−1 days , thus excluding any future data and maintaining the same overall length of the feature vector . 4.4 The Classifier
For the prediction mechanism we employ a random forest classifier trained on all data up to March 5 , 2013 . We use the R library randomForest [ 9 ] . The parameters are left at their default values as set in the library . For example , the
Figure 3 : BAC for predicting protests by distance into the future using the random forest and the full data set ( blue and trend in dashed black ) and the data poor predict liketoday heuristic ( red ) .
Figure 4 : Achievable TPR FPR rates as we vary the classification threshold for ( left ) country level predictions with a relative significance scale and ( right ) city level predictions with an absolute significance scale . on √ defaults dictate that the forest have 500 trees each trained
#features randomly chosen features .
We tune only the threshold required for a positive prediction . If the fraction of trees in the forest voting positive is at least this threshold then a positive prediction is made , otherwise negative . We tune this by four fold cross validation over the training set using the BAC metric .
4.5 Results
We tested the trained random forest on test data March 6 , 2013 to July 10 , 2013 . The results were TPR=75.51 % and TNR=6931 % BAC , the average of these two , is 72.41 % , which constitutes a 44.8 % reduction in balanced error from having no data . In comparison , predicting for the future the situation today , simulating the data poor prediction possible when one nonetheless has information about today ’s situation ( whether from being at the location or from news ) , has TPR=27.04 % , TNR=93.74 % , and BAC=6039 %
As we attempt to predict farther into the future our predictions become noisier and closer to the no data case as the earlier data has less bearing on the far future and there are fewer reports mentioning events to occur on the days in question . In Figure 3 we plot the accuracy of making predictions farther into the future . For each k ≥ 1 we re train the random forest with the pushed back feature vectors .
As we vary the voting threshold , we can ( monotonically ) trade off true positives with true negatives . We plot the range of achievable such rates for our classifier in Figure 4 ( left ) , using the false positive rate ( FPR = 1 − TNR ) as is common by convention . The area under the curve ( AUC ) , here 78.0 % , is the probability that a random positive instance has more positive votes than a random negative instance . The fraction of trees voting positive on an instance could well serve as a risk rating . By randomizing between two thresholds , we can achieve any weighted average of the rates . The rates achievable via randomization is the convex hull of the curve in Figure 4 and has 79.2 % under it .
To show the possible breadth of this approach , we can also consider an alternative forecasting question where we instead wish to predict protests on the city level and we define significance on a global scale ( see appendix for more details ) . That is , a protest is deemed significant if it garners unusually high same day mainstream reporting relative to all cities considered . Using a global scale , the fraction of trees voting positive serves as an absolute risk rating that is comparable between cities . The predictability of positive events also increases because knowing the city alone is no longer statistically independent of there being a positive
12346810121416182022Daysforward556575Balancedaccuracy0255075100FPR255075100TPR0255075100FPR255075100TPR Morsi from power . Protests intensified and many more people died . As seen in the figure , already on June 28 when the protests had only just started , before the anniversary and before any discussion of a possibile ultimatum or coup , the prediction mechanism had already correctly declared that significant protests will go on for the weeks to come .
5 . CONCLUSIONS
We presented new findings about the power of massive online accessible public data to predict crowd behavior . With much of public discourse having at least some presence online and usually more , the wide range of public data captured by our efforts offers unparalleled insight into the futures of countries , cities , and organizations as affected by mass demonstrations and cyber campaigns ( see appendices ) . The evidence presented validates and quantifies the common intuition that data on social media ( beyond mainstream news sources ) are able to predict major events . The scope and breadth of the data offered glimpses into tweets in foreign languages and news in far places . The confluence of all this information showed trends to come far in the future . We are excited to make the data used in this study public and invite further exploration into its predictive abilities .
6 . REFERENCES
[ 1 ] Ahramorg Egypt warms up for a decisive day of anti and pro Morsi protests . Accessed : 2013 08 25 .
[ 2 ] S . Asur and B . A . Huberman . Predicting the future with social media . In WI IAT , 2010 .
[ 3 ] H . Choi and H . Varian . Predicting the present with google trends . Economic Record , 88(s1):2–9 , 2012 .
[ 4 ] Z . Da , J . Engelberg , and P . Gao . In search of attention . J .
Finance , 66(5):1461–1499 , 2011 .
[ 5 ] S . Goel , J . M . Hofman , S . Lahaie , D . M . Pennock , and
D . J . Watts . Predicting consumer behavior with web search . PNAS , 107(41):17486–17490 , 2010 .
[ 6 ] S . Gonz´alez Bail´on , J . Borge Holthoefer , A . Rivero , and
Y . Moreno . The dynamics of protest recruitment through an online network . Sci . Rep . , 1 , 2011 .
[ 7 ] D . Gruhl , L . Chavet , D . Gibson , J . Meyer , P . Pattanayak ,
A . Tomkins , and J . Zien . How to build a WebFountain : An architecture for very large scale text analytics . IBM Syst . J . , 43(1):64–77 , 2004 .
[ 8 ] D . Gruhl , R . Guha , R . Kumar , J . Novak , and A . Tomkins . The predictive power of online chatter . In SIGKDD , 2005 . [ 9 ] W . Liaw . Classification and regression by randomForest . R
News , 2(3):18–22 , 2002 .
[ 10 ] J . Nivre , J . Hall , J . Nilsson , A . Chanev , G . Eryigit , S . K¨ubler , S . Marinov , and E . Marsi . MaltParser : A language independent system for data driven dependency parsing . Nat . Lang . Eng . , 13(2):95–135 , 2007 .
[ 11 ] NYTimescom Protester Dies in Clash That Apparently
Involved Hezbollah Supporters . Accessed : 2013 08 24 .
[ 12 ] R Core Team . R : A Language and Environment for
Statistical Computing . Vienna , Austria , 2013 .
[ 13 ] K . Radinsky and E . Horvitz . Mining the web to predict future events . In WSDM , 2013 .
[ 14 ] Telegraphcouk Twitter in numbers . Accessed : 2013 08 25 . [ 15 ] TheGuardiancom John Kerry urges peace in Egypt amid anti government protests . Accessed : 2013 08 25 .
[ 16 ] J . H . Ward Jr . Hierarchical grouping to optimize an objective function . J . Am . Stat . Assoc . , 58(301):236–244 , 1963 .
Figure 5 : Predictions of protests in Egypt around the time of the coup d’´etat . Yellow to red mark positive predictions and blue to purple negative , with redder colors indicating more positive votes in the forest . event ( for example , 23 % of positive training instances are in Cairo ) . The further localized data also improves predictability . On the test data , the random forest yields TPR=84.7 % , TNR=85.7 % , BAC=852 % The achievable rates as the voting threshold is varied are shown in Figure 4 ( right ) with AUC=91.3 % and 91.9 % for the convex hull . 4.6 The Case of the Egyptian Coup d’État
To exemplify the prediction mechanism we consider the case of the 2013 coup d’´etat in Egypt and the protests surrounding it . Figure 5 depicts the predictions made on different days about different days in the relative future .
As can be seen , the days around June 30 were predicted positive with very high certainty for a long time prior , the date ranges in 6/28–7/2 being consistently predicted positive since June 6 , three weeks beforehand ( since June 16 onward shown in figure ) . Indeed , with a lot of discontent with and talk of demonstration against President Morsi ’s rule , many protests were anticipated for the weekend of June 30 , the anniversary of Morsi ’s rise to the presidency . Even US Secretary of State John Kerry made a statement in anticipation of protests asking for peaceful and responsible demonstration on , as he says , Saturday ( June 29 ) and Sunday ( June 30 ) [ 15 ] . Therefore , those days were long predicted positive with high certainty . However , already on June 28 spontaneous “ warm up ” protests burst in the streets [ 1 ] . The first range to include June 28 was predicted with less certainty , especially from farther back , but was correctly predicted starting June 10 except on June 16 when it was mistakenly reported negative , just slightly below the threshold .
As we now know the protests around the anniversary indeed grew very large with many injured and dead in clashes with police and demonstrators from opposite camps . The protests did continue and on July 1 the Egyptian army issued an ultimatum to Morsi to resolve the protests within 48 hours or the army would intervene . On July 3 the Egyptian army led by General Abdul Fatah al Sisi removed President
6 17–6 196 18–6 206 19–6 216 20–6 226 21–6 236 22–6 246 23–6 256 24–6 266 25–6 276 26–6 286 27–6 296 28–6 306 29–7 16 30–7 27 1–7 37 2–7 47 3–7 57 4–7 67 5–7 77 6–7 87 7–7 97 8–7 10765432July13029282726252423222120191817June16DatesofprotestsinquestionDatepredictionismade 7 . APPENDIX : PREDICTING PROTESTS ON
THE CITY LEVEL
This appendix provides further detail on the prediction of protests on the city level and on a common scale of protest significance . From within the countries considered previously , we choose the top cities by number of mentions of protest events . These 37 cities are Jalalabad , Kabul , and Kandahar in Afghanistan ; Manama in Bahrain ; Alexandria , Cairo , Port Said , and Tanta in Egypt ; Athens in Greece ; Hyderabad , Mumbai , and New Delhi in India ; Jakarta in Indonesia ; Tehran in Iran ; Milan and Rome in Italy ; Amman in Jordan ; Beirut and Sidon in Lebanon ; Benghazi and Tripoli in Libya ; Abuja and Lagos in Nigeria ; Islamabad , Karachi , Lahore , Peshawar , and Quetta in Pakistan ; Qatif and Riyadh in Saudi Arabia ; Khartoum in Sudan ; Aleppo , Damascus , Deraa , Hama , and Homs in Syria ; Tunis in Tunisia ; and Sana’a and Taiz in Yemen . We consider the same time range and the same train test split . We define M and V as before but for these cities . Since we are interested in an absolute level of significance we no longer normalize with respect to the entity , only with respect to the cross entity average trailing volume . Thus , while overall still only 6 % of instances are labeled positives , Cairo takes up 23 % of positive training instances and 40 % of positive test instances , while Khartoum takes up 1 % of positive train instances and has no positive test instances . Nonetheless , as before , cities are clustered according to their set of M training values and the classifier is not knowledgeable of the particular city in question , just its cluster membership . We use as features the unnormalized violence rating of past ten days of mainstream reporting about the city , same day mainstream reporting level of past ten days , and the forward looking mainstream reporting and Twitter discussion of past ten days . In addition , we include the unnormalized features of the containing country .
A random forest classifier is trained with the voting fraction threshold tuned by four fold cross validation to maximize balanced accuracy . Any other parameters were set to their defaults as before . Testing on March 6 , 2013 to July 10 , 2013 , we get a true positive rate of 84.7 % and a true negative rate of 85.7 % yielding a balanced accuracy of 852 % The achievable rates as the voting fraction threshold is varied are shown in Figure 4 ( right ) . The area under the ROC curve ( AUC ) is 91.3 % and the area under its convex hull is 919 %
8 . APPENDIX : PREDICTING CYBER ATTACKS BY SEQUENCE MINING WITH NAÏVE BAYES
In this appendix we expand our scope and consider all event types recorded . There are 112 distinct event types in the data ranging from protest to company acquisition to cyber attack to music album release to voting result . We wish to be able to predict unusually high numbers of mentions of a particular type of event involving a particular entity . Here we focus on cyber attacks . However , there are varying levels of “ clumpiness ” for the many classes of events and entities in terms of how and for how long a real world event is discussed online . In addition , it is often hard to hypothesize a priori what predictive signals may exist . Therefore , in order to tackle this forecasting problem we would need to spread a wider net and consider all event interactions and at the same time allow for more smoothing . We will therefore consider events on the week level for a given entity n∗ ( which could be a country , a person , an organization , a product , among many other things ) and use events mentioning that entity to forecast the level of mentions of an event type of interest involving that entity next week . Let
Mn∗es(i , j ) =
Number of event mentions of type e involv∗ ing entity n taking place on week j extracted from documents published on week i from sources of type s
Here we will consider source types Any , Mainstream , Social Media , and Blog . As before , we normalize this number with respect to the total event mention volume in the past 12 weeks ( approximately three months , as before ) in order to de trend it as follows n∗es(i , i + k ) =
M i−1
Mn∗es(i , i + k ) e∈EventTypes j=i−12 Mn∗es(i , i + k )
This is the data we will feed to our prediction algorithm . We will consider both the mentioning over the past weeks of events taking place in that same week as well as any forwardlooking mentions on a past week of events to take place next week , the week in question . As before , we will also consider the case where we must predict farther into the future , about the week after next or the one after that etc .
We will consider data starting from the first week of 2011 and up to the last week of July 2013 . We will test our mechanism on April 2012 onward , training on the trailing two years ( as available ) . Any cross validation is done on 2011 up to March 2012 .
8.1 The Ground Set
Along with an entity of interest n∗ , let us fix an event type of interest e∗ and a source type of interest s∗ . Because we believe our data is particularly useful in predicting crowd behavior we will choose e∗ accordingly . Here we will be interested in predicting politically motivated cyber campaigns so we fix e∗ = CyberAttack . We label as positive weeks that included cyber attack campaigns that were so impactful to generate wide attention all over with same week mentions of cyber attack events . Therefore we fix s∗ = Any . We will consider n∗ that are both country target entities ( such as Israel ) and hacktivist attacker entities ( such as Anonymous ) . We also fix a threshold θ and we will wish to predict on week i whether n∗e∗s∗ ( i+ , i+ ) ≥ θ
M
We fix θ so that 15 % of weeks are positive .
As before , we will use balanced accuracy to score our pre dictive mechanism and to tune parameters by cross validation .
8.2 High Dimensional Sequence Mining with
Naïve Bayes
Let Ti = 1 denote the positivity of the prediction instance on week i
Ti = 1 : M n∗e∗s∗ ( i + 1 , i + 1 ) ≥ θ
We seek to estimate the conditional probability density con ditioned on the past weeks
Ti = t
P fifififififififi n∗es(i − k , i + 1 ) n∗es(i − k , i − k ) , M M for e ∈ EventTypes , s ∈ SourceTypes , k = 0 , . . . , − 1

( 1 ) for t = 0 or 1 . We use = 5 here .
We first bin the values of M
That estimate this , we seek to find the patterns of event sequences that end with our target event . Sequence mining is the discovery of commonly repeating sequences in a string over an alphabet Σ . In bioinformatics , sequence mining is applied to DNA sequences ( Σ = {A , C , G , T} ) and to amino acid sequences constituting a protein ( |Σ| = 20 ) to find common sequences of some length . For longer strings the frequency of appearing in nature is highly concentrated . n∗es(i , i + k ) into quartiles of their marginal distribution over the training data . The resulting alphabet Σ is of size 42××|SourceTypes|×|EventTypes| , much larger than the training data set so that the probability function is underspecified ( high dimensional setting ) . At the same time , the amount of information in the training data is also quite massive . So we require a method that can smooth the density to avoid overfitting and , at the same time , tractable over a large data set .
One solution to this problem is to apply what is known as the na¨ıve assumption to our likelihood function ( 1 ) . Let F , F ∈ {1 , 2 , 3 , 4} ( indicating the binned quartile ) be any two different features of the past in the conditioning in ( 1 ) . Then we make the following assumption :
Conditioned on Ti , F and F are statistically independent .
This is of course very different from assuming marginal independence . For example under the assumption , discussion of protests or of military actions in Israel in mainstream news could very often coincide with a discussion on Twitter of a planned future cyber attack against Israel because a possible future cyber attack is often a response to the former ; but given that a cyber attack against Israel does occur next week , we assume the former two must occur independently from one another . n∗es(i − k , i − k ) and M
By Bayes’ theorem we may decompose the probability function to a product of P ( Ti = t ) and the conditional probn∗es(i − k , i + 1 ) given abilities of M Ti = t . Estimating instead the marginal distribution of T and the conditional distributions of M by maximum likelihood ( counting co occurrences in training data ) results in the well known na¨ıve Bayes probability estimator . This reduces the variance of the density estimator but introduces bias whenever the na¨ıve assumption does not hold exactly . To further relieve issues of the sparsity of positives in our data , instead of estimating the conditional probabilities by maximum likelihood , we take a Bayesian approach and assume a Dirichlet prior with symmetric concentration parameter α . The prior is our probabilistic belief about the value of
Figure 6 : In dark blue , the balanced accuracy of predicting cyber attacks against Israel by distance into the future .
BAC Targets 68.9 % Anonymous Israel 65.4 % AnonGhost Germany South Korea 63.1 % LulzSec United Kingdom 65.5 % Guccifer
Perpetrators BAC 70.3 % 70.8 % 60.6 % 66.7 %
Table 2 : Accuracy of predicting cyber attacks against and by a selection of entities . these conditional probabilities in the absence of data . Being the conjugate prior to the categorical distribution , a Dirichlet law will also be the distribution for the posterior distribution . Estimating the parameters by maximum a posteriori likelihood is then equivalent to estimating the probabilities by counting frequencies from the data and padding these counts each by α . We estimate the marginal P ( Ti = 1 ) using maximum likelihood because that estimation is not plagued by sparsity .
Estimating the conditional probabilities thus is then done simply by counting data which can be done exceedingly fast . For each event , source , and look back k , one simply counts occurrences in bins of the feature and keeps such tallies separately for when k + 1 weeks forward ( only if within the training data ) has been positive or negative . The computation involved in this procedure scales as the product of the length of the data and the number of features . To make a prediction we check whether ( 1 ) ≥ p∗ for a chosen threshold p∗ . Due to the bias introduced by making the na¨ıve assumption , we select p∗ by four fold cross validation on the training data ( up to March 2012 ) to maximize balanced accuracy . 8.3 Results
We first apply this method to predicting cyber campaigns against Israel . For reference , most of these are perpetrated by groups AnonGhost and Anonymous under the banner of #OpIsrael . Testing on April 2012 to July 2013 , we get a true positive rate of 70.0 % and a true negative rate of 67.8 % giving a balanced accuracy of 689 % Our accuracy diminishes as we try to predict farther into the future , as depicted in Figure 6 .
By inspecting the trained conditional probabilities we can see which were the most impactful features to sway our belief one way or the other . In this case , swaying our belief most toward predicting positively were if many blog and mainstream mentions of cyber attack appeared in recent weeks and if many social media mentions of protest in Israel appeared in recent weeks as well as forward looking mentions on social media of a protest in the week to come .
We apply the same method to predicting attacks against three other country entities and to predicting campaigns perpetrated by a selection of four hacktivist groups . The results are reported in Table 2 .
Where hacktivism campaigns are often reactions to developments that do not necessarily at first involve the hacktivist organization , incorporating in some way event mentions involving other entities could boost performance . However , it is not immediately clear how to do so without introducing too many redundant and obfuscating features that will result in overfitting and poor out of sample accuracy . Using abstractions as in [ 13 ] is one possible way to improve this method .
12345678Weeksforward506070Balancedaccuracy
