Hybrid Keyword Search Auctions
Department of Management Sci . and Engg .
Department of Computer Science
† Kamesh Munagala
Duke University kamesh@csdukeedu
Ashish Goel
∗
Stanford University ashishg@stanford.edu
ABSTRACT Search auctions have become a dominant source of revenue generation on the Internet . Such auctions have typically used per click bidding and pricing . We propose the use of hybrid auctions where an advertiser can make a per impression as well as a per click bid , and the auctioneer then chooses one of the two as the pricing mechanism . We assume that the advertiser and the auctioneer both have separate beliefs ( called priors ) on the click probability of an advertisement . We first prove that the hybrid auction is truthful , assuming that the advertisers are risk neutral . We then show that this auction is superior to the existing per click auction in multiple ways :
1 . We show that risk seeking advertisers will choose only a per impression bid whereas risk averse advertisers will choose only a per click bid , and argue that both kind of advertisers arise naturally . Hence , the ability to bid in a hybrid fashion is important to account for the risk characteristics of the advertisers .
2 . For obscure keywords , the auctioneer is unlikely to have a very sharp prior on the click probabilities . In such situations , we show that having the extra information from the advertisers in the form of a perimpression bid can result in significantly higher revenue .
3 . An advertiser who believes that its click probability is much higher than the auctioneer ’s estimate can use per impression bids to correct the auctioneer ’s prior without incurring any extra cost .
4 . The hybrid auction can allow the advertiser and auctioneer to implement complex dynamic programming strategies to deal with the uncertainty in the clickprobability using the same basic auction . The per click and per impression bidding schemes can only be used to implement two extreme cases of these strategies .
∗Research supported in part by NSF ITR grant 0428868 , †Research supported by NSF via a CAREER award and by gifts from Google , Microsoft , and Cisco , and by the Stanford KAUST alliance . grant CNS 0540347 .
Copyright is held by the International World Wide Web Conference Committee ( IW3C2 ) . Distribution of these papers is limited to classroom use , and personal use by others . WWW 2009 , April 20–24 , 2009 , Madrid , Spain . ACM 978 1 60558 487 4/09/04 .
As Internet commerce matures , we need more sophisticated pricing models to exploit all the information held by each of the participants . We believe that hybrid auctions could be an important step in this direction . The hybrid auction easily extends to multiple slots , and is also applicable to scenarios where the hybrid bidding is per impression and per action ( ie CPM and CPA ) , or per click and per action ( ie CPC and CPA ) .
Categories and Subject Descriptors F22 [ Analysis of Algorithms and Problem Complexity ] : Nonnumerical Algorithms and Problems ; J.4 [ Social and Behavioral Sciences ] : Economics
General Terms Algorithms , Economics , Theory
Keywords Keyword auctions , Mechanism Design , Internet
1 .
INTRODUCTION
While search engines had a transformational effect on Internet use and indeed , on human interaction , it was only with the advent of keyword auctions that these search engines became commercially viable . Most of the major search engines display advertisements along with search results ; the revenue from these advertisements drives much of the innovation that occurs in search in particular , and Internet applications in general . Cost per click ( CPC ) auctions have evolved to be the dominant means by which such advertisements are sold [ 11 ] . An advertiser places a bid on a specific keyword or keyword group . The auctioneer ( ie the search engine ) maintains an estimate of the click through probability ( CTR ) of each advertiser for each keyword . When a user searches for a keyword , the first advertising spot is sold to the advertiser which has the highest product of the bid and the CTR ; in the event that this advertisement is clicked upon by the user , this advertiser is charged the minimum bid it would have to make to retain its position . The same process is repeated for the next slot , and so on . A full description of the tremendous amount of work related to keyword auctions is beyond the scope of this paper ; the reader is referred to the excellent survey by Lahaie et al [ 6 ] . Two other alternatives to CPC auctions are widely used :
1 . CPM , or Cost Per ( thousand ) Impressions : The publisher charges the advertiser for every instance of an
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search221 advertisement shown to a user , regardless of the click . This is widely used to sell banner advertisements .
2 . CPA , or Cost Per Action ( also known as Cost Per Acquisition ) : The publisher charges the advertiser when an actual sale happens . This is widely used in associate programs such as the ones run by Amazon , and by lead generation intermediaries .
The three models are equivalent when precise estimates of the click through probability and click to sale conversion probability are known . In the absence of such estimates , CPC has emerged as a good way of informally dividing the risk between the auctioneer and the advertiser : the auctioneer is vulnerable only to uncertainty in its own estimates of CTR , whereas the advertiser is vulnerable only to uncertainty in its own estimates of the click to sale conversion probability , assuming its advertisement gets displayed in a favorable spot . A great deal of effort has gone into obtaining good predictions of the CTR . The problem is made harder by the fact that many keywords are searched for only a few times , and typical CTRs are low . Advertisers often want to also bid by customer demographics , which further exacerbates the sparsity of the data . Hence , there has to be a great reliance on predictive models of user behavior and new ads ( eg see [ 10] ) . Arguably , another approach would to devise pricing models that explicitly take the uncertainty of the CTR estimates into account , and allow advertisers and auctioneers to jointly optimize over this uncertainty . In general , we believe that as Internet commerce matures , we need not just better estimation and learning algorithms but also more sophisticated pricing models to exploit all the information held by each of the participants .
In this paper , we propose the use of hybrid auctions for search keywords where an advertiser can make a per impression as well as a per click bid , and the auctioneer then chooses one of the two as the pricing mechanism . Informally , the per impression bids can be thought of as an additional signal which indicates the advertiser ’s belief of the CTR . This signal may be quite valuable when the keyword is obscure , when the advertiser is aggregating data from multiple publishers or has a good predictive model based on domain knowledge , and when the advertiser is willing to pay a higher amount in order to perform internal experiments/keywordselection . We assume that the advertiser and the auctioneer both have separate beliefs ( called priors ) on the clickprobability of an advertisement . 1.1 Our results
We describe the hybrid auction in section 2 , where we also outline the strategic model ( that of discounted rewards ) used by the auctioneer and the advertiser . We introduce the multi armed bandit problem as it occurs naturally in this context . Our results , which we have already described at a high level in the abstract , are split into two parts .
Myopic advertisers . We first study ( section 3 ) the case of myopic advertisers , which only optimize the expected profit at the current step . When these advertisers are risk neutral , we show that truth telling is a strongly dominant strategy : the advertiser bids the expected profit from an impression as a per impression bid , and the value it expects from a click as the per click bid , regardless of the auctioneer ’s prior or optimization strategy . Further , if the advertiser is certain about its CTR , and if this CTR is drawn from the auctioneer ’s prior which follows the natural Beta distribution ( defined later ) , then the worst case loss in revenue of the auctioneer over pure per click bidding is at most 1/e ≈ 37 % . In contrast , the revenue loss for the auctioneer when he uses the per click scheme as opposed to the hybrid auction can approach 100 % for a fairly natural scenario , one that corresponds to obscure keywords . We finally consider risk taking behavior of the advertisers when they are not certain about their CTR . We show that per click bidding is dominant when the advertisers are risk averse , but per impression bidding is desirable when they are risk seeking . Thus , the hybrid auction
1 . Naturally extends the truthfulness of the single slot per click bidding auctions currently in use , for the case of myopic , risk neutral advertisers ( which is the situation under which the properties of the per click auction are typically analyzed [ 11 , 4 , 1 , 8] ) .
2 . Results in bounded possible revenue loss but unbounded possible revenue gain for the auctioneer in the natural setting of risk neutral , myopic advertisers , and where the auctioneer uses the Gittins index . The revenue gain occurs in the common setting of obscure keywords .
3 . Naturally takes the risk posture of the advertiser into account , which neither per click nor per impression bidding could have done on its own ( both risk averse and risk seeking advertisers occur naturally ) .
The result bounding the possible revenue loss of the auctioneer under the hybrid auction is for an arbitrary discount factor used by the auctioneer ; the results about the possible revenue gain and the risk posture assume a myopic auctioneer . We believe these are the most appropriate assumptions , since we want to provide bounds on the revenue loss using hybrid auctions under the most general scenario , and want to illustrate the benefits of using the hybrid auction under natural , non pathological scenarios .
Semi myopic advertisers . In section 4 , we remove the assumption that the advertisers are only optimizing some function of the profit at the current step . We generalize to the case where the advertisers optimize revenue over a timehorizon . We develop a tractable model for the advertisers , and show a simple dominant strategy for the advertisers , based on what we call the bidding index . Though this strategy does not have a closed form in general , we show that in many natural cases ( detailed later ) , it reduces to a natural pure per click or pure per impression strategy that is socially optimal . Thus , our hybrid auctions are flexible enough to allow the auctioneer and the advertiser to implement complex dynamic programming strategies collaboratively , under a wide range of scenarios . Neither per impression nor perclick bidding can exhaustively mimic the bidding index in these natural scenarios .
Finally , we show a simple bidding strategy for a certain ( ie well informed ) advertiser to make the auctioneer ’s prior converge to the true CTR , while incurring no extra cost for the advertiser ; per click bidding would have resulted in the advertiser incurring a large cost . This is our final argument in support of hybrid auctions , and may be the most convincing from an advertiser ’s point of view .
We explain throughout the paper why the scenarios we consider are not arbitrarily chosen , but are quite natural
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search222 ( indeed , we believe the most natural ones ) to analyze . In the process , we obtain many interesting properties of the hybrid auction , which are described in the technical sections once we have the benefit of additional notation .
Multiple Slots . The main focus of the paper is analyzing the properties of the hybrid scheme on a single ad slot . However , the auction itself can be easily generalized to multiple slots in two different ways ; before describing these , we need to note that the hybrid auction assigns an “ effective bid ” to each advertiser based on the per impression bid , the per click bid , and the expected CTR or quality measure . The first generalization is akin to the widely used generalized second price auction [ 4 , 11 ] ( also referred to as the “ next price ” auction [ 1 ] ) for CPC only bidding : the advertisers are ranked in decreasing order of effective bids , and the “ effective charge ” made to each advertiser is the effective bid of the next advertiser . We do not discuss this variant in the rest of this paper , since the computation methodology is no different from single slot auctions . Note that we can not expect this multi slot generalization of the hybrid auction to be truthful because even the CPC only next price auction is not truthful [ 11 , 4 , 1 ] . However , given the immense popularity of the next price auction , we believe that this generalization of the hybrid auction is the most likely to be used in real life settings .
The second generalization mirrors VCG [ 4 ] ( or equivalently , a laddered CPC auction [ 1] ) . This generalization assumes that the CTR is multiplicatively separable into a position dependent term and an advertiser dependent term , and under this assumption , guarantees truthfulness ( on both the per impression and per click bids ) for myopic , risk neutral advertisers . Details of this auction are in section 6 . The proof follows by extending the proof of theorem 3.1 exactly along the lines of [ 1 ] and is omitted .
The hybrid auction is also applicable to scenarios where the hybrid bidding is per impression and per action ( ie CPM and CPA ) , or per click and per action ( ie CPC and CPA ) .
2 . THE HYBRID AUCTION SCHEME
As mentioned before , we will assume that there is a single slot that is being auctioned . There are n advertisers interested in a single keyword . When an advertiser j arrives at time t = 0 , it submits a bid ( mjt , cjt ) to the advertiser at time slot t ≥ 1 . The interpretation of this bid is that the advertiser is willing to pay at most mjt per impression or at most cjt per click . These values are possibly conditioned on the outcomes at the previous time slots . The auctioneer chooses a publicly known value1 qjt which we term the auctioneer index , which can possibly depend on the outcomes for this advertiser at the previous time slots when its advertisement was shown , but is independent of all the bids .
The Hybrid auction scheme mimics VCG on the quantity Rjt = max(mjt , cjtqjt ) . We will call Rjt the effective bid of user j at time t . Let j∗ denote the advertiser with highest Rj value , and R−j∗ denote the second highest Rj . There are two cases . First , suppose mj∗ > cj∗ qj∗ , then j∗ gets the slot at per impression price R−j∗ . In the other case , j∗ gets R−j∗ qj∗ . It is clear that the Hybrid the slot at per click price 1It is conceivable that an auctioneer may strategically decide to not reveal its true prior ; this would be an interesting direction to consider in future work . scheme is feasible , since the per impression price charged to j is at most mj , and the per click price is at most cj . The auction generalizes in a natural way to multiple slots , but we will focus on the single slot case in this paper . If the auctioneer chooses qj,t to be an estimate of the click through rate ( CTR ) and the advertiser submits only a per click bid , then this reduces to the traditional next price auction currently in use .
In order to analyze properties of the Hybrid auction , we need to make modeling assumptions about the advertiser , about the auctioneer index q , and about time durations . 2.1 Time Horizon and the Discount Factor
To model the time scale over which the auction is run , we assume there is a global discount factor γ . Informally , this corresponds to the present value of revenue/profit/cost that will be realized in the next step , and is an essential parameter in determining the correct tradeoff between maximizing present expected reward ( exploitation ) vs . obtaining more information with a view towards improving future rewards ( exploration ) . The expected revenue at time step t gets multiplied by a factor of γt . Note that γ = 0 corresponds to optimizing for the current step ( the myopic case ) . In the discussion below , we assume the auctioneer and advertiser behave strategically in optimizing their own revenues , and can compute parameters and bids based on their own discount factors which could be different from the global discount factor γ used for discussing social optimality . 2.2 Auctioneer Model and the Gittins Index For the purpose of designing an auctioneer index qjt , we assume the auctioneer starts with a prior distribution Qj on the CTR of advertiser j . We assume further that he announces this publicly , so that the advertiser is aware of this distribution . Therefore , the a priori expected value of the CTR of advertiser i from the point of view of the auctioneer is E[Qj ] . Suppose at some time instant t , Tjt impressions have been offered to advertiser j , and njt clicks have been observed . The natural posterior distribution Qjt for the advertiser is given by :
Pr[Qjt = x ] ∝ xnjt ( 1 − x)Tjt−njt · Pr[Qj = x ] ; this corresponds to Bayesian updates , and when initialized with the uniform continuous prior , corresponds to the natural Beta distribution , defined later . The auctioneer chooses a function f ( Qjt ) that maps a posterior distribution Qjt to a q value .
The function f is chosen based on the revenue guarantees the auctioneer desires . We will use the following idealized scenario to illustrate a concrete choice of f ; our results apply broadly and are not limited to the scenario we describe . Suppose the auctioneer wishes to optimize over a time horizon given by discount factor γa . Then , if the auctioneer were to ignore the per impression bids , and uses a first price auction on cjqjt assuming that cj is the true per click valuation , then his choice of qjt should maximize his expected discounted revenue . Let vj denote the true per click valuation of the advertiser . By assumption , vj = cj . At time t , the auctioneer offers the slot to the bidder j∗ with highest vjqjt at per click price vj∗ , earning vj∗ E[Qjt ] in expectation . It is well known that the discounted reward of this scheme is maximized when qjt is set to the Gittins index ( described next ) of Qjt with discount factor γa , and hence
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search223 setting f ( Qjt ) = the Gittins index of Qj,t would be a natural choice . The Gittins index [ 5 , 12 ] of a distribution Q for discount factor γa is defined as follows : Consider a coin with this prior distribution on probability of heads Q , and that yields reward 1 on heads . The Gittins index is ( 1− γ)M , where M is the largest number satisfying the following condition : Some optimal discounted reward tossing policy that is allowed to retire at any time point and collect a retirement reward of M will toss the coin at least once . It is well known that the Gittins index is at least the mean E[Q ] of the prior , and for a given mean , the Gittins index increases with the variance of the prior , taking the lowest value equal to the mean only when the prior has zero variance . Further , the Gittins index also increases with the discount factor γa , being equal to the mean when γa = 0 . An equivalent definition will be useful : Consider a coin with the prior distribution on probability of heads Qj,t that yields reward 1 on heads . Suppose the coin is charged G amount whenever it is tossed , but is allowed to retire anytime . The Gittins index is the largest G for which the expected discounted difference between the reward from tossing minus the amount charged in the optimal tossing policy is non negative2 . Typically , the distribution Q is set to be the conjugate of the Bernoulli distribution , called the Beta distribution [ 5 ] . The distribution Beta(α , β ) corresponds to starting with a uniform distribution over the CTR and observing α−1 clicks in α + β − 2 impressions . Therefore , if the initial prior is Beta(α , β ) , and n clicks are then observed in T impressions , the posterior distribution is Beta(α+n , β+T −n ) . Beta(1 , 1 ) corresponds to the uniform distribution . Beta distributions are widely used mainly because they are easy to update . However , unless otherwise stated , our results will not depend on the distribution Q being a Beta distribution . 2.3 Advertiser Model
The value bid by the advertisers will depend on their optimization criteria . The true per click value of advertiser j is vj . The advertiser j maintains a time indexed distribution Pjt over the possible values of the actual CTR p that is updated whenever he receives an impression . We assume advertiser j ’s prior is updated based on the observed clicks in a fashion similar to the auctioneer ’s prior , but again , this is not essential to our results except where specifically mentioned .
The advertiser ’s bid will depend on its optimization criteria . In the next section , we consider the case where the advertisers only optimize their revenue at the current step , and could possibly take risk . In later sections , we consider the case where the advertisers attempt to optimize long term revenue by bidding strategically over time . In each case , the advertiser could be well informed ( or certain ) about its CTR , so that Pjt is a point distribution , or uninformed about its CTR , so that it trusts the auctioneer ’s prior , ie , Pjt = Qjt , or somewhere in between . Depending on the optimization criterion of the advertiser , these cases lead to different revenue properties for the auctioneer and advertiser , and show the advantages of the Hybrid scheme over pure per click bidding and pure per impression bidding . 2The Gittins index is usually defined as M ( ie , G/(1 − γ ) ) but the alternate definition ( 1 − γ)M ( ie , G ) is more convenient for this paper .
3 . MYOPIC ADVERTISERS
In this section , we analyze single time step properties of the auction . Specifically , we assume that the advertisers are myopic , meaning that they optimize some function of the revenue at the current time step .
Since we consider myopic properties , we drop the subscript t denoting the time step from this section . The auctioneer ’s prior is therefore Qj , and the advertiser ’s prior is Pj . Let pj = E[Pj ] .
We first show that when the advertisers are risk neutral , then bidding ( vjpj , vj ) is the dominant strategy , independent of the auctioneer ’s prior or the choice of f . Further , if the advertiser is certain about its CTR , and if this CTR is drawn from the auctioneer ’s prior which follows a Beta distribution , then the worst case loss in revenue of the auctioneer over pure per click bidding is at most 1/e ≈ 37 % . In contrast , the revenue loss for the auctioneer when he uses the per click scheme as opposed to the hybrid auction can approach 100 % for a fairly natural scenario , one that corresponds to obscure keywords . We finally consider risk taking behavior of the advertisers when they are not certain about their CTR . We show that per click bidding is dominant when the advertisers are risk averse , but per impression bidding is desirable when they are risk seeking . Thus , the hybrid auction naturally extends the truthfulness of the single slot perclick bidding auctions currently in use , results in bounded possible revenue loss but unbounded possible revenue gain , and naturally takes the risk posture of the advertiser into account ; the precise qualitative conclusions are detailed in the introduction and the formal statements are proved below .
The result bounding the possible revenue loss of the auctioneer under the hybrid auction is for an arbitrary discount factor used by the auctioneer ; the results about the possible revenue gain and the risk posture assume a myopic auctioneer . We believe these are the most appropriate assumptions , since we want to provide bounds on the revenue loss using hybrid auctions under the most general scenario , and want to illustrate the benefits of using the hybrid auction under natural , non pathological scenarios . 3.1 Truthfulness
We first show that the dominant strategy involves truthfully revealing the expected CTR , pj . Recall that the advertiser bids ( mj , cj ) . Further , the auctioneer computes an index qj based on the distribution Qj , and does VCG on the quantity Rj = max(mj , cjqj ) .
Theorem 31 If pj = E[Pj ] and the advertiser is myopic and risk neutral , then regardless of the choice of qj , the ( strongly ) dominant strategy is to bid ( vjpj , vj ) .
Proof . First , consider the case where qj ≤ pj . Suppose the advertiser bids ( mj , cj ) and wins the auction . Then , the expected profit of this advertiser is at most pjvj−min{R−j∗ , R−j∗· ( pj/qj)} which is at most pjvj − R−j∗ . Thus , the maximum profit of the advertiser can be at most max{0 , pjvj − R−j∗} which is obtained by bidding ( pjvj , vj ) .
Next , consider the case where qj > pj . Suppose the advertiser bids ( mj , cj ) and wins the auction . Then , the expected profit of this advertiser is at most pjvj − min{R−j∗ , R−j∗ · ( pj/qj)} which is at most pjvj − R−j∗ · ( pj/qj ) . Thus , the maximum profit of the advertiser can be at most max{0 , pjvj− R−j∗·(pj/qj)} which is again obtained by bidding ( pjvj , vj ) . Thus , it is never suboptimal to bid truthfully . Let R∗
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search224 denote the second highest value of max(mj , cjqj ) . In order to show that ( pjvj , vj ) is a ( strongly ) dominant strategy , we need to show that for any other bid pair ( mj , cj ) , there exist values of qj , R∗ such that the profit obtained by bidding ( mj , cj ) is strictly less than that obtained by truthful bids . Suppose is an arbitrary small but positive number . First consider the scenario where qj = pj , ie , the auctioneer has a perfect prior . In this scenario , bidding ( mj , cj ) with either mj > pjvj + or cj > vj + /pj results in a negative profit when pjvj < R∗ < pjvj + ; truthful bidding would have resulted in zero profit . Further , if mj < pjvj − and cj < vj − /pj , then the advertiser obtains zero profit in the case where pjvj > R∗ > pjvj − ; truthful bidding would have obtained positive profit .
This leaves the cases where mj = pjvj , cj < vj/(1 + ) or where mj < pjvj/(1 + ) , cj = vj . In the former case , the advertiser obtains zero profit in the situation where qj > pj > qj/(1 + ) and R∗ = pjvj ; truthful bidding would have obtained positive profit . In the latter case , the advertiser obtains zero profit when qj < pj/(1 + ) and R∗ = pjvj/(1 + ) ; truthful bidding would have obtained positive profit . 3.2 Well Informed Advertisers : Loss in Auc tioneer ’s Revenue
We now consider the case where the advertisers are certain about their CTR pj and risk neutral ; by the results of the previous section , we will assume that they bid truthfully . More formally , we assume the prior Pj is the point distribution at pj . We suppose that the pj are drawn from the auctioneer ’s prior that is of the form Qj = Beta(αj , βj ) . We now show that for qj being the Gittins index of Beta(αj , βj ) for any discount factor γa , the expected revenue of the auctioneer at the current step is at least 1 − 1/e times the revenue had he ignored the per impression bids .
Theorem 32 In the above mentioned scenario , the expected revenue of the auctioneer at the current step is at least 1 − 1/e ≈ 63 % of the corresponding auction that ignores the per impression bid .
Proof . Let qj denote the Gittins index of Qj =Beta(αj , βj ) .
. q1 h
“
” i
Let advertiser 1 have the highest vjqj , and advertiser 2 the next highest . Let R∗ = v2q2 . If the per impression bids are ignored , advertiser 1 gets the impression at a per click price of v2q2/q1 , so that the expected revenue is R∗ E[Q1 ] In the Hybrid scheme , v1q1 and v2q2 are both at least as large as R∗ . Hence , if the auctioneer makes a per impression charge , then this charge must be at least R∗ per impression . If the advertiser makes a per click charge ( which must be to advertiser 1 ) , then the expected revenue is at least R∗Q1/q1 . Hence the expected revenue of the Hybrid scheme is at least R∗E and the ratio of the revenue of the Hybrid scheme to the per click scheme is at least E[min(q1,Q1 ) ] . For p drawn from the distribution Q1 , we now need to ≥ 1 − 1/e . To show this , observe show that E[min(q1,Q1 ) ] that for a fixed Q1 , this ratio is smallest when q1 is as small as possible . This implies we should choose q1 = E[Q1 ] = α α+β , which corresponds to a discount factor of 0 . Denote µ = E[Q1 ] . Then , the goal is to minimize the ratio µ E[min(µ,Q1 ) ] as a function of α , β . Lemma 3.3 shows that this ratio is 1 − 1/e , completing the proof .
E[Q1 ]
E[Q1 ]
Q1 q1 min
1 ,
1
Lemma 33 If w is drawn from the Beta distribution with parameters α , β ≥ 1 , and µ = α/(α + β ) is the mean of w , then E[min(µ , w ) ] ≥ µ(1 − 1/e ) .
α+β−θ = µ , which is the same as the mean of w .
Proof . We will allow α , β to take on fractional values as long as they are both at least 1 . Suppose α , β are both strictly bigger than 1 . Let z denote the random variable drawn from the Beta distribution with parameters α0 = α− µθ , β0 = β − ( 1 − µ)θ , where θ > 0 is chosen such that α0 , β0 ≥ 1 and at least one of α0 , β0 is exactly 1 . The mean of z is α−µθ Let fw , fz denote the probability density functions of w , z respectively , and let Fw(x ) ( resp . Fz(x ) ) denote Pr[w ≥ x ] ( resp . Pr[z ≥ x] ) . Consider the ratio r(x ) = fw(x)/fz(x ) = φxµθ(1 − x)(1−µ)θ , where φ is the ratio of the corresponding normalizing terms and hence does not depend on x . Observe that r(x ) is uni modal ( since the derivative of r is 0 exactly once in the interval [ 0 , 1] ) ; and that r(x ) → 0 as x → 0+ and as x → 1− . Since both Fw(x ) and Fz(x ) are monotonically decreasing curves connecting ( 0 , 1 ) and ( 1 , 0 ) , the above properties of r(x ) = F 0 w ( x ) z ( x ) easily imply that for F 0 some s ∈ ( 0 , 1 ) , over the interval x ∈ [ 0 , s ] , Fw(x ) ≥ Fz(x ) , and over x ∈ [ s , 1 ] , Fw(x ) ≤ Fz(x ) . This combined with the fact that E[w ] = E[z ] = µ implies w Lorenz dominates z , so that for all concave functions g , we have E[g(w ) ] ≥ E[g(z ) ] [ 7 ] . Since g(w ) = min(w , y ) is concave in w for fixed y , we have E[min(w , µ ) ] ≥ E[min(z , µ) ] . Therefore , it is sufficient to analyze E[min(µ , z)]/µ , ie the case where either α or β is exactly 1 , and the other is at least 1 . It is easy to explicitly verify both these cases , and show that the worst case is when α = 1 and β → ∞ when E[min(µ , z ) ] = ( 1 − 1/e)µ . is µ = O` 1
A Typical Case . Though the Hybrid scheme is not revenue dominant over the pure per click scheme in pathological cases , the key advantage is in the following typical situation . There are n advertisers whose CTRs p1 ≥ p2 ≥ ··· ≥ pn are drawn from a common prior Q = Beta(1 , K ) , whose mean 2 .
´ . Assume further that n = 4K or K = log n 21A2 2 ! n « log n „ 1 2!2 « n
0@1 −
Pr[p2 ≥ 1/2 ] ≥
1 − 2 log n
„
We have :
2
K
1 −
2√ nlog n
1 −
= = 1 − o(1 )
Recall that the advertisers are aware of their CTR , but the auctioneer is only aware of the prior . Suppose the per click value for all the advertisers is v , and these are truthfully revealed . In the per click scheme , the auctioneer sells the impression to an arbitrary advertiser at per click price v , and in expectation earns µv . If the auctioneer is myopic ( γa = 0 ) , then q = E[Q ] < p2 whp , and the Hybrid scheme charges per impression . Here , the auctioneer sells to advertiser 1 at per impression price vp2 . From the above , E[p2 ] = Ω(1 ) , so that E[p2]/µ = Ω(log n ) . Therefore , for n advertisers , the auctioneer with diffuse priors of the form Beta
“
”
1 ,
1 log n gains a factor Ω(log n ) in revenue . This is particular relevant for obscure keywords , where the auctioneer will have very diffuse priors .
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search225 3.3 Uninformed Advertisers and Risk
So far , we have assumed that the advertiser is risk neutral and certain about the CTR , so that he is optimizing his expected profit . We now suppose that the advertiser is uncertain and trying to maximize a utility function U on his profit . The function U ( x ) is monotone with monotone derivative , and U ( 0 ) = 0 . If U is convex , the advertiser is said to be risk seeking , and if it is concave , the advertiser is said to be risk averse . We show that for risk averse advertisers , pure per click bidding is dominant , whereas pure per impression bidding is dominant when the advertisers are risk seeking .
It is natural to assume that some advertisers may be either risk averse or risk seeking . Risk aversion models advertisers with tight budget constraints . Risk seeking advertisers also occur naturally in many settings ; one example is when advertisers are conducting experiments to identify high performance advertising channels and keywords . Finding a high reward keyword may result in a higher budget allocated to this keyword and more revenue in the future , making the present utility function of winning this ad slot appear convex at the present time .
We assume the advertisers are uninformed , which is equivalent to assuming the advertiser and the auctioneer share a common prior , so that Pj = Qj . Essentially , the advertiser has no information and simply trusts the auctioneer ’s prior3 . In this section , we focus on a single advertiser , and drop the subscript corresponding to it . Let p = E[P ] = E[Q ] . As mentioned earlier , we assume that the auctioneer is myopic as well ( γa = 0 ) , so that q = E[Q ] = p .
Let ( m , c ) denote the advertiser ’s bid , and let v denote the true per click valuation . Let IR be the indicator corresponding to whether the bidder gets the impression if R−j = R . The bidding strategy of the advertiser will attempt to maximize :
»
„ vP − RP p
«–«
„
IR · max
E [ U ( vP − R ) ] , E
U
In the above expression , the first term is the expected profit if the impression is obtained based on the per impression bid ; and the latter term is the expected profit if the impression is obtained based on the per click bid . Our next lemma captures the structure of the dominant strategy .
Lemma 34 If U is concave , bidding ( 0 , v ) is a dominant strategy . If U is convex , the dominant strategy is of the form ( m , 0 ) for a suitably chosen m . h
“
” i ≤ 0 . Therefore ,
In this
Proof . First consider the case when vp < R . vP − RP p
U case , regardless of U , E to obtain positive profit , the bidder has to obtain the impression based on his per impression bid . In this case , the expected profit is E [ U ( vP − R) ] . Note that E[vP − R ] < 0 . Therefore if g is concave :
E [ U ( vP − R ) ] ≤ U ( E [ vP − R ] ) ≤ U ( 0 ) = 0
Therefore , if U is concave and vp < R , then bidding ( 0 , v ) is a dominant strategy . Since obtaining the impression based
3For the other extreme case of well informed advertisers , there is no uncertainty , and hence the risk averse and riskseeking cases collapse to risk neutral . on the per click bid does not yield positive profit , if U is convex , bidding ( m , 0 ) with appropriately chosen m is a dominant strategy . The next and most interesting case is when vp ≥ R . Define random variable X = vP − R and Y = vP − RP p . First note that E[X ] = E[Y ] = vp − R ≥ 0 . Further , the cumulative distribution functions ( CDFs ) of X and Y cross exactly once , with the CDF of X being initially larger than the CDF of Y . This is sufficient to show that Y Lorenz dominates X . This implies that for U being concave , E[U ( Y ) ] ≥ E[U ( X ) ] [ 7 ] , so that the advertiser only bids per click . Further , if U is convex , E[U ( X ) ] ≥ E[U ( Y ) ] , so that the advertiser only bids per impression .
Our main result in this sub section is the following property which gives a single natural characterization of the optimum hybrid bid for both risk averse and risk seeking advertisers . We will then show that for risk seeking advertisers ( U is strictly increasing and convex ) , the expected myopic revenue of the auctioneer is larger in the Hybrid auction compared to the pure per click auction , and for risk averse advertisers , the Hybrid and per click auctions coincide .
Theorem 35 Let m∗ = max{y|E [ U ( vP − y ) ] ≥ 0} . Bidding ( m∗ , v ) is a dominant strategy . Further , the auctioneer ’s revenue in the Hybrid scheme dominates the revenue in the pure per click scheme .
Proof . First consider the case when U is concave . Then , E [ U ( vP − p ) ] ≤ U ( E[vP − vp ] ) = 0 . Therefore , m∗ ≤ vp , so that bidding ( m∗ , v ) is equivalent to bidding ( 0 , v ) , which is a dominant strategy . Next , when U is convex , we have m∗ ≥ vp , so that bidding ( m∗ , v ) is equivalent to bidding ( m∗ , 0 ) . The previous lemma shows that the dominant strategy is of the form ( m , 0 ) . Since m∗ is the largest value of R−j for which the advertiser makes a non negative profit , bidding ( m∗ , 0 ) must be the dominant strategy . The auctioneer ’s revenue in the Hybrid scheme is the second largest value of max(m∗ j , vjpj ) while that in the per click scheme is the second largest value of vjpj , which cannot be larger .
4 . SEMI MYOPIC ADVERTISERS
In this section , we remove the assumption that the advertisers are optimizing some function of the profit at the current step . We now generalize to the case where the advertisers optimize revenue over a time horizon . We develop a tractable model for the advertisers , and show a simple dominant strategy for the advertisers , based on what we call the bidding index . Though this strategy does not have a closed form in general , we show that in many natural cases ( detailed later ) cases , it reduces to a natural pure per click or pure per impression strategy that is socially optimal . Thus , our hybrid auctions are flexible enough to allow the auctioneer and the advertiser to implement complex dynamic programming strategies collaboratively , under a wide range of scenarios . Neither per impression nor per click bidding can exhaustively mimic the bidding index in these natural scenarios .
Recall that the true per click value of advertiser j is vj , and that the advertiser j maintains a time indexed distribution Pjt over the possible values of the actual CTR p that is updated whenever he receives an impression . We assume
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search226 advertiser j ’s prior is updated based on the observed clicks in a fashion similar to the auctioneer ’s prior , Qjt .
We assume the bidding strategy of the advertiser is semimyopic , which we define as follows : The advertiser has a discount factor γb . The bid of an advertiser j depends on its current state hvj,Pjt,Qjti , and on R−j in a fashion described next . At every step , the value of R−j is revealed . If the advertiser j got the impression the previous time step , the value of R−j remains the same since the states of the other advertisers remains the same , else it changes adversarially . The optimization criterion of the advertiser is to maximize its discounted expected gain ( using discount factor γb ) in the contiguous time that it receives impressions ( so that the value of R−j remains the same ) . We make the reasonable assumption that the advertiser cannot optimize for a horizon beyond that , since the value of R−j changes in an unknown fashion . Finally note that a myopic advertiser is equivalent to assuming γb = 0 .
Discussion . The semi myopic model is closely related to the MDP approach of analyzing repeated auctions ; see for instance [ 2 , 3 ] . These works make the assumption that the priors Pj of the advertisers are public knowledge . However , this leads to somewhat perverse incentives in which the optimal strategy for an advertiser could be to underbid at the current time step in the hope that the priors of the other advertisers resolve to low values , and he then wins the auction on the remaining time steps at a lower price . However , note that if there are sufficiently many bidders , this scenario is unlikely to happen , and the bidder will attempt to win the auction at the current time slot . We make this explicit by making the following assumptions :
1 . The bidder j is aware of the revealed R−j values of the other bidders , but may not be aware of their prior distributions , which are usually private information .
2 . The bidder only optimizes over the contiguous time horizon in which he receives the impressions . In this horizon , R−j is fixed , and further , this removes the perverse incentive to under bid described above .
Note that in our model , the bidder is indeed aware of the current bids R−j of the other bidders . However , unlike the model in [ 2 , 3 ] , the optimization time horizon of the bidder leads to the existence of a nicely specified dominant strategy . We hope that our modeling , that is only slightly more restrictive than ones considered in literature , but which have nice analytic properties , will be of independent interest in this and other contexts . 4.1 The Dominant Bidding Index Strategy
We first show a bidding strategy that we term the bidding index strategy , and show that it is weakly dominant in the class of semi myopic strategies . The bidding index B(v,P,Q ) is defined as follows : Suppose the advertiser ’s current prior is P and the auctioneer ’s current prior is Q . Denote the current time instant as t = 0 . Since the advertiser computes this index , we assume the advertiser trusts his own prior but not the auctioneer ’s . For a parameter W , define the following game between the advertiser and the auctioneer with discount factor γb : At step t ≥ 0 , suppose the advertiser has prior Pt ( with mean E[Pt ] = pt ) and the auctioneer , Qt ( with qt = f ( Qt ) being the auctioneer ’s index ) , the advertiser can either stop the game , or continue . If he continues , he gains vpt in expectation and pays the auc ; the difference is his gain . The advertioneer W min
”
“
1 , pt qt tiser ’s value for the game is the expected discounted ( according to γb ) gain for the optimal strategy . Define W(v,P,Q ) as the largest value of W for which the value of the game with initial priors P and Q , is positive . This value can easily be computed by dynamic programming , much like the Gittins index .
The bidding index B(v,P,Q ) is defined as : p0 q0
B(v,P,Q ) = W(v,P,Q ) min
1 ,
„
«
This is the largest per impression price at time t = 0 for which the value of the above game is positive .
The Strategy : At any time step , when the advertiser j ’s prior is Pjt with mean pjt , and the auctioneer ’s prior is Qjt , with qjt = f ( Qjt ) , let Wjt = W(vj,Pjt,Qjt ) and Bjt = B(vj,Pjt,Qjt ) . The bidding index strategy involves bidding ( Bjt , Bjt pjt It is clear that the bidding index strategy is well defined for qjt being an arbitrary function f ( Qjt ) chosen by the auctioneer,and not just for f being the Gittins index of Qjt using discount factor γa .
) .
Theorem 41 The bidding index strategy is ( weakly ) dom inant in the class of semi myopic strategies .
Proof . Consider a sequence of time steps when advertiser j gets the impression ; call this a phase . During this time , the value R−j used in the VCG scheme is fixed ; denote this value R∗ . Suppose at a certain time step , the mean of the advertiser ’s prior is pjt and the auctioneer computes qjt . If the advertiser gets the impression , the price he is charged in the VCG scheme is either R∗ per impression or R∗/qjt per click . The advertiser optimizes this by paying R∗ min(1 , pjt/qjt ) in expectation per impression . The state evolution is only conditioned on getting the impression and not on the price paid for it .
Since the advertiser ’s strategy is semi myopic , at any time step , the bid should fetch him a non negative expected profit for the rest of the phase . This implies that R∗ ≤ Wjt . There are two cases . qjt pjt
First , if pjt < qjt , the advertiser essentially bids Rjt = = Wjt ≥ R∗ , and receives the impression at a per . Therefore , the expected per impression
Bjt click price of R∗ price is R∗ pjt Next , if pjt > qjt , the advertiser essentially bids Rjt = Bjt = Wjt ≥ R∗ , and receives the impression at a perimpression price of R∗ = R∗ min
= R∗ min
1 , pjt qjt
“
.
“
”
. qjt qjt
”
1 , pjt qjt
Therefore , the bidding scheme ensures that the advertiser receives the impression and makes the most possible profit in the rest of the phase . Note finally that if Wjt < R∗ , the maximum possible profit in the rest of the phase is negative , and the bidding scheme ensures the advertiser does not receive the impression . 4.2 Social Optimality of Bidding Index
Suppose the global discount factor is γ . We define the socially optimal strategy as follows : Suppose at time t , advertiser j with prior Pjt receives the impression resulting in value vjpjt for him . The socially optimal solution maximizes
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search227 the infinite horizon expected discounted value with discount factor γ .
We show that the bidding index strategy implements the socially optimal solution in each of the following two situations : ( 1 ) The advertiser and the auctioneer share the same prior ( Pjt = Qjt ) , and either ( 1a ) only the advertisers are strategic ( γa = 0 and γb = γ ) or ( 1b ) only the auctioneer is strategic ( γa = γ and γb = 0 ) ; and ( 2 ) The advertisers are certain about their CTR ( Pj = pj ) and ( 2a ) the auctioneer ’s index qjt is always at most pj . The bidding index also has a particularly simple form when the advertisers are certain , and ( 2b ) the auctioneer ’s qj,t is monotonically decreasing with t and always larger than pj,t . In both ( 2a ) and ( 2b ) , the bidding index strategy reduces to bidding ( vjpj , vj ) .
These scenarios are not arbitrarily chosen , and are the most illustrative scenarios we could find . Scenario ( 1 ) corresponds to an advertiser and an auctioneer that trust each other and hence have a common prior ; in case ( 1a ) , the auctioneer merely discloses its current estimate and trusts the advertisers to bid in an optimal fashion , whereas in ( 1b ) the advertisers delegate the strategic decision making to the auctioneer . In scenario 2 , the advertisers have a definitive model of the CTR in ( 2a ) , we model the case where the auctioneer starts with an underestimate of the click through rate and hence the qj,t are always smaller than pj to which they will hopefully converge as this advertisement is shown more times and the auctioneer ’s prior gets sharpened , and in ( 2b ) we model the mirror situation where the qj,t ’s are always an over estimate . It will be interesting to find a general theorem about the bidding index that unifies all these diverse scenarios .
In each of these cases , the bidding strategy can be implemented using either per impression or per click bidding or both , but neither per impression nor per click bidding can exhaustively mimic the bidding index in all scenarios .
Shared Priors . When the advertisers are uncertain and simply share the auctioneer ’s prior , we have Pjt = Qjt . Let Gjt denote the Gittins index of Pjt with discount factor γ . The socially optimal solution always gives the impression to the advertiser with highest vjGjt at time t .
Theorem 42 For shared priors , the bidding index strategy implements the socially optimal solution in the following two cases :
1 . The advertisers are strategic , ie , γb = γ , and the auctioneer is myopic , ie , γa = 0 .
2 . The advertisers are myopic , ie , γb = 0 , and the auc tioneer is strategic , ie , γa = γ .
1 , pjt qjt
Proof . For the first part , we have qjt = pjt since γa = = 1 , so that the value Wjt is 0 . Therefore , min the largest charge per impression so that the advertiser ’s discounted revenue is non negative . This is precisely the definition of the Gittins index with discount factor γb = γ . Therefore , the bidding index strategy involves bidding ) . This can easily be seen to be equivalent ( vjGjt , vj
Gjt pjt
) , and hence can be to bidding either ( vjGjt , 0 ) or ( 0 , vj mimiced with either pure impression or pure click bidding . Also , we have Rjt = vjGjt , so that the bidding index implements the socially optimal strategy .
Gjt pjt
“
”
For the second part , since the advertiser is myopic , the bidding index reduces to bidding ( vjpjt , vj ) . Since γa = γ , we have qjt = Gjt ≥ pjt . Therefore , Rjt = vjGjt , so that the bidding index implements the socially optimal solution ; this can also be mimiced using per click bidding but not per impression bidding .
Well Informed Advertisers . We next consider the case where the advertisers are certain about their CTR pj , so that Pjt = pj . The socially optimal solution always gives the impression to the advertiser with the largest vjpj . We show the following theorem :
Theorem 43 When Pjt = pj , then the bidding index strategy reduces to bidding ( vjpj , vj ) in the following two scenarios :
1 . The auctioneer ’s qjt is always at most pj . In this case , the strategy is equivalent to bidding ( vjpj , 0 ) and is socially optimal .
“
”
2 . The auctioneer ’s qjt is at least pj , and is monotonically decreasing with t .
1 , pj qjt
Proof . When pj > qjt for all t , we have min
= 1 , so that the value Wjt is the largest per impression price for which the advertiser ’s discounted revenue is non negative . This is precisely vjpj , so that the bidding index strategy reduces to bidding ( vjpj , vj ) . This is clearly socially optimal . Since qjt < pj , this is equivalent to bidding ( vjpj , 0 , but can not be simulated using per click bids . When pj ≤ qjt for all t and qjt is monotonically decreasing charged to the advertiser with t , the expected price Wjt increases with time . At any time t , the advertiser maximizes Wjt by setting it to vjqjt and stopping after the first step . = vjpj . ThereTherefore , Wjt = vjqjt , and Bjt = vjqjt fore , the bidding index strategy reduces to bidding ( vjpj , vj ) ; this is also equivalent to ( 0 , vj ) , but can not be simulated using per impression bids . pj qjt pj qjt
5 . EXPLORATION BY ADVERTISERS
We now show a simple bidding strategy for a certain ( ie well informed ) advertiser to make the auctioneer ’s prior converge to the true CTR , while incurring no extra cost for the advertiser ; per click bidding would have resulted in the advertiser incurring a large cost . More concretely , this models the scenario where the advertiser has side information about the advertisement ’s CTR but the auctioneer does not have a good prior , for example , because the keyword may be obscure . The advertiser has incentive to help the auctioneer “ learn ” the true CTR because this improves the advertiser ’s chance of winning an ad slot in a pure per click scheme .
To motivate why this is important , imagine a situation where the advertiser would not get the slot if the scheme were pure per click , and he were to bid truthfully per click , letting the auctioneer use his own estimate qj of the CTR . Therefore , in the pure per click scheme , the advertiser has to overbid on the per click valuation to get the slot enough number of times to make the CTR used by the auctioneer converge to the true value ; we show that this results in loss in revenue for the advertiser . However , allowing for per impression bids preserves truthfulness , and furthermore , helps
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search228 the auctioneer “ learn ” the true CTR , while incurring no revenue loss to the advertiser . This is our final argument in support of hybrid auctions , and may be the most convincing from an advertiser ’s point of view .
Formally , we consider an advertiser that is certain about its CTR pj , where vjpj > R−j so that the advertiser can ( and would like to ) win the auction but where qjt < pj , and where the goal of the advertiser is to make the auctioneer ’s prior converge to the true CTR . We show that the advertiser can achieve this goal without any loss in revenue , whereas achieving the same objective using per click bidding would have resulted in a large revenue loss . We assume the auctioneer ’s prior is a Beta distribution . We show a candidate strategy for an advertiser to make the Gittins index of the auctioneer ’s distribution , Qjt = Beta(αjt , βjt ) converge close to its true CTR pj while incurring no loss in revenue . The loss is defined as the value earned from actual clicks minus the amount paid to the auctioneer .
We focus on a single advertiser and drop its subscript . For any > 0 , suppose the advertiser ’s strategy is as follows : During an “ explore ” phase , submit a bid of ( vp0 , v ) where p0 = p(1 − ) , and then switch to bidding ( 0 , v ) . During the explore phase , suppose the advertiser gets T impressions on a price per impression basis resulting in n clicks . Then the worst case loss in revenue of the advertiser during the explore phase is v(T p0 − n ) . The “ explore ” phase stops when the auctioneer ’s posterior mean of the distribution Beta(α + n , β + T − n ) is at least p(1− ) . Note that this also implies that the Gittins index for Beta(α + n , β + T − n ) is at least p(1 − ) irrespective of the discount factor γ ; this in turn implies that by switching to pure per click bidding , the advertiser is assured that q ≥ p(1 − ) , so that bidding ( 0 , v ) yields Rj ≥ vp(1 − ) .
Claim 51 Suppose the advertiser knows its true CTR is p , and the auctioneer ’s initial prior is Beta(α , β ) . For any > 0 , the explore phase incurs no loss in revenue for the advertiser .
Proof . Let T denote the random stopping time of the explore phase and suppose it results in N clicks . First note that if T > 0 , then p(1 − ) > α α+β . The posterior mean on α+β+T ≥ p(1− ) , which implies N/T > p(1− ) . stopping is α+N Therefore , T p(1 − ) − N < 0 , which shows there is no loss in revenue ( provided T is finite with probability 1 , which follows from the law of large numbers in this case ) .
Suppose R−j = vjpj(1 − ) . In a pure per click bidding scheme , the advertiser would have to bid at least vj(1 − )pj/qjt at time t < T with an expected loss ( ie profit − cost ) of pjvj((1− )pj/qjt−1 ) . For a myopic auctioneer with initial prior ( 1 , β ) , the total loss of revenue for the advertiser till time T is Ω(vjpjβ ) which can be arbitrarily large . 6 . MULTI SLOT AUCTION
In this section , we generalize the hybrid auction to multiple slots under the standard separable CTR assumption , such that the resulting generalization is truthful in a myopic setting analogous to Section 3 . Assume there are K slots , where slot i is associated with a CTR multiplier θi ∈ [ 0 , 1 ] . Slot 1 is the topmost slot ; since the CTRs decrease with slot number , we have 1 = θ1 ≥ θ2 ≥ ··· ≥ θK ≥ 0 . We will also define θK+1 = 0 .
As before , advertiser j and the auctioneer maintain priors on the CTR value for this advertiser in ad slot 1 . As before , we denote these priors as Pj and Qj respectively . Let pj = E[Pj ] be the expected CTR estimated by the advertiser , and let qj = f ( Qj ) denote the Gittins index ( or for that matter , any other function ) of the auctioneer ’s prior . Let vj denote the true per click valuation of advertiser j . Note that the priors Pj and Qj correspond to the estimated CTR for advertiser j in the first ad slot , so that the expected CTR for the ith slot based on the advertiser ’s estimate is θipj .
Advertiser j bids ( mj , cj ) , which is interpreted as the perimpression and per click bids for obtaining the first slot . The auction is modeled after the laddered auction in [ 1 ] , which is equivalent to VCG under the separability assumption [ 4 ] . First , compute the effective bid Rj = max{mj , cjqj} for every advertiser as described in section 2 . Assume without loss of generality that there are K + 1 advertisers , and that R1 ≥ R2 ≥ . . . ≥ RK+1 . Then , the auction proceeds as follows :
1 . Advertiser j is placed in slot j , for 1 ≤ j ≤ K .
2 . An “ effective charge ” , ej is computed for advertiser j as ej =PK
“ θi−θi+1
” i=j
θj
Ri+1 .
3 . If mj > cjqj then the advertiser is charged ej per impression ; else it is charged ej/qj per click .
It is easy to see that ejθj = Rj(θj − θj+1 ) + ej+1θj+1 . Informally , advertiser j ’s effective charge is the same as the effective bid of the ( j + 1) th advertiser for the additional click rate at the j th position , and the same as the effective charge of the ( j + 1) th advertiser for the click rate that would have already been realized at the ( j + 1) th position . Theorem 61 If pj = E[Pj ] and the advertiser is myopic and risk neutral , then regardless of the choice of qj , the ( strongly ) dominant strategy is to bid ( vjpj , vj ) .
The proof of the above theorem is obtained by extending the proof of theorem 3.1 exactly along the line of the proof of truthfulness of the laddered auction in [ 1 ] , and is omitted from this version . This proof can also be obtained using the analysis of VCG with probabilistic allocations , due to Myerson [ 9 ] .
7 . CONCLUSION
Advertising is a major source of revenue for search engines and other web sites , and a major driver of innovation in web technology and services . Advertising spots are typically sold on the web using auctions , and these auctions have typically been either Cost Per Click ( CPC ) , Cost PerImpression ( CPM ) , or Cost Per Action ( CPA ) . We defined a single slot hybrid auction , which allows advertisers to enter per impression as well as per click bids . We showed that this auction is truthful for risk neutral , myopic advertisers , the setting under which such auctions have typically been analyzed . When advertisers are risk seeking , or non myopic , or when the advertiser has much better information about the Click Through Rate ( CTR ) than the auctioneer , we show that the hybrid auction offers stronger revenue guarantees and advertiser flexibility than either pure CPC or CPM . The hybrid auction generalizes naturally to multi slot scenarios
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search229 and is equally applicable to ( CPM,CPA ) or ( CPC,CPA ) bidding . Finally , the hybrid auction is fully backwards compatible with a CPC auction , in the sense that advertisers entering ( optional ) per impression bids in addition to per click bids can seamlessly co exist with advertisers entering only per click bids in the same auction .
8 . REFERENCES [ 1 ] G . Aggarwal , A . Goel , and R . Motwani . Truthful auctions for pricing search keywords . Proceedings of the seventh ACM conference on Electronic Commerce , pages 1–7 , June 2006 .
[ 2 ] S . Athey and I . Segal . An efficient dynamic mechanism . 2007 . Available at http://kuznetsfasharvardedu/~athey
[ 3 ] A . Bapna and T . Weber . Efficient dynamic allocation with uncertain valuation . Working Paper , Department of Management Science and Engineering , Stanford University , 2005 .
[ 4 ] B . Edelman , M . Ostrovsky , and M . Schwarz . Internet advertising and the generalized second price auction : Selling billions of dollars worth of keywords . American Economic Review , 97(1):242–259 , 2007 .
[ 5 ] J . C . Gittins . Bandit processes and dynamic allocation indices . J Royal Statistical Societe Series B , 14:148–167 , 1979 .
[ 6 ] S . Lahaie , D . Pennock , A . Saberi , and R . Vohra . Sponsored search auctions . In Algorithmic Game Theory , edited by Nisan , Roughgarden , Tardos , and Vazirani , 2007 .
[ 7 ] AW Marshall and I . Olkin . Inequalities : theory of majorization and its applications . Academic Press ( Volume 143 of Mathematics in Science and Engineering ) , 1979 .
[ 8 ] A . Mehta , A . Saberi , U . Vazirani , , and V . Vazirani .
Adwords and generalized online matching . Proceedings of the 46th IEEE Symposium on Foundations of Computer Science , 2005 .
[ 9 ] R . B . Myerson . Optimal auction design . Mathematics of Operations Research , 6(1):58–73 , 1981 .
[ 10 ] M . Richardson , E . Dominowska , and R . Ragno .
Predicting clicks : estimating the click through rate for new ads . Proceedings of the 16th international conference on World Wide Web , pages 521–530 , 2007 . [ 11 ] H . Varian . Position auctions . International Journal of
Industrial Organization , October 2006 .
[ 12 ] R . Weber . On the gittins index for multiarmed bandits . Annals of applied probability , 2(4):1024–1033 , 1992 .
WWW 2009 MADRID!Track : Internet Monetization / Session : Sponsored Search230
