Mining Interesting Locations and Travel Sequences from
GPS Trajectories
Yu Zheng , Lizhu Zhang , Xing Xie , Wei Ying Ma
Microsoft Research Asia , 4F , Sigma building , No.49 Zhichun road , Haidian District , Beijing 100190 , China
{yuzheng , v lizzha , xingx , wyma}@microsoft.com trajectories representing people ’s
ABSTRACT The increasing availability of GPS enabled devices is changing the way people interact with the Web , and brings us a large amount of GPS location histories . In this paper , based on multiple users’ GPS trajectories , we aim to mine interesting locations and classical travel sequences in a given geospatial region . Here , interesting locations mean the culturally important places , such as Tiananmen Square in Beijing , and frequented public areas , like shopping malls and restaurants , etc . Such information can help users understand surrounding locations , and would enable travel recommendation . In this work , we first model multiple individuals’ location histories with a tree based hierarchical graph ( TBHG ) . Second , based on the TBHG , we propose a HITS ( Hypertext Induced Topic Search) based regards an individual ’s access on a location as a directed link from the user to that location . This model infers the interest of a location by taking into account the following three factors . 1 ) The interest of a location depends on not only the number of users visiting this location but also these users’ travel experiences . 2 ) Users’ travel experiences and location interests have a mutual reinforcement relationship . 3 ) The interest of a location and the travel experience of a user are relative values and are region related . Third , we mine the classical travel sequences among locations considering the interests of these locations and users’ travel experiences . We evaluated our system using a large GPS dataset collected by 107 users over a period of one year in the real world . As a result , our HITS based inference model outperformed baseline approaches like rank by count and rank by frequency . Meanwhile , when considering the users’ travel experiences and location interests , we achieved a better performance beyond baselines , such as rankby count and rank by interest , etc . inference model , which
Categories and Subject Descriptors H28 [ Database Management ] : Database Applications data mining . H52 [ Information Interface and Presentation ] : User Interface . H33 [ Information Storage and Retrieval ] : Information Search and Retrieval – clustering , retrieval model .
General Terms Algorithms , Measurement , Experimentation .
Keywords Spatial data mining , GPS trajectories , Location recommendation .
1 . INTRODUCTION GPS enabled devices , like GPS phones , are changing the way people interact with the Web by using locations as contexts . With such a device , a user is able to acquire present locations , search
Copyright is held by the International World Wide Web Conference Committee ( IW3C2 ) . Distribution of these papers is limited to classroom use , and personal use by others . WWW 2009 , April 20 24 , 2009 , Madrid , Spain . ACM 978 1 60558 487 4/09/04 . the information around them and design driving routes to a destination . In recent years , many users start recording their outdoor movements with GPS trajectories for many reasons , such as travel experience sharing , life logging , sports activity analysis and multimedia content management , etc . Meanwhile , a branch of Websites or forums [ 1][2][3 ] , which enable people to establish some geo related Web communities , have appeared on the Internet . By uploading GPS these communities , individuals are able to visualize and manage their GPS trajectories on a Web map . Further , they can obtain reference knowledge from others’ life experiences by sharing these GPS logs among each other . For instance , a person is able to find some places that attract them from other people’ travel routes , hence , plan an interesting and efficient journey based on multiple users’ experiences . logs to
With the pervasiveness of the GPS enabled devices , a huge amount of GPS trajectories have been accumulating unobtrusively and continuously in these Web communities . However , almost all of these applications still directly use raw GPS data , like coordinates and time stamps , without much understanding . Hence , so far , these communities cannot offer much support in giving people interesting information about geospatial locations . What ’s more , facing such a large dataset in a community , it is impossible for a user to browse each GPS trajectory one by one .
Typically , people would desire to know which locations are the most interesting places in a geospatial region . To define interesting location , we mean the culturally important places , such as Tiananmen Square in Beijing and the Statue of Liberty in New York ( ie popular tourist destinations ) , and commonly frequented public areas , such as shopping malls/streets , restaurants , cinemas , bars etc . Further , given these interesting locations in a geospatial region like a city , users might also wonder what the most classical travel sequences are among them . For example , an individual would be more likely to go to a bar after visiting a cultural landmark than they would before , making landmark to bar a classical travel sequence .
With the information mentioned above , an individual can understand an unfamiliar city in a very short period and plan their journeys with minimal effort . Meanwhile , such information would enable mobile guides [ 6][14 ] ; given the recommendation of the interesting places and travel sequences around them , mobile users are more likely to enjoy a high quality travel experience while saving lots of time for location finding and trip planning .
However , it is not easy to infer the interest of a location because of the following two reasons . 1 ) The interest of a location does not only depend on the number of users visiting this location but also lie in these users’ travel experiences . Intrinsically , various people have different degrees of knowledge about a geospatial region . In a journey , the users , with more travel experiences about a region , would be more likely to visit some interesting locations in that region . For instance , the local people of Beijing are more capable than overseas tourists of finding out high quality restaurants and famous shopping malls in Beijing . 2 ) An individual ’s travel
WWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web791 experience and interest of a location are relative values ( ie , it is not reasonable to judge whether or not a location is interesting ) , and are region related ( ie , conditioned by the given geospatial region ) . A user , who has visited many places in a city like New York , might have no idea about another city , such as Beijing . Likewise , the most interesting restaurant in a district of a city might not be the most interesting one of the whole city ( as other restaurants from the remaining districts might outperform it ) .
In this paper , based on multiple users’ GPS trajectories , we aim to mine the top n interesting locations and the top m classical travel sequences in a given geospatial region , by taking into account users’ different travel experiences as well as the correlation between locations . At the same time , we are able to infer the most k experienced users in a geo related community . Here , we regard a user ’s visit to a location as an implicitly directed link from the user to that location , ie , a user would point to many locations and a location would be pointed to by many users . Further , these links are weighted based on different individuals’ travel experiences in this region . Therefore , we are able to involve the key idea of the HITS model to infer users’ travel experiences and the relative interest of a location .
In this HITS based model , a geospatial region corresponds to a topic ; an individual ’s hub score stands for their travel experiences , and the authority score of a location represents the interest of the location . Users’ travel experiences and the interest of a place have a mutual reinforcement relationship . Intuitively , the user with rich travel experiences in a region might visit many interesting places in that region , and a very interesting place in that region might be accessed by many users with rich travel experiences . For simplicity ’s sake , in the remainder of this paper , we call the user with rich travel experiences ( ie , relatively high hub score ) in a region , an experienced user of that region , and a location that attracts people ’s profound interests ( relatively high authority score ) is denoted as an interesting location . Further , considering a user ’s experience of travel and the interest of a location , we mine the classical travel sequences from people ’s GPS logs .
The work reported in this paper is a step towards enhancing mobile Web by involving the knowledge mined from multiple users’ location histories . Also , this is an approach to improve the location based services by integrating social networking into mobile Web . The contributions of this paper lie in four aspects :
 We propose a tree based hierarchical graph ( TBHG ) , which can model multiple users’ travel sequences on a variety of geospatial scales based on GPS trajectories .
 Based on the TBHG , we propose a HITS based model to infer users’ travel experiences and interest of a location within a region . This model leverages the main strength of HITS to rank locations and users with the context of a geospatial region , while calculating hub and authority scores offline . Therefore , we can ensure the efficiency of our system while allowing users specify any regions on a map .
 Considering individuals’ travel experiences and location interests as well as people ’s transition probability between locations , we mine the classical travel sequences from multiple users’ location histories .
 We evaluated our methodology using a large GPS dataset , which was collected by 107 users over a period of one year in the real world . The number of GPS points exceeded 5 million and its total distance was over 160,000 kilometers .
The remainder of this paper is organized as follows . Section 2 gives an overview of our system . Section 3 presents the algorithms regarding location history modeling . Section 4 details the processes of location interest inference and classical travel sequence mining . In Section 4 , we report on major experimental results and offer some discussions . Finally , in Section 5 , we draw our conclusions and present the future work .
2 . OVERVIEW OF OUR SYSTEM In this section , we first clarify some terms used in this paper . Then , the architecture of our system is briefly introduced . Finally , we demonstrate the application scenarios of our system on desktops and GPS phones using some snapshots of its user interfaces .
2.1 Preliminary
In this subsection , we will clarify some terms ; including GPS log ( P ) , GPS trajectory ( Traj ) , stay point ( s ) , location history ( LocH ) , and tree based hierarchical graph ( TBHG ) .
Definition 1 . GPS log : Basically , as depicted in the left part of Figure 1 , a GPS log is a collection of GPS points P={p1 , p2 , … , pn} . Each GPS point pi ∈ P contains latitude ( pi.Lat ) , longitude ( pi.Lngt ) and timestamp ( piT )
Definition 2 . GPS trajectory : As shown in the right part of Figure 1 , on a two dimensional plane , we can sequentially connect these GPS points into a curve based on their time serials , and split this curve into GPS trajectories ( Traj ) if the time interval between consecutive GPS points exceeds a certain threshold ∆𝑇 . Thus , Traj= p1→ p2 →…→ pn , where pi ∈ P , 𝑝𝑖+1 . 𝑇 > 𝑝𝑖 . 𝑇 and 𝑝𝑖+1 . 𝑇 − 𝑝𝑖 . 𝑇 < ∆𝑇 ( 1 ≤ 𝑖 < 𝑛 ) .
Figure 1 . a GPS log , a GPS trajectory and a stay point
Definition 3 . Stay point : A stay point s stands for a geographic region where a user stayed over a certain time interval . The extraction of a stay point depends on two scale parameters , a time threshold ( Tthreh ) and a distance threshold ( Dthreh ) . Thus , like the points { p3 , p4 , p5 , p6} demonstrated in Figure 1 , a single stay point s can be regarded as a virtual location characterized by a group of consecutive GPS points P={pm , pm+1 , … , pn} , where ∀𝑚 < 𝑖 ≤ 𝑛 , 𝐷𝑖𝑠𝑡𝑎𝑛𝑐𝑒 𝑝𝑚 , 𝑝𝑖 ≤ 𝐷𝑡𝑕𝑟𝑒𝑕 and 𝑝𝑛 . 𝑇 − 𝑝𝑚 . 𝑇 ≥ 𝑇𝑡𝑕𝑟𝑒𝑕 . Formally , conditioned by P , Dthreh and Tthreh , a stay point s=(Lat , Lngt , arvT , levT ) , where
𝑛 𝑠 . 𝐿𝑎𝑡 = 𝑖=𝑚
𝑝𝑖 . 𝐿𝑎𝑡
𝑃
, ( 1 )
𝑛 𝑠 . 𝐿𝑛𝑔𝑡 = 𝑖=𝑚 respectively stand for the average latitude and longitude of the collection P , and 𝑠 . 𝑎𝑟𝑣𝑇 = 𝑝𝑚 . 𝑇 and 𝑠 . 𝑙𝑒𝑣𝑇 = 𝑝𝑛 . 𝑇 represent a user ’s arrival and leaving times on s .
, ( 2 )
𝑝𝑖 . 𝐿𝑛𝑔𝑡
𝑃
Typically , these stay points occur in the following two situations . One is that an individual remains stationary exceeding a time threshold . In most cases , this status happens when people enter a building and lose satellite signal over a time interval until coming back outdoors . The other situation is when a user wanders around within a certain geospatial range for a period . In most cases , this situation occurs when people travel outdoors and are attracted by the surrounding environment . As compared to a raw GPS point , each stay point carries a particular semantic meaning , such as the shopping malls we accessed and the restaurants we visited , etc .
Definition 4 . Location history : Generally , a location history is a record of locations that an entity visited in geographical spaces p4p3p5p6p7A Stay Point Sp1p2 Latitude , Longitude , Timep1 : Lat1 , Lngt1 , T1p2 : Lat2 , Lngt2 , T2 ………pn : Latn , Lngtn , Tnp8WWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web792 2.2 Architecture Figure 3 shows the architecture of our system , which is comprised of the following three parts ; location history modeling , location interest and sequence mining , and recommendation . The first two operations can be performed off line , while the last process should be conducted on line based on the region specified by a user . over a period of time . In this paper , an individual ’s location history ( LocH ) is represented as a sequence of stay points ( s ) they visited with corresponding arrival and leaving times .
∆𝑡1 𝑠2
∆𝑡2 , … ,
∆𝑡𝑛 −1 𝑠𝑛 ) ; ∆𝑡𝑖 = 𝑠𝑖+1 . 𝑎𝑟𝑣𝑇 − 𝑠𝑖 . 𝑙𝑒𝑣𝑇 .
𝐿𝑜𝑐𝐻 = ( 𝑠1 However , the location histories of various people are inconsistent and incomparable as the stay points pertaining to different individuals are not identical . To address this issue , we propose a structure , called tree based hierarchical graph ( TBHG ) , to model multiple users’ location histories . Generally speaking , a TBHG is the integration of two structures , a tree based hierarchy H and a graph G on each level of this tree . The tree expresses the parentchildren ( or ascendant descendant ) relationship of the nodes pertaining to different levels , and the graphs specify the peer relationships among the nodes on the same level .
As demonstrated in Figure 2 , in our system two steps need to be performed when building a TBHG . 1 ) Formulate a tree based Hierarchy H : We put together the stay points detected from users’ GPS logs into a dataset . Using a density based clustering algorithm , we hierarchically cluster this dataset into some geospatial regions ( set of clusters C ) in a divisive manner . Thus , the similar stay points from various users would be assigned to the same clusters on different levels . 2 ) Build graphs on each level : Based on the tree based hierarchy H and users’ location histories , we can connect the clusters of the same level with directed edges . If consecutive stay points on one journey are individually contained in two clusters , a link would be generated between the two clusters in a chronological direction according to the time serial of the two stay points .
Figure 2 . Building a tree based hierarchical graph
Definition 5 . Tree Based Hierarchy H : H is a collection of stay point based clusters C with a hierarchy structure L . 𝐻 = 𝐶 , 𝐿 , 𝐿 = 𝑙1 , 𝑙2 , … , 𝑙𝑛 denotes the collection of levels of the hierarchy and 𝐶 = 𝑐𝑖𝑗 1 ≤ 𝑖 ≤ 𝐿 , 1 ≤ 𝑗 ≤ 𝐶𝑖 means the collection of clusters on different levels . Here , 𝑐𝑖𝑗 represents the jth cluster on level 𝑙𝑖 ∈ 𝐿 , and 𝐶𝑖 is the collection of clusters on level 𝑙𝑖 . Definition 6 . Tree Based Hierarchical Graph ( TBHG ) : Formally , a TBHG is the integration of H and G , TBHG=(H , G ) . H is defined in Definition 5 , and G={ 𝑔𝑖 = 𝐶𝑖 , 𝐸𝑖 , 1 < 𝑖 ≤ |𝐿|} . On each layer 𝑙𝑖 ∈ 𝐿 , gi ∈ G includes a set of vertexes Ci and the edges Ei connecting 𝑐𝑖𝑗 ∈ 𝐶𝑖 .
Notations : In the rest of this paper , we use the following notations to simplify the descriptions . 𝑈 = {𝑢1 , 𝑢2 , … , 𝑢𝑛 } represents the collection of users in a community , 𝑢𝑘 ∈ 𝑈 , 1 ≤ 𝑘 ≤ |𝑈|denotes the kth user , and 𝑃𝑘 , 𝑇𝑟𝑎𝑗𝑘 , 𝑆𝑘 and 𝐿𝑜𝑐𝐻𝑘 respectively stand for the uk ’s GPS logs , GPS trajectory , stay points and location history .
Figure 3 . Architecture of our system
Location history modeling : Given multiple users’ GPS logs , we build a TBHG off line . In this structure , a graph node stands for a cluster of stay points , and a graph edge represents a directed transition between two locations ( clusters ) . In contrast to raw GPS points , these clusters denote the locations visited by multiple users , hence would carry more semantic meanings , such as culturally important places and commonly frequented public areas . In addition , the hierarchy of the TBHG denotes different geospatial scales ( alternatively , the zoom level of a Web map ) , like a city , a district and a community . In short , the tree based hierarchical graph can effectively model multiple users’ travel sequences on a variety of geospatial scales .
HITS based inference model : With the TBHG , we propose a HITS based inference model to estimate users’ travel experiences and location interests in a given region . In this model , an individual ’s visit to a location ( cluster ) is regarded as a directed link from the individual to that location . Thus , a user is a hub if they have visited many locations , and a location is an authority if it has been accessed by many users . Further , a user ’s travel experience ( hub score ) and interest of a location ( authority score ) have a mutual reinforcement relationship . Using a power iteration method , we can generate the final scores for each user and location , and find out the top n interesting locations and the top k experience users in a given region . ( See Section 4.2 for details )
As a user ’s travel experience is region related , we need to specify a geospatial region as the context for the inference model . Actually , each cluster of the TBHG specifies an implied region for its descendant clusters ( locations ) . Therefore , we are able to mine in advance each individual ’s travel experience and interests of locations conditioned by the regions of clusters on different levels . In other words , a user would have multiple hub scores based on different regions , and a location would have multiple authority scores specified by their ascendant clusters on different levels . This strategy takes the advantage of a HITS model in ranking locations and users based on a region context ( query topic ) , while making the calculations of authority and hub scores offline . l1Stands for a stay point sStands for a stay point cluster cij {C }G3G1G2AscendantDescendantA Tree Based HierarchyA Tree Based Hierarchical Graphc11c22c21c35c31c32c33c34c35c31c32c33c34c22c21l2l3c11Modeling Location History HITS Based Inference Model Mining Classical Travel SequencesGPS LogsGPS PhonesLocation InterestUser Travel ExperienceClassical Travel SequencesInteresting LocationsExperienced UsersTree Based Hierarchical GraphLocation RecommenderLaptops and PCsMobileCommunicatorLocation Interest and Sequence MiningKnowledgeRecommendationLocation History ModelingWWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web793 Mining classical travel sequence : We calculate a classical score for each location sequence within a given region considering two factors ; the travel experiences of the users taking this sequence and the interests of the locations contained in the sequence . Since there would be multiple paths starting from a location , the interest of this location should be shared among all the paths , with which it points to other locations . The interest of a location to different paths is based on the probability of users’ taking these paths . Later , the sequences with relatively high classical score will be retrieved as classical travel sequences . As people would not travel to too many places in a journey , classical sequences containing two or three locations would be more useful than longer ones .
Recommendation : By changing the zoom level of a Web map and moving the map , an individual can specify any geospatial regions with the present view of the map . This region can cover a whole country or a part of a city . With the received zoom level , our recommender can find out the corresponding level of hierarchy in the TBHG , and then collect the locations ( clusters ) fall in the given region on this level . The hub and authority scores conditioned by the first shared ascendant cluster by these locations will be used to rank locations and users ( refer to Figure 9 ) . Finally , the most k experienced users , top n interesting locations and top m classical travel sequences within the specified region can be returned to the users with desktop PCs and mobile devices like GPS phones .
2.3 Application Scenarios The work reported in this paper is an important component of our project GeoLife [ 12][19][20][21 ] , whose prototype has been internally accessible within Microsoft since Oct . 2007 . So far , we have had 107 individuals using this system .
Figure 4 shows its user interface for desktop computers . In the right part of this figure , we can view the top five interesting locations and the most five experienced users in the region specified by the present view of the Web map shown in the left part . Meanwhile , the top five classical travel sequences within this region are displayed on the Web map . By changing the zoom level and/or moving this Web map , an individual can retrieve such results within any regions . In addition , the photos taken at an interesting location will be presented on the bottom of the window after a user clicks the icon representing the location on the map . Also , the sub locations contained in this region will be presented .
Figure 4 . The user interface regarding location recommendation
As shown in Figure 5 , a user with a GPS phone can find out the top five interesting locations as well as the most five classical sequences nearby their present geographic position ( the red star ) . In addition , when the user reaches a location , our system would provide them with a further suggestion by presenting the top three classical sequences start from this location .
Figure 5 . Location recommendations on a GPS phone
3 . Modeling Location History In this Section , we detail the process of modeling multiple users’ location histories with a tree based hierarchical graph . Figure 6 gives a formal description of this operation .
Algorithm LocHisModeling(𝛗 , 𝑫𝒕𝒉𝒓𝒆𝒔𝒉 , 𝑻𝒕𝒉𝒓𝒆𝒔𝒉 ) Input : The collection of users’ GPS logs : φ = {𝑃𝑘 , 1 ≤ 𝑘 ≤ |𝑈|} . Output : a tree based hierarchical graph : TBHG 1 . Foreach 𝑢𝑘 ∈ 𝑈 do 2 . 𝑇𝑟𝑎𝑗𝑘= LogParsing(𝑃𝑘 ) ; 3 . 𝑆𝑘 = StayPointDetection( 𝑇𝑟𝑎𝑗𝑘 , 𝐷𝑡𝑕𝑟𝑒𝑠 𝑕 , 𝑇𝑡𝑕𝑟𝑒𝑠 𝑕 ) ; 4 . 𝐿𝑜𝑐𝐻𝑘=PersonalLocHis(𝑆𝑘 ) ; // individual location history 5 . SP.Add( 𝑆𝑘 ) ; //the collection of stay points 6 . H= HierarchicalClustering ( SP ) ; 7 . Foreach 𝑙𝑖 ∈ 𝐻 . 𝐿 do // build a graph on each level 8 . 𝑔𝑖 . 𝐶𝑖 = 𝐻 . 𝐶𝑖 ; 9 . Foreach 𝑢𝑘 ∈ 𝑈 do 10 . 𝑔𝑖 = GraphBuilding( 𝑔𝑖 , 𝐿𝑜𝑐𝐻𝑘 ) ; 11 . G.Add(𝑔𝑖 ) ; 12 . TBHG=(H , G ) ; 13 . Return TBHG ;
Figure 6 . The procedure of modeling users’ location histories
First , for each user 𝑢𝑘 ∈ 𝑈 , we parse their GPS logs ( 𝑃𝑘 ) into GPS trajectories ( 𝑇𝑟𝑎𝑗𝑘 ) , and extract stay points ( 𝑆𝑘 ) from each trajectory by seeking the spatial regions where 𝑢𝑘 spent a period exceeding a certain threshold ( refer to [ 12 ] for details ) . Then , 𝑢𝑘 can formulate a location history ( 𝐿𝑜𝑐𝐻𝑘 ) with these stay points . Second , we put these stay points together into a dataset 𝑆𝑃 = {𝑆𝑘 , 1 ≤ 𝑘 ≤ |𝑈|} . Using a density based clustering algorithm , this dataset 𝑆𝑃 will be hierarchically clustered into several geospatial regions C in a divisive manner . Thus , the similar stay points from various users will be assigned to the same clusters on different levels of the hierarchy . In addition , we would filter away the clusters , which might represent users’ homes . If an individual has visited to a cluster with a frequency exceeding a threshold , we believe this cluster may be the individual ’s home or working place .
Third , with the tree based hierarchy H and each user ’s location history 𝐿𝑜𝑐𝐻𝑘 , we build connections among the clusters on the same level . A directed link would be generated for two clusters if they contain consecutive stay points pertaining to an individual ’s location history . 4 . LOCATION INTEREST INFERENCE In this Section , we first give a brief introduction on the key idea of HITS . Second , we describe our HITS based inference model . Third , by involving such inference results , we mine the classical travel sequences from each graph of the TBHG .
4.1 Basic Concepts of HITS HITS stands for hypertext induced topic search , which is a searchquery dependent ranking algorithm for Web information retrieval .
WWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web794 When the user enters a search query , HITS first expands the list of relevant pages returned by a search engine and then produces two rankings for the expanded set of pages , authority ranking and hub ranking . For every page in the expanded set , HITS assigns them an authority score and a hub score . As shown in Figure 7 , an authority is a Web page with many in links , and a hub is a page with many out links . The key idea of HITS is that a good hub points to many good authorities , and a good authority is pointed to by many good hubs . Thus , authorities and hubs have a mutual reinforcement relationship . More specifically , a page ’s authority score is the sum of the hub scores of the pages it points to , and its hub score is the integration of authority scores of the pages pointed to by it . Using a power iteration method , the authority and hub scores of each page can be calculated . The main strength of HITS is ranking pages according to the query topic , which may provide more relevant authority and hub pages . However , HITS needs some time consuming operations , such as on line expanding page sets and calculating the hub and authority scores .
Figure 7 . The basic concept of HITS model
4.2 Our HITS Based Inference Model 421 Model Description Using the third level of the TBHG shown in Figure 2 as a case , Figure 8 illustrates the main idea of our HITS based inference model . Here , a location is a cluster of stay points , like 𝑐31 and 𝑐32 . We regard an individual ’s visit to a location as an implicitly directed link from the individual to that location . For instance , cluster 𝑐31 contains two stay points respectively detected from 𝑢1 and 𝑢2 ’s GPS trajectories , ie , both 𝑢1 and 𝑢2 have visited this location . Thus , two directed links are generated respectively to point to 𝑐31 from 𝑢1 and 𝑢2 . Similar to HITS , in our model , a hub is a user who has accessed many places , and an authority is a location which has been visited by many users . Therefore , users’ travel experiences ( hub scores ) and the interests of locations ( authority scores ) have a mutual reinforcement relationship .
However , using an online data selection strategy , ( ie , specify a region based on an individual ’s input ) , we need to perform lots of time consuming operations , which may reduce the feasibility of our system . Actually , on a level of the TBHG , the shape of a graph node ( cluster of stay points ) provides an implicit region for its descendent nodes . These regions covered by clusters on different level of the hierarchy might stand for various semantic meanings , such as a city , a district and a community . Therefore , we are able to calculate in advance the interest of every location using the regions specified by their ascendant clusters . In other words , a location might have multiple authority scores based on the different region scales it falls in . Also , a user might have multiple hub scores conditioned by the regions of different clusters .
Definition 7 . Location Interest : In our system , the interest of a location ( 𝑐𝑖𝑗 ) is represented by a collection of authority scores 𝑙 denotes the authority score of 𝑎𝑖𝑗 = {𝑎𝑖𝑗 cluster 𝑐𝑖𝑗 based on the region specified by its ascendant nodes on level l , where 1 ≤ 𝑙 ≤ 𝑖 − 1 .
𝑙 } . Here , 𝑎𝑖𝑗
2 , … , 𝑎𝑖𝑗
1 , 𝑎𝑖𝑗
Definition 8 . User Travel Experience : In our system , a user ’s ( eg , 𝑢𝑘 ) travel experience is represented by a set of hub scores 𝑘 |1 ≤ 𝑖 < 𝐿 , 1 ≤ 𝑗 < 𝐶𝑖 } ( refer to definition 5 ) , where 𝑕𝑘 = {𝑕𝑖𝑗 𝑘 denotes 𝑢𝑘 ’s hub score conditioned by the region of 𝑐𝑖𝑗 . 𝑕𝑖𝑗
1 and 𝑎22
2 and 𝑎32 2 , 𝑎34
Figure 9 gives a demonstration of these definitions . In the region specified by cluster 𝑐11 , we can respectively calculate an authority 1 ) for cluster 𝑐21 and 𝑐22 . Meanwhile , within score ( 𝑎21 1 , 1 , 𝑎33 this region , we are able to infer authority scores ( 𝑎31 1 ) for cluster 𝑐31 , 𝑐32 , 𝑐33 , 𝑐34 and 𝑐35 . Further , using 1 and 𝑎35 𝑎34 the region specified by cluster 𝑐21 , we can also calculate another 2 ) for 𝑐31 and 𝑐32 . Likewise , the authority score ( 𝑎31 2 ) of 𝑐33 , 𝑐34 and 𝑐35 can be reauthority scores ( 𝑎33 inferred with the region of 𝑐22 . Therefore , each cluster on the third level has two authority scores , which would be used in various occasions based on users’ inputs . For instance , as depicted in the Figure 9 A ) , when a user selects a region only covering location 2 can be used to rank 𝑐31and 𝑐32 , the authority score 𝑎31 these two locations . However , as illustrated in Figure 9 B ) , the region selected by a user covers the locations from two different parent clusters ( 𝑐21 and 𝑐22 ) . At this moment , the authority value 1 , 𝑎33 𝑎32
1 should be used to rank these locations .
1 and 𝑎34
1 , 𝑎32
2 and 𝑎35
2 and 𝑎32
Figure 8 . Our HITS based inference model
422 Strategy for Data Selection Intrinsically , a user ’s travel experience is region related , ie , a user who has much travel knowledge in a city might have no idea about another city . Also , an individual , who has visited many places in a part of a city , might know little about another part of the city ( if the city is very large , like New York ) . This feature is aligned with the query dependent property of HITS . Thus , before conducting the HITS based inference , we need to specify a geospatial region ( a topic query ) for the inference model and formulate a dataset that contains the locations falling in this region .
Figure 9 . Some cases demonstrating the data selection strategy
The strategy , which sets multiple hub scores for a user and multiple authority scores for a location , has the following two advantages . First , we are able to leverage the main strength of HITS to rank locations and users with the contexts of geospatial region ( query topic ) . Second , these hub and authority scores can be calculated offline . Therefore , we can ensure the efficiency of our system while allowing users specify any regions on a map .
AuthoritiesHubsAn authorityA HubG3c35c31c32c33c34l3Locations(Authority)Users ( Hub)u1u2u3u4{C }AscendantStands for a stay point cluster cij {C }DescendantA region specified by a userStands for a cluster that covers the region specified by the user c35c31c32c33c34c35c31c32c33c34A ) A region covering locations from single parent clusterB ) A region covering locations from multiple parent clustersc11c22c21c11c22c21WWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web795 423 Inference Given the set of locations pertaining to the same ascendant cluster , we are able to build an adjacent matrix M between users and locations based on the users’ accesses on these locations . In this 𝑘 stands for the times that 𝑢𝑘 ( a user ) has visited matrix , an item 𝑣𝑖𝑗 to cluster 𝑐𝑖𝑗 ( the jth cluster on the ith level ) . Such matrixes can be built offline for each non leaf node . For example , the matrix M formulated for the case shown in Figure 8 can be represented as follows , where all the five clusters pertain to 𝑐11 .
𝑀 =
𝑢1 𝑢2 𝑢3 𝑢4
𝑐31 𝑐32 𝑐33 𝑐34 𝑐35 1 1 0 0 0 1 1 2 0 0 0 0 1 2 0 0 0 0 1 1
( 3 )
Then , the mutual reinforcement relationship of user travel experience 𝑕𝑖𝑗
𝑘 and location interest 𝑎𝑖𝑗
𝑙 is represented as follows :
𝑎𝑖𝑗
𝑙 =
𝑢𝑘 ∈𝑈
𝑘 𝑣𝑗𝑖
× 𝑕𝑙𝑞
𝑘 ; ( 4 )
𝑘 =
𝑙 𝑘 × 𝑎𝑖𝑗 𝑣𝑖𝑗
𝑐𝑖𝑗 ∈𝑐𝑙𝑞
; ( 5 )
𝑕𝑙𝑞 Where 𝑐𝑙𝑞 is 𝑐𝑖𝑗 ’s ascendant node on the lth level , 1 ≤ 𝑙 < 𝑖 . For instance , as shown in Figure 9 , 𝑐31 ’s ascendant node on the first level of the hierarchy is 𝑐11 , and its ascendant node on the second level is 𝑐21 . Thus , if 𝑙 = 2 , 𝑐𝑙𝑞 stands for 𝑐21 and ( 𝑐31 , 𝑐32 ) ∈ 𝑐21 . Also , if 𝑙 = 1 , 𝑐𝑙𝑞 denotes 𝑐11 , ( 𝑐31 , 𝑐32 , … , 𝑐35 ) ∈ 𝑐11 .
Writing them in the matrix form , we use a to denote the column vector with all the authority scores , and use h to denote the column vector with all the hub scores . Conditioned by the region 2 , . . . , 𝑕11 of cluster 𝑐11 , a=(𝑎31 𝒂 = 𝑴T ∙ 𝒉 ( 6 ) 𝒉 = 𝑴 ∙ 𝒂 ( 7 )
1 ) , and h=(𝑕11
1 , … , 𝑎35
1 , 𝑎32
1 , 𝑕11
5 ) .
𝒂𝑛 = 𝑴T ∙ 𝑴 ∙ 𝒂𝑛−1 ( 8 ) 𝒉𝑛 = 𝑴 ∙ 𝑴T ∙ 𝒉𝑛−1 ( 9 )
Starting with 𝒂0 = 𝒉0 = ( 1,1 , … ,1 ) , we are able to calculate the authority and hub scores using the power iteration method .
Algorithm LocationInterestInference ( 𝑇𝐵𝐻𝐺 , 𝐿𝑜𝑐𝐻 ) Input : A tree based hierarchy graph TBHG=(H , G ) , and collection of users’ location histories LocH
Output : the collection of users’ hub scores , 𝒉 , and the collection of locations’ authority scores , 𝒂 .
1 . 𝒉=𝒂 = ∅ ; 2 . For 𝑖 = 1 ; 𝑖 < 𝐿 ; 𝑖 + + //for each level 3 . For 𝑗 = 1 ; 𝑗 ≤ 𝐶𝑖 ; 𝑗 + + // for each cluster on this level 4 . For 𝑥 = 𝑖 + 1 ; 𝑥 ≤ 𝐿 ; 𝑥 + + //search the descendant levels 5 . 𝐶𝑥′=LocationCollecting ( x , 𝑐𝑖𝑗 , 𝐻 ) ; 6 . M=MatrixBuilding(𝐶𝑥′ , 𝐿𝑜𝑐𝐻 ) ; 𝑘 7 . ( 𝑕𝑖𝑗 8 . 𝒂 = 𝒂 ∪ 𝑎𝑥 9 . 𝒉 = 𝒉 ∪ 𝑕𝑖𝑗 10 . Return ( 𝒉 , 𝒂 ) ;
𝑖 )=HITS Inference(M ) ;
𝑖 ; 𝑘 ;
, 𝑎𝑥
Figure 10 . The algorithm for inferring the authority and hub scores
Figure 10 depicts an off line algorithm for inferring each user ’s hub scores and the authority scores of each location conditioned by the different regions . Here 𝐶𝑥 is the collection of clusters on xth level . 𝐶𝑥′ ⊂ 𝐶𝑥 denotes the collection of 𝑐𝑖𝑗 ′ s descendant clusters on the xth level . For instance , the 𝐶2′ of 𝑐11 is {𝑐21 , 𝑐22} ,
If we use 𝒂𝑛 and 𝒉𝑛 to denote authority and hub scores at the nth iteration , the iterative processes for generating the final results are
𝑖 represents the collection and 𝐶3′ of 𝑐11 is {𝑐31 , 𝑐32 , … , 𝑐35} . 𝑎𝑥 of authority scores of the locations contained in 𝐶𝑥 conditioned by their ascendant node on the ith level . 4.3 Mining Classical Travel Sequences With users’ travel experiences and the interests of locations , we calculate a classical score for each location sequence within the given geospatial region . The classical score of a sequence is the integration of the following three aspects . 1 ) The sum of hub scores of the users who have taken this sequence . 2 ) The authority scores of the locations contained in this sequence . 3 ) These authority scores are weighted based on the probability that people would take a specific sequence .
Using a graph of TBHG , Figure 11 demonstrates the calculation of the classical score for a 2 length sequence , AC . In this figure , the graph nodes ( A , B , C , D and E ) stand for locations , and the graph edges denote people ’s transition sequences among them . The number shown on each edge represents the times users have taken the sequence .
Figure 11 . Demonstrating classical sequence mining with a graph
Equation ( 10 ) presents the classical score of sequence AC , which includes the following three parts . 1 ) The authority score of location A ( 𝑎𝐴 ) weighted by the probability of people ’s moving out by this sequence ( 𝑂𝑢𝑡𝐴𝐶 ) . Clearly , there are seven ( 5+2 ) links point out to other nodes from node A , and five out of seven of these links direct to node C . So , 𝑂𝑢𝑡𝐴𝐶 = , ie , only five sevenths of location A ’s authority ( 𝑎𝐴 ) should be offered to sequence AC , and the rest of 𝑎𝐴 should be provided to AB . 2 ) The authority score of location C ( 𝑎𝐶 ) weighted by the probability of people ’s moving in by this sequence ( 𝐼𝑛𝐴𝐶 ) . 3 ) The hub scores of the users ( 𝑈𝐴𝐶 ) who have taken this sequence . ( 𝑎𝐴 ∙ 𝑂𝑢𝑡𝐴𝐶 + 𝑎𝐶 ∙ 𝐼𝑛𝐴𝐶 + 𝑕𝑘
𝑆𝐴𝐶 =
)
7
5
𝑢𝑘 ∈𝑈𝐴𝐶
= 𝑈𝐴𝐶 ∙ 𝑎𝐴 ∙ 𝑂𝑢𝑡𝐴𝐶 + 𝑎𝐶 ∙ 𝐼𝑛𝐴𝐶 +
𝑢𝑘 ∈𝑈𝐴𝐶
𝑕𝑘
= 5 ×
5
7
× 𝑎𝐴 +
5
8
𝑎𝐶 +
𝑢𝑘 ∈𝑈𝐴𝐶
𝑕𝑘
. ( 10 )
7
1
7
1
.
𝑕𝑘
𝑢𝑘 ∈𝑈𝐶𝐷
× 𝑎𝐶 +
𝑎𝐷 +
Following this method , we are able to calculate the classical score of sequence CD , 𝑆𝐶𝐷 = 1 × Thus , the classical score of sequence ACD equals to : 𝑆𝐴𝐶𝐷 = 𝑆𝐴𝐶 + 𝑆𝐶𝐷 . ( 11 ) Using this paradigm we are able to calculate the classical score of any n length sequences . Later , the top m n length sequences with relatively high scores can be retrieved as n length classical travel sequences . However , it is not necessary to find out the classical sequences with long length , as people would not visit many places in a trip . Moreover , the process of searching for n length classical sequences is time consuming , although this operation can be performed offline . Thus , in this paper , we start with mining 2length classical sequences , and then try to find out some 3 lenth classical sequences by extending these 2 length sequences .
5 . EXPERIMENTS In this Section , we first present the experimental settings . Second , we introduce the evaluation approaches . Third , some major results are reported followed by some discussions .
ABCDE234456321WWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web796 5.1 Settings 511 GPS Devices and Data Collectors Figure 12 shows the GPS devices we chose to collect data . They are comprised of stand alone GPS receivers ( Magellan Explorist 210/300 , G Rays 2 and QSTARZ BTQ 1000P ) and GPS phones . Except for the Magellan 210/300 , these devices are set to receive GPS coordinates every two seconds . Carrying these GPS enabled devices , 107 users ( 49 females and 58 males ) recorded their outdoor movements with GPS logs from May 2007 to Oct . 2008 . Figure 13 shows these users’ demographic statistics .
Figure 12 . GPS devices used in our experiment
Figure 13 . Demographic statistics of our experiment
512 GPS Data Figure 14 depicts the distributions of the GPS data we used in the experiments . Most parts of this dataset were created in Beijing , China , and other parts covered 36 cities in China as well as a few cities in the USA , South Korea , and Japan . The volunteers were motivated to log their outdoor movements as much as possible by the payments based on the distance of GPS trajectories collected by them ; the more data collected by them , the more money they obtained . As a result , the total distance of the GPS logs exceeded 166,372 kilometers , and the total number of GPS points reached 5,081,369 . Considering the privacy issues , we use these datasets anonymously .
Clustering : We use a density based clustering algorithm , OPTICS ( Ordering Points To Identify the Clustering Structure ) , to hierarchically cluster stay points into geospatial regions in a divisive manner . As compared to an agglomerative method like K Means , the density based approach is capable of detecting clusters with irregular structures , which may stand for a set of nearby restaurants or shopping streets . In addition , this approach would filter out a few sparsely distributed stay points , and ensure each cluster has been accessed by some users . As a result , a fourlevel TBHG is built based on our dataset ( see Table I for details ) .
Table I . Information of the TBHG used in the experiment
Level 1
Level 2
Level 3
Level 4
Num . of
Ave . size of
Ave . num of
Ave . num stay
Clusters clusters KM user/cluster points/cluster
1
32
70
159
11,450.7
14.5
2.1
0.26
107
6.7
8
6.5
10,354
267.5
112.7
46.2
5.2 Evaluation Approaches 521 Framework of the Evaluation Figure 15 illustrates the framework of the evaluation , in which we respectively explore the effectiveness of location & travel sequence recommendation by performing a user study . In this study , 29 subjects ( 14 females and 15 males ) , who have been in Beijing for more than 6 years , were invited to answer the evaluation questions . Using the region specified by the fourth ring road of Beijing , we retrieved the top 10 interesting locations and the top 10 classical travel sequences based on a variety of approaches , including our methods and some baselines . As the subjects are familiar with this region , we are more likely to find out common ground truths shared by them .
Figure 15 . Framework of the evaluations
Regarding the interesting locations , we conduct the following two aspects of evaluations . One is the Presentation , which stands for the ability of the retrieved interesting locations in presenting a given region . The other is the Rank , which represents the ranking performance of the retrieved locations based on relative interests .
1 ) Presentation . In this aspect , each subject had to answer the following evaluation questions :

Representative : How many locations in this retrieved set are representative of the given region ( 0 10 ) ?
 Comprehensive : Do these locations offer a comprehensive view of the given region ( 1 5 ) ?
 Novelty : How many locations in this retrieved set have interested you even though they only appeared recently ( 010 ) ? In the study , the subjects were able to view the points of interests ( POIs ) falling in each location as well as the photos taken there .
2 ) Rank . Each subject had to individually rate the interest of each retrieved location with a value ( 1~2 ) shown in table II . Then , we
A ) Data distribution in China B ) Data distribution in Beijing Figure . 14 Distribution of the GPS dataset we used in this experiment
513 Parameter Selection Stay point detection : In this experiment , we set Tthreh to 20 minutes and Dthreh to 200 meters for stay point detection . In other words , if an individual stays over 20 minutes within a distance of 200 meters , a stay point is detected . These two parameters enable us to find out some significant places , such as restaurants and shopping malls , etc . , while ignoring the geo regions without semantic meaning , like the places where people wait for traffic lights or meet congestion . As a result , we extracted 10,354 stay points from the dataset .
16%45%30%9%age<=2222<age<=2526<=age<29age>=3018%14%10%58%Microsoft emplyeesEmployees of other companies Government staffColleage studentsTop 10 interesting locations(C1 , C2,…,C10)A geospatial regionUser Desirability Rating on each location( 1 , 0 , 1 , 2)Representative Rating ( 0~10)Comprehensive Rating ( 1~5)nDCG & MAPTop 5 classical travel sequences(Sq1 , Sq2,…,Sq5)Novelty Rating ( 0~10)PresentationUser Desirability Rating On each sequence ( 1,0,1,2)RankWWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web797 aggregated these subjects’ ratings for each location , and select the mode of the ratings for the location . If the mode of two rating levels is identical , we prefer the lower ratings . For example , if fifteen subjects rated a location with 2 and ten rated it with 1 , we regard the subjects’ rating on this location as 2 ( since 2 is the most frequently occurring rating in the dataset ) . However , if the number of subjects rating a location with 2 is the same with those rating it with 1 , the final aggregated rating should be 1 .
Table II . Users’ interests in a location
Ratings
Explanations
2
1
0
I’d like to plan a trip to that location .
I’d like to visit that location if passing by .
I have no feeling about this location , but don’t oppose others to visit it .
1
This location does not deserve to visit .
With regard to evaluating the retrieved classical travel sequences , we required the subjects to rate each sequence in the set with the scores shown in table III . Also , we aggregated these subjects’ rating for each sequence like the method mentioned above .
Table III . Users’ interests in a travel sequence
Ratings
Explanations
2
1
0
1
I’d like to plan a trip with this travel sequence .
I’d like to take that sequence if visiting the region .
I have no feeling about this sequence , but don’t oppose others to choose it . It is not a good choice to select this sequence .
522 Measurements Measurements for presentation : We compare our method with the baselines using the mean score of the ratings offered by the subjects . In addition , we perform a T test for each comparison to justify the significant advantages of our method .
Measurements for ranking : We employ two criteria , nDCG ( normalized discounted cumulative gain ) and MAP ( Mean Average Precision ) , to measure the ranking performance of the retrieved interesting locations . MAP is the most frequently used summary measure of a ranked retrieval run . In our experiment , it stands for the mean of the precision score after each interesting location is retrieved . Here , a location is deemed as an interesting location if its interest level equals to 2 . For instance , the MAP of an interest rating vector , 𝐺 =< 2 , 0 , 2,0,1 , 0 , 0 , 2 , 0 , −1 > , for the top 10 location , is computed as follows . 1 + 2 3 + 3 8
𝑀𝐴𝑃 =
= 0.681
3 nDCG is used to compute the relative to the ideal performance of information retrieval techniques . The discounted cumulative gain of G is computed as follows : ( In our experiments , b = 3 . )
𝐶𝐺 𝑖 =
𝐺 1 , 𝑖𝑓 𝑖 = 1 𝐷𝐶𝐺 𝑖 − 1 + 𝐺 𝑖 , 𝑖𝑓 𝑖 < 𝑏
𝐷𝐶𝐺 𝑖 − 1 +
𝐺 𝑖 𝑙𝑜𝑔𝑏𝑖
, 𝑖𝑓 𝑖 ≥ 𝑏
Given the ideal discounted cumulative gain DCG’ , then nDCG at i th position can be computed as 𝑁𝐷𝐶𝐺 𝑖 = 𝐷𝐶𝐺 𝑖 /𝐷𝐶𝐺′ [ 𝑖 ] .
Measurement for classical sequence : We used the mean score of these subjects’ ratings , along with a T test for each comparison , to distinguish our method from baselines . At the same time , we investigated the classical rate , which represents the ratio of sequences with a score of 2 in the set , of different methods .
523 Baselines Baselines for mining interesting locations : Here , we explore the effectiveness of two baseline methods , rank by count and rankby frequency . Regarding the former one , the more users visiting a location the more interesting this location might be . In the latter , the more frequent people accessed a location the more interesting this location might be . The visited frequency of a location is the ratio between the number of the users visiting this location and the time span , from the first day one user accessed this location to the last day at least one individual visited it .
Baselines for mining classical travel sequences : We compare our method with three baselines ; rank by count , rank by interests and rank by experience . With regard to the first baseline , we rank a sequence based on the number of the users who have taken this sequence . Regarding the second one , we only take into account the interests of the locations contained in a sequence to rank the travel sequences . In the third baseline method , we only consider the experiences of the users who have taken this sequence .
5.3 Results 531 Results Related to Interesting Locations Presentation ability : Figure 16 illustrates the top 10 interesting locations , which were respectively inferred out by our method and two baselines using the region within the fourth ring road of Beijing ( the zoom level corresponds to the 3rd level of the TBHG ) .
A ) Our method B ) Rank by count C ) Rank by frequency
Figure 16 . Top 10 interesting locations of different approaches
Based on these results , 29 subjects individually answered the evaluation questions with the ratings mentioned in Table II . As shown in Table IV , our method is more capable than the baselines of finding out representative locations in the give region ( T test result : p1<0.01 , p2<001 ) Meanwhile , the top 10 locations retrieved by our method presented a more comprehensive view of this region over the baselines ( p1<<0.01 , p2<<001 ) In addition , using our method , more novel locations that interest the subjects have been retrieved ( p1<0.01 , p2<001 ) These regions represent the development of new Beijing , while having not been noticed by baselines , Rank by count many outperformed rank by frequency in finding out the representative locations ( p<0.01 ) and presenting a comprehensive view of the region ( p<001 ) However , the former method does not show a clear advantage beyond the latter in detecting the novel interesting locations ( p>02 ) people . Regarding the
Table IV . Comparison on the presentation ability of different methods
Ours
Rank by count
Rank by frequency
Representative
Comprehensive
Novelty
5.4
4
3.4
4.5
3.4
2.4
3.1
2.3
2.2
Ranking ability : Table V depicts the ranking ability of different methods using nDCG@5 , nDCG@10 and MAP as measurements . Although the set of interesting locations retrieved by our method and rank by count had a 60 percents overlap , our method showed clear advantages beyond baseline methods in effectively ranking this location set .
80WWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web798 Table V . Ranking ability of different methods
Ours
Rank by count
Rank by frequency nDCG@5 nDCG@10
MAP
0.823
0.943
0.759
0.714
0.848
0.532
0.598
0.859
0.365
532 Results Related to Classical Sequences Using two measurements ( mean score and classical rate ) , Table VI differentiates the performance of our method from the baselines in finding out the classical sequences in the given region . Clearly , our method considering both users’ travel experiences and location interests outperformed rank by count ( p<<0.01 ) , rank by interest ( p<001 ) Meanwhile , when respectively taking into account users’ travel experiences the performance of rank by counts had been significantly improved . These results proved that user travel experience and location interests respectively play an important role in retrieving the classical travel sequences and offered a greater contribution when being used together . ( See 522 for the meaning of classical rate )
( p<0.01 ) and rank by experience
( p<0.01 ) or location interests
( p<0.01 ) ,
( nDCG@5 086>067 ) Intrinsically , users’ travel knowledge is region related , eg , some individuals , who are familiar with most parts of Beijing , might know little about the region shown in Figure 17 B ) . Thus , we cannot directly use these individuals’ hub scores to infer the authority scores of the locations in this region .
Figure 18 A ) demonstrates the correlations between users in the GeoLife community . A link was generated to connect two users ( a node ) if they had visited 5+ of the same locations . The relatively big nodes denote the top ten experienced users in Beijing . Figure 18 B ) shows the correlation among locations using the sequences generated by multiple users in Beijing . Such information would further enable us to explore the social networking in geo related community and understand locations based on users’ GPS logs .
Table VI . Performance of different methods in finding classical sequences
Ours ( Interest + Experience )
Rank bycounts
Rank byinterest
Rank byexperience
Mean score
Classical Rate
1.6
0.6
1.2
0.3
1.4
0.4
1.5
0.4
533 Investigations into Our Method The advantages of the hierarchy of the TBHG lie in two aspects . 1 ) It would offer a comprehensive view of a large region ( a city ) and help users understand the region step by step ( level by level ) . 2 ) The hierarchy can be used to specify users’ travel experiences in different regions . Hence , we are more likely to effectively retrieve interesting locations in a region .
First , as shown in Figure 17 A ) , 8 out of the top 10 interesting locations ( within the fourth ring road of Beijing ) have fallen into the town center if these locations are ranked according to their authority scores inferred out on the bottom level of the TBHG ( ie , no hierarchy ) . In contrast to Figure 16 A ) , Figure 17 rushes users into low level details of Beijing , while ignoring a more comprehensive view of this city . Failing in understanding the city step by step , people would not gain some high level conceptual information related to Beijing at the very beginning .
Figure 17 . Investigations into our method
Second , Figure 17 B ) presents the top 10 interesting locations ranked by their authority scores conditioned by the region shown in this figure ( these locations pertain to the same ascendant cluster on the 3rd level ) . As compared to Figure 17 C ) where the locations are ranked in terms of the authority scores conditioned by the whole city ( ie , without hierarchy ) , Figure 17 B ) provided a more comprehensive view of this region ( 41>31 , p<0.01 ) and retrieved more representative locations ( 68>47 , p<0.01 ) in the region . In addition , the results shown in Figure 17 B ) outperformed that of Figure 17 C ) in effectively ranking the retrieved locations
A ) Relations between users B ) Correlations between locations
Figure 18 . Correlation between locations and users
5.4 Discussions 541 Discussion on Interesting Locations With data shown in Table IV , we observe that users’ travel experiences are useful in not only retrieving representative locations in a region but also finding out more novel and interesting locations beyond baseline methods . Intuitively , some interesting places , which contain high quality restaurants or nice shopping malls developed recently , would not be visited by many people . However , a location covering some landmarks , which is not that interesting but with a relatively long history , might be accessed by more people . Hence , the rank by count cannot handle this kind of problem well . Meanwhile , a user would frequently access the restaurant nearby their working place for convenience rather than food quality or having fun . Therefore , a location frequently visited by people might not be interesting .
542 Discussion on Classical Sequences The results shown in Table V justify the contributions of users’ travel experiences and location interests in mining classical travel sequences . First , intuitively , without considering such information , the sequence from a railway station to a nearby hotel might be detected as a classical travel sequence because some tourists would live nearby the station . Obviously , this is not a good recommendation for users . Second , if only using individuals’ travel experiences , we would mine out some life routine of an experienced user rather than classical sequences . For instance , sometimes , an experienced user would have dinner at a restaurant nearby their home and then go to a supermarket not far away from this restaurant . Since the user has a relatively high hub score , their life routine , like from the restaurant to the supermarket , might be detected as a classical travel sequence . Third , if only considering location interest , some ineffective sequences would be found out . For example , the Summer Palace and the Forbidden City are two very interesting locations in Beijing . An experienced user would not visit them in a sequence as they are far from each other and everyone deserves a one day tour . However , a few tourists without much travel knowledge about Beijing might carelessly visit these two places in a sequence , hence make this sequence classical .
1324658971016324958710A ) Inferring the top 10 interesting locations without using hierarchyB ) Ranking the locations using the authority scores of the region C ) Ranking locations using their authority scores of the whole BeijingWWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web799 6 . RELATED WORK 6.1 Mining Location History Mining individual location history : During the past years , a branch of research [ 5][9][11][13 ] has been performed based on individual location history represented by GPS trajectories . These works include detecting significant locations of a user [ 5][9 ] , predicting the user ’s movement among these locations [ 5][13 ] , and recognizing user specific activities at each location [ 15 ] . As opposed to these works , we aim to model multiple users’ location histories and learn patterns from numerous individuals’ behaviors .
Mining multiple users’ location histories : Gonotti et al . [ 8 ] mined similar sequences from users’ moving trajectories , and Mamoulis et al . [ 16 ] proposed a framework for retrieving maximum periodic patterns in spatio temporal data . MSMLS [ 11 ] used a history of a driver ’s destinations , along with data about driving behavior extracted from multiple users’ GPS trajectories , to predict where a driver may be going as a trip progresses . Eagle et al [ 7 ] aimed to recognize the social pattern in daily user activity from the dataset collected by 100 users with a Bluetooth enabled mobile phone . In contrast to these techniques , we extend the paradigm of mining multiple users’ location histories from exploring users’ behaviors to understanding locations as well as modeling the relationship between users and locations . 6.2 Location Recommenders Recommenders based on real time location : Mobile tourist guide systems locations and sometimes provide navigation information based on a user ’s realtime location . Previously , such kinds of systems were somehow naïve as they always returned the information close to an individual without understanding the individual and the nearby locations . Recently , some researchers aim to filter away from the returned results the invisible entities occluded by the nearby building [ 6][17 ] . Meanwhile , another branch of work [ 4][14 ] started involving a user ’s location history in these systems to provide the user with a more personalized recommendation . In contrast to these techniques , we aim to integrate social networking into the mobile tourist guide systems , by helping each individual deeply understand the locations around them with the knowledge mined from multiple users’ location histories .
[ 4][6][14][17 ] typically recommend
Recommenders based on location history : Using multiple users’ real world location histories , some recommender systems , such as Geowhiz [ 10 ] and CityVoyager [ 18 ] , etc , have been designed to recommend geographic locations like shops or restaurants to users . Horozov et al . [ 10 ] proposed an enhanced collaborative filtering solution to generate the recommendation of a restaurant . Takeuchi et al . [ 18 ] attempted to recommend shops to users based on their individual preferences estimated by analyzing their past location histories . The major difference between these works and ours lies in two aspects . First , we differentiate the travel experiences of various users . Second , we consider the relationship between locations and users’ the mutual reinforcement relationship and the region related constraints . travel experiences , eg , interesting
7 . CONCLUSION In this paper , using the GPS trajectories generated by multiple users , we mined travel sequences within a given geospatial region . Such information can help us understand the correlation between users and locations , and enable travel recommendation as well as mobile tourist guidance . In this work , we regard an individual ’s visit to a location as a link from the individual to the location , and weight these links in terms of users’ travel experiences in various regions . locations and classical
A HITS based model is proposed to infer a user ’s travel experience and the interest of a location considering the following two aspects . One is the mutual reinforcement relationship between location interest and user travel experience . The other is that user travel experience as well as location interest are region related . Later , we detected the classical travel sequences in a specified region using location interests and users’ travel experiences . We evaluated our method with a real world GPS dataset created by 107 users over a period of 1 year . As a result , our method showed clear advantages beyond rank by count and rank by frequency by providing a better presentation ability and ranking performance . Meanwhile , when employing both users’ travel experiences and location interests , we achieved the best performance .
In the future , we would like to improve the efficiency of sequence mining . Also , grouping users based on their location histories or clustering locations in terms of people ’s visits are potential works .
8 . REFERENCES [ 1 ] Bikely : http://wwwbikelycom/ [ 2 ] GPS Track route exchange forum : http://wwwgpsxchangecom/ [ 3 ] GPS sharing : http://gpssharingcom/ [ 4 ] Abowd , G . D . Cyberguide : a mobile context aware tour guide , wireless network , 3(5 ) , 421 433 .
[ 5 ] Ashbrook , D . , and Starner , T . Using GPS to learn significant locations and predict movement across multiple users . Personal and Ubiquitous Computing 7(5 ) , 275 286 .
[ 6 ] Beeharee , A . et al . Exploiting real world knowledge in ubiquitous applications . Personal and Ubiquitous Computing 11(6 ) , 429 437 .
[ 7 ] Eagle , N . et al . Reality mining : sensing complex social systems .
Personal and Ubiquitous Computing 10(4 ) , 255 268 .
[ 8 ] Gonotti , F . , et al . Trajectory pattern mining . In Proceedings of
KDD’07 ( San Jose USA , Aug . 2007 ) , ACM Press , 330 339
[ 9 ] Hariharan , R . et al . Project Lachesis : Parsing and Modeling Location
Histories , In Proceedings of GIScience , ( Park Utah , October 2004 ) , ACM Press : 106 124 .
[ 10 ] Horozov , T . , et al . Using Location for Personalized POI
Recommendations in Mobile Environments . In Proceedings of SAINT , ( Phoenix , USA , Jan . 2006 ) , IEEF Press : 124 129 .
[ 11 ] Krumm , J.et al . Predestination : Inferring Destinations from Partial Trajectories . In Proceedings of the Ubicomp’03 , ( Orange County USA , September 2003 ) . Springer Press : 243 260 .
[ 12 ] Li , Q . and Zheng , Y . et al . Mining user similarity based on location history . In Proc . of GIS’08 ( Santa Ana , CA , Nov . 2008 ) . ACM Press : 298 307
[ 13 ] Liao , L . , et al . Building Personal Maps from GPS Data . In proceedings of IJCAI MOO05 , Springer Press(2005 ) : 249 265
[ 14 ] Park , M . , H . Location Based Recommendation System Using
Bayesian User ’s Preference Model in Mobile Devices . In Proc . UIC’07 ( Hong Kong , China , July 2007 ) . Springer Press:1130 1139
[ 15 ] Patterson , D . , J . et al . Inferring High Level Behavior from Low
Level Sensors . In Proc . of Ubicomp’03 , Springer Press ( 2003 ) , 73 89
[ 16 ] Mamoulis , N . et al . Mining , Indexing and Querying Historical Spatiotemporal Data . In Proceedings of KDD’04 ( Seattle USA , August 2004 ) , ACM Press : 236 245 .
[ 17 ] Simon R . , et al . A Mobile Application Framework for the Geospatial Web . In Proceedings of WWW '07 ( Banff Canada , May 2007 ) . ACM Press : 381 390 .
[ 18 ] Takeuchi , Y . et al . CityVoyager : An Outdoor Recommendation
System Based on User Location History . In Proceedings of UIC’2006 , ( Berlin , 2006 ) , Springer Press : 625 636 .
[ 19 ] Zheng , Y , et al . Learning transportation modes from raw GPS data for geographic applications on the Web . In Proceedings of WWW 2008 , ( Beijing China , April 2008 ) , ACM Press : 247 256 .
[ 20 ] Zheng , Y . , et al . GeoLife : Managing and understanding your past life over maps . In Proceedings of MDM’09 , ( Beijing China , April 2008 ) , IEEE Press : 211 212
[ 21 ] Zheng , Y . et al . Understanding mobility based on GPS data . In Proc .
Ubicomp’08 , ( Seoul Korea , Sept . 2008 ) , ACM Press : 312 321
WWW 2009 MADRID!Track : User Interfaces and Mobile Web / Session : Mobile Web800
