Dynamic , Real time Forecasting of Online Auctions via
Functional Models
Wolfgang Jank
Department of Decision and
Information Technologies Robert H . Smith School of
Business
Galit Shmueli
Department of Decision and
Information Technologies Robert H . Smith School of
Business
Shanshan Wang Statistics Program
Department of Mathematics
University of Maryland shanshan@mathumdedu
University of Maryland
University of Maryland wjank@rhsmithumdedu gshmueli@rhsmithumdedu
ABSTRACT We propose a dynamic model for forecasting price in online auctions . One of the key features of the model is that it is dynamic in the sense that it operates during the ongoing live auction , which makes it different from previous approaches that only consider static models . Our model shares similarity to previous approaches in that it produces price forecasts for the auction end ; however , it is more flexible in that it incorporates up to date price information that becomes available at any point during the ongoing auction . Our model is also different with respect to how information about price is incorporated . While one part of the model is based on the more traditional notion of an auction ’s pricelevel , another part incorporates the price velocity and the price acceleration . In that sense , it incorporates key features of a dynamic system such as an online auction . The use of novel methodology , functional data analysis , allows us to measure , and subsequently include , the price ’s velocity and acceleration . We illustrate our model on a diverse set of eBay auctions across many different book categories . We find significantly higher prediction accuracy compared to standard approaches .
INTRODUCTION
1 . eBay ( wwweBaycom ) is the the world ’s largest Consumerto Consumer ( C2C ) online auction house . In 2005 , eBay had about 135 million registered users . There are approximately 44 million items available worldwide on eBay at any given time and approximately 4 million new items are added every day in over 50,000 categories . On eBay.com , an identical ( or near identical ) product is often sold in numerous , often simultaneous auctions . For instance , a simple search under the key words “ iPod shuffle 512MB MP3 player ” returns over 300 hits for auctions that close within the next 7 days . A more general search under the less restrictive key words “ iPod MP3 player ” returns over 3,000 hits . Clearly , it would be challenging , even for a very dedicated eBay user , to inspect and simultaneously monitor all of these 300 ( or 3,000 ) auctions , while being on the look out for newly added auctions for the same product , and subsequently deciding in which of these numerous auctions to participate and to place a bid .
The decision making process of an eBay bidder can be supported by information on price forecasts1 . If one had a method to predict the outcome of an auction ahead of time , then one could use these predictions to create an auctionranking ( from lowest predicted price to highest ) and select those auctions with the lowest predicted price . One of the difficulties with such an approach is that information in the online environment changes at every moment : new auctions enter the market , old ( ie closed ) auctions drop out , and even within the same auction the price changes constantly with every new incoming bid . Thus , a well functioning forecasting system has to be adaptive to accommodate ever occurring change .
We propose a dynamic forecasting model that can adapt to change . In general , price forecasts can be done in two different ways , in a static and in a dynamic way . The static model relates information that is known before the start of the auction to information that becomes available after the auction closes . This is the basic principle of some of the existing proposed models . ( See eg [ Ghani and Simmons , 2004 ] or [ Ghani , 2005 ] for price forecasting using neural networks , or [ Lucking Reiley et al . , 2000 ] using regression models . Similarly , [ Bajari and Hortacsu , 2003b ] use structural models to recover the bid distribution . ) For instance , one could relate the opening bid , the auction length and a seller ’s reputation to the final price . Notice that opening bid , auction length , and seller reputation are all known at the auction start . Training a model on a suitable set of past auctions , one can get static forecasts of the final price in that fashion . However , this approach does not take into account im
1On a related note , price forecasts can also be used by eBaydriven businesses that provide service to buyers or sellers . In fact , the authors were contacted by a company that provides brokerage services for eBay sellers about using the dynamic forecasting system to create a secondary market for eBaybased derivatives .
1 portant information that arrives during the auction . The number of competing bidders right now or the current price level are factors that are only revealed during the ongoing auction and that are important in determining the future price . Moreover , the current change in price could also have a huge impact on the future price . If , for instance , the price had increased at an extremely fast rate over the last several hours , causing bidders to drop out of the bidding process or to revise their bidding strategies , then this could have an immense impact on the evolution of price in the next few hours and , subsequently , on the final price . We refer to models that account for newly arriving information and for the rate at which this information changes as dynamic models2 .
Forecasting price in online auctions dynamically is challenging for a variety of reasons . Traditional methods for forecasting time series , such as exponential smoothing or moving averages , cannot be applied in the auction context , at least not directly , due to the special data structure . Traditional forecasting methods assume that data arrive in evenly spaced time intervals such as every quarter or every month . In such a setting , one trains the model on data up to the current time period t , and then uses this model to predict at time t + 1 . Implied in this process is the important assumption that the distance between two adjacent time periods is the same , which is the case for quarterly or monthly data . Now consider the case of online auctions . Bids arrive in very unevenly spaced time intervals , determined by the bidders and their bidding strategies , and the number of bids within a short period of time can sometimes be very sparse , othertimes extremely dense . In this setting , the distance between t and t+1 can sometimes be more than a day , while at other times it may only be a few seconds . Traditional forecasting methods also assume that the time series continues , at least in theory , for an infinite amount of time and does not stop at a point in the near future . This is clearly not the case in a 5 or 7 day online auction . The implication of this is a discrepancy in the estimated forecasting uncertainty . And lastly , online auctions , even for the same product , can experience price paths with very heterogeneous price dynamics [ Jank and Shmueli , 2005 ] . By price dynamics we mean the speed at which price travels during the auction and the rate at which this speed changes . Traditional models do not account for instantaneous change and its effect on the price forecast . This calls for new methods that can measure and incorporate this important information .
In this work we propose a new approach for forecasting price in online auctions . The approach allows for dynamic forecasts in that it incorporates information from the ongoing auction . It overcomes the unevenly spacing of data , and also incorporates change in the price dynamics . Our forecasting approach is housed within the principles of functional data analysis which has been made popular by the monographs and related work of [ Ramsay and Silverman , 2002 , Ramsay and Silverman , 2005 ] . We first review the basics of bidding
2We use the term “ dynamic ” in two ways : First , our model is dynamic in that it can adapt to change “ on the fly . ” Second , our model also incorporates the “ process dynamics ” of a dynamic system such as an online auction . In that ( second ) sense , the term “ dynamic ” refers to the auction ’s price dynamics such as the price velocity or acceleration . in eBay ’s online auctions and illustrate bidding data in Section 2 . In Section 3 we explain the principles of functional data analysis and derive our functional forecasting model in Section 4 . We apply our model to a set of bidding data for a variety of book auctions in Section 5 . We conclude with further remarks in Section 6 .
2 . EBAY’S ONLINE AUCTIONS 2.1 Basic auction mechanism The dominant auction format on eBay is a variant of the second price sealed bid auction [ Krishna , 2002 ] with “ proxy bidding ” . This means that individuals submit a “ proxy bid ” , which is the maximum value they are willing to pay for the item . The auction mechanism automates the bidding process to ensure that the person with the highest proxy bid is in the lead of the auction . The winner is the highest bidder and pays the second highest bid . Unlike other auctions , eBay has strict ending times , ranging between 1 and 10 days from the opening of the auction , as determined by the seller . eBay posts the complete bid histories of closed auctions for a duration of at least 15 days on its web site .
2.2 Auction data Data about buying and selling on eBay is available in abundance . Figure 1 shows an example of bid histories found on eBay ’s web site . The top of Figure 1 displays a summary of the information relevant to the auction : A description of the item and the item number , the current bid ( which is identical to the winning bid since the auction is closed ) , the starting bid ( = the minimum bid ) , the quantity of items auctioned ( equal to one in the “ proxy bid ” auction type ) , and the number of bids received during the auction . It also shows information about the start and the end times of the auction as well as the seller ’s username and his/her rating ( in parentheses ) . The bottom of the page includes detailed information on the history of bids . Specifically , starting with the highest bid , the page displays the bidder ’s user name , his/her rating and the time and date when the bid was placed . Note that the bid history is ordered by descending bid amounts , not by the arrival time . Because the current high bid is not disclosed , it is common to see later bids with lower bid amounts . This phenomenon can be seen in Figure 1 , where the $140 bid placed by rondarool at 09:01:49 is followed by a lower bid of $120.95 by cpumkinbatman at 10:02:45 . This happens because at the time of bidding , cpumkinbatman only saw the current price which was the second highest bid at that time plus an increment , $108.35 + $2.50 = $11085
2.3 Proxy bids and Live bids As pointed out above , the proxy bidding mechanism leads to sequences of proxy bids that are not necessarily monotonically increasing in time . Using proxy bids as our data poses a problem : From an economic point of view , this series does not describe the actual information that bidders see during the ongoing live auction . The “ current price ” that eBay displays is in fact only the second highest bid ( plus an increment ) . And it is the current price which bidders use for their decision making regarding their next move . For that reason , we use the series of “ current prices ” posted by eBay during the live auction . This series , a step function , forms a monotone series and reflects the price climbing throughout the auction . Computing the current price from the proxy
2 home | register | sign in | services | site map | help
Auction #1
Auction #2 tips
Date of Bid
Aug 21 03 10:33:20 PDT
Aug 21 03 10:32:52 PDT
)
First bid # of bids
$60.00 19
Seller ( Rating ) daynathegreat ( 27
Currently Quantity Time left Started Ends
PALM M515 COLOR PDA LIKE NEW HANDHELD ( Item # 3041545039 ) eBay.com Bid History for
$157.50 1 Auction has ended . Aug 16 03 10:34:26 PDT Aug 21 03 10:34:26 PDT
Search titles and descriptions  
( Accessible by Seller only ) Learn more .
Bidding History ( Highest bids first ) moonwolfdesigns ( 481 moonwolfdesigns ( 481
$150.00
$145.00
$157.50
$155.00 cpumpkinbatman ( 16 cpumpkinbatman ( 16
$140.00
$125.95
$120.95
$115.95 moonwolfdesigns ( 481
) rondaroo1 ( 65 rondaroo1 ( 65 rondaroo1 ( 65 rondaroo1 ( 65
Bid Amount
)
)
)
)
User ID
$151.99
)
)
)
)
Aug 21 03 10:19:00 PDT
Aug 21 03 10:32:23 PDT
Aug 21 03 10:32:11 PDT
Aug 21 03 09:01:49 PDT
Aug 21 03 10:03:09 PDT
Aug 21 03 10:02:45 PDT
Aug 21 03 08:31:09 PDT quest3487 ( 68
) moonwolfdesigns ( 481 moonwolfdesigns ( 481 quest3487 ( 68
) moonwolfdesigns ( 481 moonwolfdesigns ( 481 moonwolfdesigns ( 481
)
)
)
)
)
$110.25
$108.35
$102.75
$100.25
$100.00
$95.00
$90.00
Aug 21 03 07:48:01 PDT
Aug 21 03 08:28:58 PDT
Aug 21 03 07:25:57 PDT
Aug 21 03 07:19:48 PDT
Aug 21 03 07:25:43 PDT
Aug 21 03 07:25:30 PDT
Aug 21 03 07:25:11 PDT
B
Figure 1 : Partial bid history for an eBay auction . The top includes summary information on the auction format , the seller and the item sold ; the bottom includes the detailed history of the bidding . Notice that the bids are ordered by descending bidamounts , not chronologically . Since the current highest bid is not revealed , later bids can be lower than earlier ones . bid information is possible using eBays increment table3 . In the remainder of this paper we use the current price series for our analyses . We will refer to it as the “ live bids . ”
2.4 Data Challenges Online auction data arrive with many challenges that are not handled well by traditional forecasting methods . The first is the extremely unevenly distributed measurements . That is , the number and location of bids varies drastically from one auction to another . Consider Figure 2 . We can see that some bid histories are very dense at the auction end , while others are much sparser , and , in addition , the overall number of bids per auction can vary widely between none in some auctions , and more than 100 in others . Traditional forecasting methods such as exponential smoothing assume that the data are measured at equally spaced time intervals
3See pagesebaycom/help/basics/g bid incrementhtml
300
) $ ( e c i r
P
200
100
0 0
300
200
100
) $ ( e c i r
P
0 0
2
4
6
Auction #3
300
200
100
0 0
300
200
100
2
4
6
Auction #4
2
4
Day of Auction
6
0 0
2
4
6
Day of Auction
Figure 2 : Scatterplots describing the bid history in each of 4 eBay auctions , each lasting 7 days .
( eg quarterly , monthly or weekly ) and are therefore not directly applicable .
Another challenge of fast moving markets on the internet is change and the incorporation thereof into the forecasting model . eBay ’s auctions operate in the online world , free of the barriers of geography and time . Online markets can react to stimulants in real time and therefore often experience fast change . If , for instance , demand for a particular product increases unexpectedly in one part of the world , it can affect the price of an auction that is hosted by a seller in a completely different part of the world . Even on a much smaller scale , auctions for the same product within eBay affect each other , and so do bidders within the same auction . What this suggests is that change is a typical aspect of eBay ’s online auction prices , together with varying dynamics that lead to that change . However , since traditional forecasting methods do not incorporate the dynamics , they lead to information loss . We will use a novel statistical approach , called functional data analysis , to accommodate these challenges .
03
3 . FUNCTIONAL DATA MODELS The technological advancements in measurement , collection , and storage of data have led to more and more complex data structures . Examples include measurements of individuals’ behavior over time , digitized 2 or 3 dimensional images of the brain , and recordings of 3 or even 4 dimensional movements of objects travelling through space and time . Such data , although recorded in a discrete fashion , are usually thought of as continuous objects represented by functional relationships . This gives rise to functional data analysis ( FDA ) where the center of interest is a set of curves , shapes , objects , or , more generally , a set of functional observations . This is in contrast to classical statistics where the interest centers around a set of data vectors . In that sense , functional data are not only different from the datastructure studied in classical statistics , but actually generalize it . Many of these new data structures call for new statistical methods in order to unveil the information that they carry .
3
3.1 Recovery of the Price Curve A functional data set consists of a collection of continuous functional objects such as a set of continuous curves describing the temperature changes over the course of a year , or the price increases in an online auction . Despite their continuous nature , limitations in human perception and measurement capabilities allow us to observe these curves only at discrete time points . Thus , the first step in a typical functional data analysis is to recover , from the observed data , the underlying continuous functional object ( eg [ Ramsay and Silverman , 2002 , Ramsay and Silverman , 2005] ) . This is usually done with the help of smoothing techniques .
A variety of different smoothers exist . One very flexible and computational efficient choice is the penalized smoothing spline [ Ruppert et al . , 2003 ] . Let τ1 , . . . , τL be a set of knots . Then , a polynomial spline of order p is given by f ( t ) = β0 + β1t + · · · + βptp +
L
Xl=1
βpl(t − τl)p + ,
( 1 ) where u+ = uI[u≥0 ] denotes the positive part of the function u . Define the roughness penalty
PENm(t ) = Z {Dmf ( t)}2dt ,
( 2 ) where Dmf , m = 1 , 2 , 3 , . . . , denotes the mth derivative of the function f . The penalized smoothing spline f minimizes the penalized squared error
PENSSλ,m = Z {y(t ) − f ( t)}2dt + λPENm(t ) ,
( 3 ) where y(t ) denotes the observed data at time t and the smoothing parameter λ controls the trade off between datafit and smoothness of the function f . Using m = 2 in ( 3 ) leads to the commonly encountered cubic smoothing spline . Other possible smoothers include the use of B splines or radial basis functions [ Ruppert et al . , 2003 ] .
The smoothing parameter λ controls the variability of the curve . If λ is chosen very small then f will closely trace the observed data but show large local variability . On the other hand , as λ increases , f gets closer to a straight line . Automatic methods for choosing λ include generalized crossvalidation ( GCV ) . Applying GCV to the auction data results in curves that , after visual inspection , do not describe the evolution of prices well . We apply a mean squared error criterion instead which suggests a value of λ = 50 [ Wang et al . , 2005 ] .
The choice of the knots influences the resulting smoothing spline . Our goal is to obtain smoothing splines that represent , as much as possible , the price formation process . A large proportion of bids arrive in the final moments of the auction [ Roth and Ockenfels , 2002 , Bajari and Hortacsu , 2003a , Shmueli et al . , 2005 ] . In order to capture this increased bidding activity , we place a larger number of knots at the auction end . Specifically , our selection of knots mirrors the distribution of bid arrivals : For a 7 day auction , we place 7 equally spaced knots every 24 hours along the first 6 days of the auction , that is , τl = 0 , . . . , 6 ; l = 1 , . . . , 7 . Then , over the first 18 hours of the final day , we place knots over shorter intervals of 6 hours each , that is , τ8 = 6.25 , τ9 = 6.5 , and τ10 = 675 And finally , we divide the last 6 hours of the auction into 4 intervals of 1 1/2 hours each , letting τ11 = 6.8125 , τ12 = 6.8750 , τ13 = 6.9375 , and τ14 = 70000 We also investigate different knot allocations with fewer or larger total number of knots and find our results to be little affected . Similar rationale leads to knot allocations for auctions of different length .
The process of going from observed data to functional data is now as follows . For a set of n functional objects , let tij denote the time of the jth observation ( 1 ≤ j ≤ ni ) on the ith object ( 1 ≤ i ≤ n ) , and let yij = y(tij ) denote the corresponding measurements . Let fi(t ) denote the penalized smoothing spline fitted to the observations yi1 , . . . , yini . Then , functional data analysis is performed on the continuous curves fi(t ) rather than on the noisy observations yi1 , . . . , yini . That is , after creating the functional objects fi(t ) , the observed data yi1 , . . . , yini are discarded and subsequent modeling , estimation and inference is based on the fi(t ) ’s only . For ease of notation we will suppress the subscript i and write yt = f ( t ) for the functional object and D(m)yt = f ( m)(t ) for its mth derivative .
Consider Figure 3 for illustration . The circles in the top panel of Figure 3 correspond to a scatterplot of the bids ( on log scale ) versus their timing . The continuous curve in the top panel shows a smoothing spline of order m = 4 using a smoothing parameter λ = 50 .
Current Price
7
.
3
5
.
3
3
.
3
5 1
.
0
0 1
.
0
5 0
.
0
0 0
.
0
4 0
.
0
0 0
.
0
6 0
.
0 − e c i r
P − g o L e c i r
P − g o L f o e v i t a v i r e D t s r i F e c i r
P − g o L f o e v i t a v i r e D d n o c e S
0
1
2
3
4
5
6
7
Day of Auction
Price Velocity
0
1
2
3
4
5
6
7
Day of Auction
Price Acceleration
0
1
2
3
4
5
6
7
Day of Auction
Figure 3 : Current price , price velocity ( first derivative ) and price acceleration ( second derivative ) for a selected auction . The first graph shows the actual bids together with the fitted curve .
3.2 Curve Derivatives and Price Dynamics One of our modeling goals is to capture the dynamics of an auction . While yt describes the magnitude of the current price , it does not reveal the dynamics of how fast the price is changing or moving . Attributes that we typically associate with a moving object are its velocity ( or its speed )
4 as well as its acceleration . Notice that we can compute the price velocity and price acceleration via the first and second derivatives , D(1)yt and D(2)yt , respectively .
Consider again Figure 3 . The middle panel corresponds to the price velocity , D(1)yt . Similarly , the bottom panel shows the price acceleration , D(2)yt . The price velocity has several interesting features . It starts out at a relatively high mark which is due to the starting price that the first bid has to overcome . After the initial high speed , the price increase slows down over the next several days , reaching a value close to zero mid way through the auction . A close to zero price velocity means that the price increase is extremely slow . In fact , there are no bids between the beginning of day 2 and the end of day 4 and the price velocity reflects that . This is in stark contrast to the price increase on the last day where the price velocity picks up pace and the price jumps up!
The bottom panel in Figure 3 represents price acceleration . Acceleration is an important indicator of dynamics since a change in velocity is preceded by a change in acceleration . In other words , a positive acceleration today will result in an increase of velocity tomorrow . Conversely , a decrease in velocity must be preceded by a negative acceleration ( or deceleration ) . The bottom panel in Figure 3 shows that the price acceleration is increasing over the entire auction duration . This implies that the auction is constantly experiencing forces that change its price velocity . The price acceleration is flat during the middle of the auction where no bids are placed . With every new bid , the auction experiences new forces . The magnitude of the force depends on the size of the price increment . Smaller price increments will result in a smaller force . On the other hand , a large number of small consecutive price increments will result in a large force . For instance , the last 2 bids in Figure 3 arrive during the final moments of the auction . Since the increments are relatively small , the price acceleration is only moderate .
3.3 Heterogeneity of Price Dynamics Price dynamics can be quite heterogeneous , even for very similar auctions . Figure 4 shows the price velocity ( left panel ) and acceleration ( right panel ) for a sample of 180 auctions on the same product4 . Notice that even though the market value of the product was the same for all of the 180 auctions , the auctions exhibited very different price dynamics . For instance , we can see that while the price acceleration increased towards the auction end in some auctions , it decreased in others . Differences are also visible in the middle and at the beginning of the auction . In fact , clustering of the price curves would show 3 distinct groups of price dynamics [ Jank and Shmueli , 2005 ] . These differences suggest that dynamics could be a powerful predictor for forecasting the final price . In the next section we develop a method that , among other auction related information , also incorporates the price dynamics into the forecasting model .
4 . DYNAMIC FUNCTIONAL FORECAST
ING MODEL
4.1 Static versus Dynamic Forecasts
Price Velocity
Price Acceleration e c i r
P − g o L f o e v i t a v i r e D t s r i F
5
.
1
0 1
.
5
.
0
0
.
0 e c i r
P − g o L f o e v i t a v i r e D d n o c e S
5
.
1
0
.
1
5 0
.
0
.
0
5
.
0 −
0
1
2
3
4
5
6
7
0
1
2
3
4
5
6
7
Day of Auction
Day of Auction
Figure 4 : Price velocity and price acceleration for a sample of 180 auctions for the same product .
As pointed out earlier , the goal is to develop a dynamic forecasting model . By dynamic we mean a model that operates in the live auction and forecasts price at a future time point of the ongoing auction . This is in contrast to a static forecasting model which makes prediction only about the final price , and which takes into consideration only information available before the start of the auction ( eg [ Ghani and Simmons , 2004 ] , [ Ghani , 2005 ] , [ Lucking Reiley et al . , 2000 ] , [ Bajari and Hortacsu , 2003b] ) . Consider Figure 5 for illustration . Assume that we observe the price path from the start of the auction until time t ( solid black line ) . We now want to forecast the continuation of this price path ( broken grey lines , labelled “ A ” , “ B ” , and “ C ” ) . The difficulty in producing this forecast is the uncertainty about the price dynamics in the future . If the dynamics level off , then the price increase slows down and we might see a price path similar to A . If the dynamics remain steady , the price path might look like the one in B . Or , if the dynamics sharply increase , then a path like the one in C could be the consequence . Either way , knowledge of the future price dynamics appears to be a key factor!
Our dynamic forecasting model consequently consists of two parts : First , we develop a model for the price dynamics . Then , using estimated dynamics , together with other relevant covariates , we derive an econometric model of the final price and use it to forecast the outcome of an auction .
4In this example , we have 180 auctions Palm PDA handheld devices , sold in April and May of 2003 .
5
$100
P r i c e
$50
$0
1
Predicted Price Path
C
B
A
Observed Price Path
2
3
4
D a y
5 t
6
7
Figure 5 : Schematic of the dynamic forecasting model of an ongoing auction .
4.2 Modeling and Forecasting Dynamics We pointed out in Section 3.3 that one of the main characteristics of online auctions is their rapid change in dynamics . Since change in the p + 1st derivative precedes change in the pth derivative ( eg change in acceleration precedes change in velocity ) , we make use of derivative information for forecasting . In the following , we develop a model to estimate and forecast an auction ’s price dynamics .
Let again D(m)yt denote the mth derivative of the price yt at time t . We model the derivative curve as a polynomial in time t with autoregressive ( AR ) residuals ,
D(m)yt = a0 + a1t + · · · + aktk + αx(t ) + ut ,
( 4 ) where x(t ) is a vector of covariates , α is a corresponding vector of parameters , and ut follows an autoregressive model of order p : ut = φ1ut−1 + φ2ut−2 + · · · + φput−p + εt , εt ∼ N ( 0 , σ2 ) .
( 5 )
We allow ( 4 ) to depend on the vector x(t ) , which results in a very flexible model that can accommodate different dynamics due to differences in the auction format or the product category . Details on x(t ) are deferred to Section 44
We estimate model ( 4 ) from the training sample . Estimation is done in two steps : First , we estimate the parameters a1 , . . . , ak and α . Then , using the estimated residuals ˆut , we estimate the values of φ1 , . . . , φp .
Forecasting is also done in two steps . Let 1 ≤ t ≤ T denote the observed time periods and let T + 1 , T + 2 , T + 3 , . . . denote time periods we wish to forecast . We first forecast the next residual via
˜uT +1|T = ˜φ1uT + ˜φ2uT −1 + · · · + ˜φpuT −p+1 .
( 6 )
6
Using this forecast , we can predict the derivative at the next time point T + 1 via
D(m ) ˜yT +1|T = ˆa0 + ˆa1(T + 1 ) + · · · + ˆak(T + 1)k + ˆαx(T + 1 ) + ˜uT +1|T .
( 7 )
In a similar fashion , we can predict the derivative l steps ahead :
D(m ) ˜yT +l|T = ˆa0 + ˆa1(T + l ) + · · · + ˆak(T + l)k + ˆαx(T + l ) + ˜uT +l|T
( 8 )
4.3 Modeling and Forecasting Price After forecasting the price dynamics , we use these forecasts to predict the auction price over the next time periods up to the auction end . Many factors can affect the price in an auction such as information about the auction format , the product , the bidders and the seller [ LuckingReiley et al . , 2000 ] . Let x(t ) denote the vector of all such factors . Details on x(t ) are again deferred to Section 44 Let d(t ) = ( D(1)yt , D(2)yt , . . . , D(p)yt ) denote the vector of price dynamics , ie the vector of the first p derivatives of y at time t . The price at t can be affected by the price at t − 1 and potentially also by its values at times t − 2 , t − 3 , etc . Let l(t ) = ( yt−1 , yt−2 , . . . , yt−q ) denote the vector of the first q lags of yt . We then write the general dynamic forecasting model as follows : yt = βx(t ) + γd(t ) + δl(t ) + ǫt
( 9 ) where β , γ and δ denote the parameter vectors and ǫt ∼ N ( 0 , σ2 ) .
We use the estimated model ( 9 ) to predict the price at T + l as
˜yT +l|T = ˆβx(T + l ) + ˆγd(T + l ) + ˆδl(T + l )
( 10 )
Influence Weighted Predictors
4.4 As pointed out in Section 4.3 , many factors can affect the current price yt in an online auction . Model ( 9 ) distinguishes between three groups of factors , represented by the three model components x(t ) , d(t ) and l(t ) , respectively . Both l(t ) and d(t ) are derived directly from price , either through its lag or through its dynamics . Only x(t ) contains factors that are not derived from yt directly such as information about the auction format , the product , the bidders and the seller .
All factors related to x(t ) can be further divided into timevarying and time constant factors . For instance , the seller ’s reputation , the opening bid , or the product ’s features all potentially affect the price of an auction . However , all of these factors are time constant in the sense that they are available before the start of the auction and do not change over the auction ’s progression . This is different for other factors . The number of bids is zero at the auction start and increases with every new bid . Similarly , the number of bidders increases or decreases depending on whether new bidders arrive or old bidders drop out . The combining theme of these two latter factors is that they experience change throughout the auction and we therefore refer to them as time varying variables . In short , time varying variables experience change over time and we emphasize this by writing x(t ) . On the other hand , time constant variables remain constant and are consequently referred to as x , independent of time .
We want to use both time varying and time constant variables to predict price . There is , however , a technical complication in using time constant variables in a forecasting model such as in ( 9 ) : The least squares estimation of x ( independent of t ) on yt ( dependent of t ) is not defined! The problem is relatively uncommon in traditional time series analysis since it is typically only meaningful to include a predictor into an econometric model if the predictor itself carries time varying information . However , the situation is different in the context of forecasting online auctions and may merit the inclusion of certain time constant information . For instance , we pointed out above that the opening bid remains constant over the entire auction duration . However , the opening bid may carry valuable information for predicting price of the ongoing auction . In fact , economic theory suggests that bidders derive information from the opening bid about their own valuation , but the impact of this information decreases as the auction progresses ( eg [ Shmueli and Jank , 2006] ) . What this suggests is that the opening bid influences bidders’ valuations and , therefore , also influences the price! What this also suggests is that the opening bid should be weighted according to its influence during different stages of the auction . This gives rise to influence weighted predictors .
We derive influence weighted predictors using functional regression analysis . Consider Figure 6 . The goal is to derive , from the time constant variable x , a new variable ˜x(t ) that accounts for the varying influence of x as the auction progresses . To that end , let yi(t ) denote the price evolution in the ith auction , 1 ≤ i ≤ n . Let xi denote the value of a static predictor variable associated with auction i . Let Y ( t ) = ( y1(t ) , y2(t ) , . . . , yn(t ) ) denote the set of all price curves and let X = ( x1 , x2 , . . . , xn ) denote the vector of all values for that static variable . We want to measure the impact of X on Y ( t ) . In the previous example , if X denotes the opening bid , then the goal is to measure the impact of the opening bid on the price curve at each time t . This can be done with the help of functional regression analysis which estimates the model
Y ( t ) = α(t ) + β(t)X + ǫ(t )
( 11 )
( see eg [ Ramsay and Silverman , 2005 ] for estimation details ) . Then the estimated slope function ˜β(t ) measures the average influence of X on Y ( t ) at each time t .
The implication of this is now as follows : for each timeconstant predictor x , we measure its influence on the price curve ( or on its derivatives ) at t via functional regression analysis as described above . This yields the weight function ˜β(t ) . We combine x and ˜β(t ) and compute the influenceweighted version of x as
˜x(t ) := x ˜β(t ) .
( 12 )
˜x(t ) now carries time varying information and can consequently be used in the same way as time varying predictor variables .
$100
$50
P r i c e
Impact of
~ ( t)X little huge big some
$0
1
2
3
5
6
7
4
Day
Figure 6 : Schematic of the reweighted variable via functional regression .
Table 1 : Categories of 768 book auctions . The second column gives the number of auctions per category . The third and fourth column show average and standard deviation of price per category .
Book Category Antiquarian & Collect . Audiobooks Children ’s Books Fiction Books Magazines Nonfiction Books Textbooks & Educ . Other
Count Mean $89.90 $18.57 $12.89 $7.90 $11.87 $15.63 $19.62 $36.48
84 46 102 162 58 239 36 41
StDev $165.82 $22.48 $18.03 $9.34 $9.43 $52.83 $37.46 $80.31
5 . EMPIRICAL RESULTS 5.1 Data Our data set is diverse and contains 768 eBay book auctions from October 2004 . All auctions are 7 days long and span a variety of categories ( see Table 1 ) . Prices range from $0.10 to $999 and are , not unexpectedly , highly skewed ( see price distribution in Figure 7 ) . Prices also vary significantly across the different book categories ( see mean and standard deviation of price per category in Table 1 ) . This data set is challenging due to its diversity in products and price . We use 70 % of these auctions ( or 538 auctions ) for training purposes . The remaining 30 % ( or 230 auctions ) are kept in the validation sample .
5.2 Estimated Model Our model building investigations suggest that among all price dynamics only velocity f ′(t ) is significant for forecasting price in our data . We thus estimate model D(m)yt in ( 4 ) only for m = 1 . We do so in the following way . Using a quadratic polynomial ( k = 2 ) in time t and influenceweighted predictor variables for book category ( ˜x1(t ) ) and shipping costs ( ˜x2(t ) ) results in an AR(1 ) process for the
7 y c n e u q e r F
0 0 6
0 0 5
0 0 4
0 0 3
0 0 2
0 0 1
0
Price Distribution
Auction # 5
Auction # 11 l y t i c o e V e c i r
P
7 0
.
6 0
.
5 0
.
4 0
. l y t i c o e V e c i r
P
8 0
.
6
.
0
4 0
.
2 0
. l y t i c o e V e c i r
P
2
.
1
8 0
.
4 0
.
6.2
6.4
6.6
6.8
7.0
6.2
6.4
6.6
6.8
7.0
Auction # 52
Auction # 36 true price velocity forecast price velocity l y t i c o e V e c i r
P
6 1
.
2 1
.
8 0
.
4 0
.
0
50
100
Price
150
200
Figure 7 : Distribution of price across the different book categories .
6.2
6.4
6.6
6.8
7.0
6.2
6.4
6.6
6.8
7.0 residuals ut ( ie p = 1 in ( 5) ) . The rationale behind using book category and shipping costs in model ( 4 ) is that we would expect the dynamics to depend heavily on these two variables . For instance , the category of antiquarian and collectible books typically contains items that are of rare nature and that appeal to a market not as price sensitive and with a strong interest in obtaining the item . This is also reflected in the large average price and even larger variability for items in this category ( Table 1 ) . The result of these market differences may well be a different price evolution and thus a difference in price dynamics . A similar argument applies to the shipping costs . Shipping costs are determined by the seller and act as a “ hidden ” price premium . Bidders are often deterred by excessively high shipping costs and as a consequence auctions may experience differences in the price dynamics .
Table 2 summarizes the estimated coefficients averaged across all auctions from the training set . We can see that both book category and shipping costs result in significantly different price dynamics . Figure 9 illustrates the performance of the velocity model on 4 sample auctions .
Table 2 : Estimates for the velocity model D(1)yt in ( 4 ) . The second column reports the estimated parameter values and the third column reports the associated significance levels . Values are averaged across the training set .
Predictor Intercept t t2 Book Category ˜x1(t ) Shipping Costs ˜x2(t ) ut
Coeff P Val 0.041 0.004 0.055 0.012 0.041 0.004 0.038 1.418 0.036 1.684 1.442
After modeling the price dynamics we estimate the price
8
Figure 8 : Performance of the velocity model for 4 sample auctions . The solid line is the true pricevelocity over the last auction day , while the dashed line shows the corresponding forecast . forecasting model ( 9 ) . Recall that ( 9 ) contains three model components , x(t ) , d(t ) and l(t ) . Among all reasonable pricelags only the first lag is influential , so we have l(t ) = yt−1 . Also , as mentioned earlier , among the different price dynamics we only find the velocity to be important , so d(t ) = D(1)yt . The first two rows of Table 3 display the corresponding estimated coefficients .
Notice that both l(t ) and d(t ) are predictor variables derived from price , either from its lag or from its dynamics . We also use 8 non price related predictor variables x(t ) = ( x1(t ) , x2(t ) , x3(t ) , ˜x4(t ) , ˜x5(t ) , ˜x6(t ) , ˜x7(t ) , ˜x8(t))T . Of those , the predictors ˜x4(t ) , . . . , ˜x8(t ) are derived from time constant variables and weighted by their influence on the price evolution as described in Section 44 Specifically , the 8 predictor variables correspond to the average rating of all bidders until time t ( which we refer to as the current average bidder rating at time t and denote as x1(t) ) , the current number of bids at time t ( x2(t) ) , and the current winner rating at time t ( x3(t) ) . These first 3 predictor variables are time varying . We also consider 5 time constant predictors : the opening bid ( ˜x4(t) ) , the seller rating ( ˜x5(t) ) , the seller ’s positive ratings only ( ˜x6(t) ) , the shipping costs ( ˜x7(t) ) , and the book category ( ˜x8(t) ) , where ˜xi(t ) again denotes the influenceweighted variables .
Table 3 shows the estimated parameter values for the full forecasting model . It is interesting to note that book category and shipping costs have low statistical significance . The reason for this is that their effects have likely already been captured satisfactorily in the model for the price velocity . Also notice that the model is estimated on the log scale for better model fit . That is , the response yt and all numeric predic tors ( ˜x1(t ) , . . . , ˜x7(t ) ) are log transformed . The implication of this lies in the interpretation of the coefficients . For instance , the value 0.051 implies that for every 1 % increase in opening bid , the price increases by about 0.05 % , on average .
Table 3 : Estimates for the price forecasting model ( 9 ) . The first column indicates the part of the model design that the predictor is associated with . The third column reports the estimated parameter values and the fourth column reports the associated significance levels . Values are again averaged across the training set .
Intercept
Des Predictor d(t ) Price Velocity D(1)yt l(t ) Price Lag yt−1 x(t ) x(t ) CurAvgBidRating x1(t ) x(t ) CurNumbBids x2(t ) x(t ) CurWinRating x3(t ) x(t ) Opening Bid ˜x4(t ) x(t ) Seller Rating ˜x5(t ) x(t ) Pos Seller Rating ˜x6(t ) x(t ) Shipping Cost ˜x7(t ) x(t ) Book Category ˜x8(t )
Coeff P Val 0.049 0.592 4.824 0.044 0.110 5.909 0.012 0.414 0.027 0.008 0.027 0.197 0.051 0.031 0.070 11.534 0.093 1.518 0.215 0.008 3.950 0.107
5.3 Forecasting Accuracy We estimate the forecasting model on the training data and use the validation data to investigate its forecasting accuracy . To that end we assume that for the 230 auctions in the validation data we only observe the price until day 6 and we want to forecast the remainder of the auction . We forecast price over the last day in small increments of 01 That is , from day 6 we forecast day 6.1 , or the price after the first 2.4 hours of day 7! From day 6.1 we forecast day 6.2 and so on until the auction end , at day 7 . The advantage of an incremental approach is the possibility of feedback based forecast improvements . That is , as the auction progresses over the last day , the true price level can be compared with its forecasted level and deviations can be channelled back into the model for real time forecast adjustments .
Figure 10 shows the forecasting accuracy on the validation sample . We determine forecasting accuracy as the mean absolute percentage error ( MAPE ) , that is
MAPEt =
1
230
230
Xi=1
¯¯¯¯ i = 1 , . . . , N ; t = 6.1 , . . . , 7 ,
( Predicted Pricet,i − True Pricet,i )
True Pricet,i
,
¯¯¯¯ where i denotes the ith auction in the validation data . The solid line in Figure 10 corresponds to MAPE for our dynamic forecasting model . We benchmark the performance of our method against double exponential smoothing . Double exponential smoothing is a popular short term forecasting method which assigns exponentially decreasing weights as the observation become less recent and also takes into account a possible ( changing ) trend in the data . Notice that this method cannot be applied directly to the raw bid data due to its unevenly spacing . Functional objects once again come to the rescue , ie we apply double exponential
9 e c i r p e c i r p
1 1
9
8
7
6
9
8
7
6
5
Auction # 5
Auction # 11 e c i r p
0 8
0 7
0 6
0 5
0 4
6.2
6.4
6.6
6.8
7.0
6.2
6.4
6.6
6.8
7.0
Auction # 36
Auction # 52 functional price curve forecast price curve e c i r p
4 1
0 1
8
6
6.2
6.4
6.6
6.8
7.0
6.2
6.4
6.6
6.8
7.0
Figure 9 : Performance of the forecasting model for the 4 sample auctions from above . The solid line is the true price curve over the last auction day , while the dashed line shows the corresponding forecast . smoothing to a grid of evenly spaced values from the functional curve . The dashed line in Figure 10 corresponds to MAPE for double exponential smoothing .
We notice that for both approaches , MAPE increases as we predict further into the future . However , while for our dynamic model MAPE increases to only about 5 % at the auction end , exponential smoothing incurs an error of over 40 % . This difference in performance is relatively surprising , especially given that exponential smoothing is a wellestablished ( and powerful ) tool in time series analysis . One of the reasons for this underperformance is the rapid change in price dynamics . Consider again Figure 4 . We see that an auction ’s dynamics can be quite variable , especially at the auction end . Exponential smoothing , despite the ability to accommodate for changing trends in the data , cannot account for the price dynamics . This is in contrast to our dynamics forecasting model which explicitly models price velocity . As pointed out earlier , a change in a function ’s velocity precedes a change in the function itself , so it seems only natural that modeling the dynamics makes a difference for forecasting the final price .
6 . CONCLUSIONS In this paper we develop a dynamic price forecasting model that operates during the live auction . Forecasting price in online auctions can have benefits to different auction parties . For instance , price forecasts can be used to dynamically score auctions for the same ( or similar ) item by their predicted price . On any given day , there are several hundred , or even thousand , open auctions available , especially for very popular items such as Apple iPods or Microsoft Xboxes . Dynamic price scoring can lead to a ranking of auctions with
MAPE forecasting model exponential smoothing
4
.
0
3
.
0
2
.
0
1
.
0
6.2
6.4
6.6
6.8
7.0
Figure 10 : Mean percentage error ( MAPE ) of the forecasted price over the last auction day . The solid line corresponds to our dynamic forecasting model ; the dashed line correspond to double exponential smoothing . the lowest expected price which , subsequently , can help bidders make decisions about which auctions to participate in . On the other hand , auction forecasting can also be beneficial to the seller or the auction house . For instance , the auction house can use price forecasts to offer insurance to the seller . This is related to the idea by [ Ghani , 2005 ] who suggest offering sellers an insurance that guarantees a minimum selling price . In order to do so , it is important to correctly forecast the price , at least on average . While Ghani ’s method is static in nature , our dynamic forecasting approach could potentially allow more flexible features like an “ Insure It Now ” option , which would allow sellers to purchase an insurance either at the beginning of the auction , or during the live auction ( coupled with a time varying premium ) . Price forecasts can also be used by eBay driven businesses that provide brokerage services to buyers or sellers ( see also our earlier footnote about secondary markets for eBay based derivatives ) .
And a final comment : In order for dynamic forecasting to work in practice , it is important that the method is scalable and efficient . We want to point out that all components of our model are based on linear operations estimating the smoothing spline in Section 3 or fitting the AR model in Section 4 are both done in ways very similar to least squares . In fact , the total runtime ( estimation on training data plus validation on holdout data ) for our dataset ( over 700 auctions ) is less than a minute , using program code that is not ( yet ) optimized for speed .
7 . REFERENCES
Bajari , P . and Hortacsu , A . ( 2003a ) . Winner ’s curse , reserve prices and endogenous entry : Empirical insights from ebay . RAND Journal of Economics , 34(2):329–355 .
10
Bajari , P . and Hortacsu , A . ( 2003b ) . The winner ’s curse , reserve prices and endogenous entry : Empirical insights from ebay auctions . Rand Journal of Economics , 3:2:329–355 .
Ghani , R . ( 2005 ) . Price prediction and insurance for online auctions . In the Proceedings of the 11th ACM SIGKDD International Conference on Knowledge Discovery and Data Mining , Chicago , IL , 2005 .
Ghani , R . and Simmons , H . ( 2004 ) . Predicting the end price of online auctions . In the Proceedings of the International Workshop on Data Mining and Adaptive Modelling Methods for Economics and Management ( held in conjunction with the 15th European Conference on Machine Learning ECML/PKDDD 2004 ) , Pisa , Italy , 2004 .
Jank , W . and Shmueli , G . ( 2005 ) . Profiling price dynamics in online auctions using curve clustering . Technical report , Smith School of Business , University of Maryland .
Krishna , V . ( 2002 ) . Auction Theory . Academic Press , San Diego .
Lucking Reiley , D . , Bryan , D . , Prasad , N . , and Reeves , D . ( 2000 ) . Pennies from ebay : the determinants of price in online auctions . Technical report , University of Arizona .
Ramsay , J . O . and Silverman , B . W . ( 2002 ) . Applied functional data analysis : methods and case studies . Springer Verlag , New York .
Ramsay , J . O . and Silverman , B . W . ( 2005 ) . Functional Data Analysis . Springer Series in Statistics . Springer Verlag New York , 2nd edition .
Roth , A . E . and Ockenfels , A . ( 2002 ) . Last minute bidding and the rules for ending second price auctions : Evidence from ebay and amazon auctions on the internet . The American Economic Review , 92(4):1093–1103 .
Ruppert , D . , Wand , M . P . , and Carroll , R . J . ( 2003 ) . Semiparametric Regression . Cambridge University Press , Cambridge .
Shmueli , G . and Jank , W . ( 2006 ) . Modeling the Dynamics of Online Auctions : A Modern Statistical Approach . In Economics , Information Systems & Ecommerce Research II : Advanced Empirical Methods , Part of the Advances in Management Information Systems Series . ME Sharpe , Armonk , NY . Forthcoming .
Shmueli , G . , Russo , R . P . , and Jank , W . ( 2005 ) . The Barista : A model for bid arrivals in online auctions . Technical report , Smith School of Business , University of Maryland .
Wang , S . , Jank , W . , and Shmueli , G . ( 2005 ) . Forecasting ebay ’s online auction prices using functional data analysis . Technical report , Smith School of Business , University of Maryland .
