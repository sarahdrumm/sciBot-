Unified Entity Search in Social Media Community∗
Ting Yao
Yuan Liu
City University of Hong Kong
Ricoh Software Research
Kowloon , Hong Kong tingyaoustc@gmailcom
Center Co . , Ltd .
Beijing , P . R . China yuanliuustc@gmailcom
Chong Wah Ngo
Tao Mei
City University of Hong Kong
Microsoft Research Asia
Kowloon , Hong Kong cscwngo@cityueduhk
Beijing , P . R . China tmei@microsoft.com
ABSTRACT The search for entities is the most common search behavior on the Web , especially in social media communities where entities ( such as images , videos , people , locations , and tags ) are highly heterogeneous and correlated . While previous research usually deals with these social media entities separately , we are investigating in this paper a unified , multilevel , and correlative entity graph to represent the unstructured social media data , through which various applications ( eg , friend suggestion , personalized image search , image tagging , etc . ) can be realized more effectively in one single framework . We regard the social media objects equally as “ entities ” and all of these applications as “ entity search ” problem which searches for entities with different types . We first construct a multi level graph which organizes the heterogeneous entities into multiple levels , with one type of entities as vertices in each level . The edges between graphs pairwisely connect the entities weighted by intra relations in the same level and inter links across two different levels distilled from the social behaviors ( eg , tagging , commenting , and joining communities ) . To infer the strength of intrarelations , we propose a circular propagation scheme , which reinforces the mutual exchange of information across different entity types in a cyclic manner . Based on the constructed unified graph , we explicitly formulate entity search as a global optimization problem in a unified Bayesian framework , in which various applications are efficiently realized . Empirically , we validate the effectiveness of our unified entity graph for various social media applications on millionscale real world dataset .
Categories and Subject Descriptors H33 [ Information Search and Retrieval ] : Retrieval models
General Terms Algorithms , Performance , Experimentation .
∗This work was performed when Ting Yao was visiting Microsoft Research Asia as a research intern .
Copyright is held by the International World Wide Web Conference Committee ( IW3C2 ) . IW3C2 reserves the right to provide a hyperlink to the author ’s site if the Material is used in electronic media . WWW’13 , May 13 17 , Rio de Janeiro , Brazil . ACM 978 1 4503 2035 1/13/05 .
Keywords Entity search , social media community , friend suggestion , image tagging , personalized image search .
1 .
INTRODUCTION
The Web is organized by entities . Entity search , that is , returning “ object ” ( eg , people , media objects , locations , products , organizations , etc . ) in response to users’ information needs , has received considerable attention recently in various research communities .
In social media communities , such as Flickr , YouTube and Facebook , people are sharing their experiences and interests through substantial amounts of various contents , such as photos , videos , people , tags , geo locations and documents , which are referred to entities in this paper . In addition , these contents are strong correlated by a wide variety of social behaviors , eg , tagging , commenting , and joining communities . With the large scale , heterogeneous and correlative sets of data available , there has been increasing expectation for mechanisms that organize and search these entities effectively and efficiently in social networks . To motivate , consider following scenarios , for user Henry who likes taking photographs at the seaside .
Scenario 1 ( friend suggestion ) : Henry wants to find friends who have the similar interests to himself . To begin with , he may use the keywords like “ seaside ” as the query to find some photos in Flickr , and then he needs to sift through the photostream ( all photos shared by a user ) of photographers one by one and dig out the interesting ones as his friends . This overall process can be unnecessarily time consuming .
Scenario 2 ( image ( geo )tagging ) : Henry sees a beautiful picture when he browses a webpage and he wants to know where this picture was taken . He may formulate some descriptive words to search similar images via web image search engines and then read through the surrounding words , but it is hard to find the duplicate images in this way due to the sheer volume of Internet images .
Scenario 3 ( personalized image search ) : Henry wants to search photos with sunrise scene . He may use “ sunrise ” as the query in a web image search engine and many images with sunrise scene are returned . But Henry prefers photos taken by the seaside , to get his expected photos he might have to go through all the images , or formulate the other keywords for hitting promising search images . This could be a very laborious process .
In these scenarios , like every user in many similar situations , Henry is looking for a particular type of entities not pages as “ relevant documents ” to read . This demand has challenged us to face a dilemma : on one hand , the proliferating data on the Internet leads to surge of research activities in social media search , for instance , personalized image search [ 12][15][19 ] , tag ranking [ 10 ] , Yahoo people search [ 20 ] , friend suggestion [ 8][14][22 ] , and ImageCLEF ( Image Retrieval in CLEF ) [ 5 ] . All of these social media searches are independent and each of them is designed especially for searching a certain type of entities ; on the other hand , in real world social media communities , these existing entities always influence each other in explicit or implicit way . As in scenarios mentioned above , people always look for entities by using the other types of entities ; that is to say , the various entity searches are essentially closely related , and the common goal is to discover the relationships among these entities . Therefore , it is more natural and efficient to develop a unified framework which can accomplish these entity searches in a single way , which directly motivates our work in this paper .
Towards this goal , we propose a multi level graph model to integrate all the entities together . The relevance of an entity for a given query is estimated by the cost of nearest navigated route . As shown in Fig 1(b ) , the red lines with arrows present a navigated route from query q to entity vb k ( will be described in Definition 1 ) in a three level graph . The cost comes from two sources , ie , intra relation between every two same types of entities in each level of graph , and inter link across different types of entities in every two levels of graphs . To leverage the two sources of the route cost , the entity search is formulated from the probabilistic perspective in a Bayesian framework . The intra relations of entities within the searching pool are modeled as a conditional prior which indicates the ranking score consistency between similar entities ; and the inter links are modeled as a likelihood which reflects the correspondence of the query and entities in searching pool . In the Bayesian framework , the entity search is formulated as maximizing the product of the conditional prior and the likelihood . The foundation of the unified entity search is the proposed circular propagation which iteratively refines the intra relations of entities , through exchanging information across different entity types in a cyclic manner . Instead of exploring similarity metrics used in existing entity search , the procedure encourages interaction among multiple entities to seek for consensus that are useful for entity search . Fig 1 illustrates the unified entity search framework based on the proposed integral multi level graph .
The main contributions of this work can be summarized as follows :
• We propose to integrate various types of entities in a multi level graph model , upon which multiple social media applications can be implemented in a single way .
• We propose the circular propagation to exchange information across different entity types in a cyclic manner . In this way , the relationships of various entities are mutually reinforced and refined .
• We explicitly formulate entity search as a global optimization problem in a Bayesian framework , which well leverages the various relationships in social media community .
The remaining sections are organized as follows . Section 2 describes the related work . Section 3 presents the integral multi level graph construction including circular propagation and its convergence property , while Section 4 formulates the problem of unified entity search and its solution over the integral graph . Section 5 takes a popular photo sharing site as an example to detail the entity graph constructed from a social media community . Section 6 provides empirical justifications , followed by the conclusions in Section 7 .
2 . RELATED WORK
We briefly group the related works into two categories : search in social media community and multi modality fusion . The former draws upon research in searching over extracted entities in social media community , and the later learns the contribution of a modality ( entity ) in social search applications .
2.1 Search in Social Media Community
There exists rich research on search in social media community , such as friend suggestion ( user search ) , image tagging ( tag search ) and personalized image search ( image search ) .
Finding potential friends with similar interest will improve photo sharing and browsing experiences in the social community . Roth et al . suggest friends based on an implicit social graph , which is formed by user interaction with contacts and groups of contacts [ 14 ] . In another work by Li [ 8 ] , user similarity is firstly mined by using location et al . history and then potential friends are recommended . As an online people search service , Yahoo people search [ 20 ] is to find friends and family with whom people have lost touch . People can employ it to search for friends using name and location or phone numbers , or search using email addresses . Attaching textual or semantic linkage to images will significantly facilitate Web image search and organization . Li et al . [ 7 ] present a real time automatic image tagging method . The method takes as input a set of labeled images and tries to learn which low level visual features correspond to higher level semantic labels . The mapping can then be applied to annotate the new unlabeled images . Similar in spirit , Chen et al . [ 1 ] propose a tag recommendation approach that directly predicts the possible tags with models learned from training data . Therefore , the approach can only recommend the tags from a predefined set . Later in [ 10 ] , Liu et al . first estimate relevance scores for the tags to images based on probability density estimation and then a random walk over a tag similarity graph is performed to refine the relevance . Based on the refined relevance , the associated tags can be ranked in a descending order of their relevance . ImageCLEF ( Image Retrieval in CLEF ) [ 5 ] aims to analyze a collection of Flickr photos in terms of their visual and/or textual features in order to detect the presence of one or more concepts . The detected concepts can then be used for the purpose of automatically annotating the images or for retrieving the best matching images to a given concept oriented query .
Generating the search results according to the modified user search intents is proved to be an effective mean for enhancing Web search experience . Lu et al . [ 12 ] utilized a co clustering method to extract latent interest dimensions , and rerank the images by coming latent interest based user
Entities in social media community
Integral multi level graph
Unified entity search bird flower tree house outdoor
Friend suggestion
Image tagging
Personalized image search sunrise
. . .
Bird Flower Animal
( a )
( b )
( c )
Figure 1 : Unified entity search framework ( For better viewing , please see original color pdf file ) . ( a ) Entities in social media community , such as tags , photos and users . ( b ) Integral multi level graph with three types of entity sets , ie , Vi , Vj and Vk : solid colorful lines in each level of graphs indicate the intra relations of entities of the same types , while dash gray lines indicate the inter links between entities of the different types ; black vertex is the query q of entity type j ( µj = 1 , µi = 0(i 6= j ) ) and red vertex is the random entity vb k to be ranked in the searching pool Vk . Shadow lines denote the links between entity vb k and the subset of entities in Vj , enclosed in the purple ellipse . Red lines with arrows present a navigated route from query q to entity vb k . ( c ) Based on the integral multi level graph , various entity searches can be formulated within a unified framework . preference and query relevance . Another typical work is performed by Xu et al . [ 19 ] , in which the overall ranking score is not only based on term similarity matching between the query and the documents but also topic similarity matching between the user ’s interests and the documents’ topics .
In short , while these approaches focus on the mining of various entities for different social media search applications , the interaction among entities is not exploited . Our work in this paper contributes by studying not only holistically exploring interaction ( or consensus ) among all the entities , but also integrating all the social media search applications in a unified framework .
2.2 Multi modality Fusion
Multi modality fusion on social media community has been intensively studied in recent years . Sang et al . [ 15 ] propose a tensor factorization model that integrates users , images and tags together for annotation prediction . With this , personalized search can be easily formulated by user specific topic modeling . In [ 22 ] , Yao et al . characterize the user relationship by combining the visual and geographic information in a contextual graph modeling . Negoescu et al . present to discover hypergroups in Flickr , ie , communities consisting of groups of Flickr groups , while such hypergroups could serve to enrich Flickr ’s traditional group search [ 13 ] . Zheng et al . provide a tensor decomposition based group recommendation model to combine semantic tags with social relation and to help people more easily engage in group activities [ 24 ] . Lin et al . model the community discovery through analysis of time varying and multi relational data in rich social media community [ 9 ] . These approaches , nevertheless , deal with the multiple modalities independently and the interaction among modalities is not exploited . In another work by Zhuang et al . [ 26 ] , social strength is measured in a two stage learning framework . The first stage is to learn the optimal fusion weights of the multiple proximity graphs for a kernel target alignment ; with the learnt kernel , the second stage is to estimate the social strength by a kernel based learning to rank approach . However , it is still implemented in supervised way , which needs expensive human effort .
3 .
INTEGRAL MULTI LEVEL GRAPH
3.1 Notation
To make our formulation more clear , we firstly define a few terms below and some are illustrated in Fig 1(b ) , an exemplary three level graph . k , v2 k , . . . , vZk
DEFINITION 1 : Represented by multi level graph model , the social network G = {Gk : k = 1 , 2 , . . . , N } consists of N graphs and each graph is represented by Gk = ( Vk , Ek ) , where k is the entity type id , Vk and Ek are sets of vertices and edges . Specifically , Vk = {v1 k } , where Zk is the number of entities in Vk ; and each edge in Ek connects two vertices , with weight function wk : Ek → ℜ+ mapping edges to nonnegative real valued weights , here we call it intra relation . For instance , wk(a , b ) measures the intrarelation strength between entities va k . The affinity matrix Wk is defined by taking wk(a , b ) as its ( a , b) element . : j , k = 1 , 2 , . . . , N } consists of links mutually connecting entities from two levels of graphs . Of entity set Vj , the subset Sj(vb j } contains M entities , which are k in entity set Vk , ie , Sj(vb linked to the entity vb k ) ⊆ Vj . The links are weighted by link function πk∽j : Lk∽j → ℜ+ mapping links to nonnegative real valued weights and we descibe it as inter link . For instance , πk∽j(b , c ) measures the
DEFINITION 2 : The link set L = {Lk∽j k and vb k ) = {v1 j , v2 j , . . . , vM inter link strength between entity vb we set πk∽k(· , · ) = 1 . k and vc j . For self link ,
3.2 Circular Propagation
To facilitate interaction among different entity relationships , we construct an integral graph , over which the circular propagation is proposed to mutual reinforce each other . Suppose there are N entity types , and thus we can have N views of relationship among these entities by constructing a N level of affinity graphs . In each level of graphs , the vertices and edges represent the entities and intra relations of them ( wk ) , respectively . The entities of different types are mutually linked with inter link ( πk∼j ) . In this way , N runs of propagations can be conducted separately on each graph to refine the intra relation of N entity type . The spirit of circular propagation is to encourage entity interaction in a way that an entity starts propagation by using the affinity graph of another entity , while preserving its original estimated intra relation measures . By arranging the N entities linearly , such that the k th order entity uses the graph of the ( k − 1) th order entity , this forms a circular ring that each entity , once completing propagation , will propagate the new result to influence its next linked entities .
Let wk(a , b ) ≡ wab k , πk∽j(b , c ) ≡ πbc k∽j , the circular propa gation is formulated as following :
( t )
( t ) wab 1 wab 2
( t ) wab k
( t ) wab
N −1
( t )
1∼N wij N 2∼1 wij 1 · · · k∼k−1 wij · · ·
= θ1Pij πai = θ2Pij πai = θkPij πai = θN −1Pij πai = θNPij πai
( 1 − θN −1 ) wab
( t−1 )
πbj 1∼N + ( 1 − θ1 ) wab
( 0 )
1 ( 0 )
πbj 2∼1 + ( 1 − θ2 ) wab
2
( t )
πbj k∼k−1 + ( 1 − θk ) wab k
( 0 ) k−1
N −1∼N −2 wij
N −2
( t )
πbj N −1∼N −2+
( 0 )
N −1
( t )
 
 
( t )
N −1 wab N
N ∼N −1 wij
πbj N ∼N −1 + ( 1 − θN ) wab N ( 1 ) where the superscript ( t ) denotes the iteration , and the tradeoff parameter θk(0 6 θk 6 1 ) weights the importance of the propagated and initial estimated intra relations . Note that the first term in each equation represents information exchange from neighboring entity , while the second term is the initial similarity . In this circular propagation , the intrarelations of N entities are produced simultaneously . Instead of estimating the similarity of entities with the same type separately , the circular propagation enforces additional constraint that two entities are similar if the entities of different type which are linked to them are connected strongly .
3.3 Convergence Property
Eq ( 1 ) can be expressed in a matrix form as following ,
W1 W2
( t ) = θ1Π1∼N WN ( t ) = θ2Π2∼1W1 · · ·
( t−1)Π1∼N
T + ( 1 − θ1)W(0 )
1
( t)Π2∼1
T + ( 1 − θ2)W(0 )
2
Wk
( t ) = θkΠk∼k−1Wk−1
( t)Πk∼k−1
· · ·
T + ( 1 − θk)W(0 ) k
WN −1
( t ) = θN −1ΠN −1∼N −2WN −2
( t)ΠN −1∼N −2
T +
( 1 − θN −1)W(0 ) N −1 ( t ) = θN ΠN ∼N −1WN −1
WN
T + ( 1 − θN )W(0 ) N ( 2 ) where Wk = [ wab k∽j]Zk ×Zj is affinity and link matrix respectively , correspondingly composed k ]Zk×Zk and Πk∽j = [ πbc
( t)Πk∼k−1 of propagated intra relations and inter link . Circular propagation is guaranteed to converge for having the following property : lim t→∞
( Wk
( t+1 ) − Wk
( t ) ) = 0
( 3 )
Proof :
( t+1 ) − Wk
Wk = ( θkΠk∼k−1Wk−1
( t )
− ( θkΠk∼k−1Wk−1
( t+1)Πk∼k−1 ( t)Πk∼k−1 ( t+1 ) − Wk−1
T + ( 1 − θk)W(0 ) k ) T + ( 1 − θk)W(0 ) k ) ( t))Πk∼k−1
T
= θkΠk∼k−1(Wk−1 = θkΠk∼k−1(θk−1Πk−1∼k−2Wk−2
− θkΠk∼k−1(θk−1Πk−1∼k−2Wk−2
= θkθk−1Πk∼k−1Πk−1∼k−2(Wk−2
Πk−1∼k−2
T Πk∼k−1
T
( t+1)Πk−1∼k−2 ( t)Πk−1∼k−2
T )Πk∼k−1 T T )Πk∼k−1
T
( t+1 ) − Wk−2
( t ) )
( t ) − Wk
( t−1))Πk+1∼k
= · · · = θk . . . θ1θN . . . θk+1Πk∼k−1 . . . Π1∼N ΠN ∼N −1 . . . Πk+1∼k T . . . Πk∼k−1 ( Wk = ( θk . . . θ1θN . . . θk+1Πk∼k−1 . . . Π1∼N ΠN ∼N −1 . . . Πk+1∼k)t T . . . Πk∼k−1 ( Wk ( 4 ) It is easy to see Eq ( 3 ) can be derived when each row of Πk∽k−1 is normalized to 1 , and 0 6 θN , θN −1 , , θ1 6 1 . 2
T . . . ΠN ∼N −1
T . . . ΠN ∼N −1
( 0))(Πk+1∼k
( 1 ) − Wk
T Π1∼N
T Π1∼N
T
T )t
4 . UNIFIED ENTITY SEARCH
DEFINITION 3 : The query of an entity search is repreN ]T , which corresponds sented by a vector q = [ v0 to another vector u = [ µ1 , µ2 , . . . , µN ]T , indicating the im
2 , . . . , v0
1 , v0 portance of different entity types in the query q , Pj µj = 1 .
DEFINITION 4 : The objective of an entity search ( eg , searching entities of type k ) is to give a ranking score list k ]T , which is a vector of the ranking srk = [ r1 cores , corresponding to the entity searching pool Vk , for instance , rb k is the ranking score of vb k . k , . . . , rZk k , r2
( 0 )
DEFINITION 5 : An entity search function is defined as follows , r = f ( q , Vk ) .
( 5 )
Permuting the entities according to this function is called entity search . In this paper , we formulate the entity search problem from the probabilistic perspective . Supposing the ranking score list is a random variable , entity search can be regarded as a process to derive the most probable score list given the certain entity query . From the probabilistic perspective , entity search is to derive the optimum r∗ with the maximum a posterior probability given the query q and entity searching pool Vk , r∗ k = argmaxrk Pr(rk|q , Vk ) .
( 6 )
According to Bayesian formula and the independency assumption of the query q and entity searching pool Vk , the posterior is proportional to the product of the conditional prior probability and the likelihood ,
Pr(rk|q , Vk ) ∝ Pr(rk|Vk ) × Pr(q|rk ) ,
( 7 ) where Pr(rk|Vk ) is the conditional prior of the score list given the entity searching pool Vk . Pr(q|rk ) is the likelihood , which expresses how probable the query q is given the optimal ranking score list rk . Replacing the posterior in Eq ( 6 ) with Eq ( 7 ) , we formulate the entity search as maximizing the product of a conditional prior and a likelihood , r∗ k = argmaxrk Pr(rk|Vk ) × Pr(q|rk ) .
( 8 )
For the conditional prior Pr(rk|Vk ) , we formulate it with energy function , a regularization term ,
Pr(rk|Vk ) =
1 H1 exp(−Reg(rk , Vk) ) ,
( 9 ) where H1 = Pr exp(−Reg(rk , Vk ) ) is a normalizing con stant . Reg(rk , Vk ) is defined as follows following Normalized Laplacian regularizer [ 25 ] ,
E(rk ) = Reg(rk , Vk ) + ρ × IR(q , rk ) ,
( 18 ) where the two terms on the right hand side correspond to the conditional prior and the likelihood , respectively . The ρ = H1 ρ′ is a trade off parameter to the two terms . Given H2 that the energy function in Eq ( 18 ) is quadratic , we minimize E(rk ) solving ∇E(rk ) = 0 , and have the closed form ,
ϕa(rk , Vk ) ,
( 10 ) k = ( I − ρSk)−1∆k . r∗
( 19 )
Reg(rk , Vk ) =Xa
1 H2 k −δ(q , vb where ϕa(rk , Vk ) defined over entity va visual consistency on its neighbors vb k , k for measuring the
ϕa(rk , Vk ) = wk(a , b)(
−
)2 ,
( 11 )
1
2 Xb ra k k pda rb k k pdb and da matrix form as following k = Pb wk(a , b ) . Then Eq ( 10 ) can be expressed in a
Reg(rk , Vk ) = rT k Skrk ,
( 12 ) where Sk = D−1/2 k WkD−1/2 trix with its ( a , a) element ( da row of Wk . k in which Dk is a diagonal mak ) equal to the sum of the a th
For the likelihood Pr(q|rk ) , we formulate it as a shortest paths problem on a weighted graph ,
Pr(q|rk ) = exp(−ρ′ × IR(q , rk) ) ,
( 13 ) where IR(q , rk ) =Pa(ra k))2 measures the degree of the disagreement between the ranking scores and the shortest paths in graph . H2 is the normalizing constant and ρ′ > 0 is a scaling parameter .
DEFINITION 6 :
In a shortest paths problem , for a weighted graph with entities of the same type j , the weight of path l =< vm > is the sum of the weights of its constituent edges :
, . . . , vm+n j , vm+1 j j
ηj(l ) = n
Xi=1 wj ( m + i − 1 , m + i ) .
( 14 )
The shortest part weight from va j to vb j is defined by ,
δ ′(va j , vb j ) =( min{ηj(l ) : va
∞ j l→ vb j } if ∃va j → vb j otherwise
, ( 15 ) j to vb j → vb j denotes the path from va where va j . Considering all path weights are nonnegative , we exploit Dijkstra ’s algorithm to solve the shortest paths problem in Eq ( 13 ) [ 17 ] . When the query type is different from the entities in searching pool , for example , for the path from vd k , the shortest part weight is defined by , k ) = min{πk∼j(b , c)δ ′(vd j ∈ Sj(vb j to vb j ) : vc
δ ′(vd j , vc j , vb k)} .
( 16 )
For a query q with multiple entity types , the shortest part to an entity vb k is derived in linear fusion way ,
δ(q , vb k ) =Xj then we have IR(q , rk ) =Pa(ra
µjδ ′(v0 j , vb k ) , k − δ(q , vb k))2 .
Let us further introduce a vector ∆k with its b th element δ(q , vb k ) . With Eq ( 9 ) and Eq ( 11 ) , the entity search formulation in Eq ( 8 ) is equivalent to minimizing the following
 
5 . AN EXAMPLE : FLICKR
Without loss of generality , we take the most popular photo sharing site , Flickr , as the social media platform to illustrate our multi level graph modeling , which mainly has four types of entities , ie , user ( Vu ) , photo ( Vp ) , tags ( Vt ) and geolocations ( Vg ) . It is worth noting that although we take Flickr as an example , the proposed multi level graph model can be applied to any kind of community , such as Facebook and LinkedIn . Due to the missing and noises of geo locations for most of photos , we perform the circular propagation by using the entity sets Vu , Vp and Vt as follows , similar to Eq ( 2 ) ,
Wt Wp Wu
( t ) = θtΠt∼uWu ( t ) = θpΠp∼tWt ( t ) = θuΠu∼pWp
( t−1)Πt∼u ( t)Πp∼t ( t)Πu∼p
T + ( 1 − θt)W(0 ) t T + ( 1 − θp)W(0 ) p T + ( 1 − θu)W(0 ) u
, ( 20 ) t
, W(t ) p and W(t ) where W(t ) u is the affinity matrix of tags , photos and users at the t th iteration , respectively . When t = 0 , the affinity matrixes are initial ones before propagation . Πt∼u , Πp∼t and Πu∼p denote the three link matrixes measuring the link strength of the two levels of graphs , ie , from tag graph to user graph , from photo graph to tag graph , and from user graph to photo graph . θt , θp and θu are tradeoff parameters .
5.1
Initial Intra relations • Initial user intra relation W(0 ) u In a social media community , the initial user similarity is mostly determined by people interaction [ 18 ] , including explicit interaction ( one gives comments to the other ’s photos or one ’s photos get comments from others ) and implicit interaction ( two users simultaneously give comments on the same photos ) . In addition , photos taken in near locations are often shared by the people with similar interests [ 3 ] , the intra relation wab u is defined u as : between user va u and user vb
( 0 )
( 0 ) wab u
= ( fb(a ) + fa(b ) + g(a , b ) ) × wab g ,
( 21 ) u on the photos shared by user va where fa(b ) denotes the number of the comments given by the user vb u , vice versa . g(a , b ) denotes the number of photos on which user va u and vb u simultaneously comment . wab is the relation between g user va u caused by geo locations , and it is given by u and vb
( 17 ) wab g =fl π
1 mingd(va u ) < T h u , vb else
,
( 22 ) u , vb where mingd(va u ) is the minimal geo location distance between photos of user va u , T h is a fixed threshold and π ( π > 1 ) is a positive number . In this paper , T h is set to 20km and π is set to 2 . u and vb p
• Initial photo intra relation W(0 ) We follow the approach in [ 11 ] and adopt scale invariant feature transform ( SIFT ) descriptor with a Difference of Gaussian ( DoG ) interest point detector for extracting the images’ visual patterns . The interest point is referred to as local salient patch , each associated with a 128 dimensional feature vector . We further use K means to cluster the similar patches into “ visual words , ” and use Bag of Word ( BoW ) to represent each image as it has proven to be effective for object and scene retrieval [ 6][16][21][23 ] . Let fa and fb denote the BoW feature vector of photo va p , respectively , then the initial similarity wab between the two photos is p calculated by p and vb
( 0 )
( 0 ) wab p
= expfl−
Ed(fa , fb )
2σ2 1
,
( 23 ) where Ed(fa , fb ) denotes the Euclidean distance between fa and fb , σ1 is the positive radius parameter , and it is estimated by the median value of all the Euclidean distances . t
• Initial tag intra relation W(0 ) Tags supplied by users describe the content of photos while providing additional contextual modalities about the photos . As a preprocessing step , the standard stemming and stop word removal are firstly applied . The M tags which have highest frequency are selected for computing their similarity .
Analogous to the principle of Google similarity distance t and vb t , between tag va
[ 2 ] , we define the tag distance wab t as follows :
( 0 )
T d(va t , vb t ) = max(log f ( va t ) , log f ( vb log G − min(log f ( va t , vb t ) ) − log f ( va t ) t ) , log f ( vb t ) )
, t and vb t ) and f ( vb t , respectively . f ( va
( 24 ) where f ( va t ) are the numbers of photos containing tag va t ) is the number of photos containing both tag va t . These numbers can be obtained by performing search on Flickr website using the tags as keywords . The initial tag similarity between tag va t and vb t is then given by t and vb t , vb
( 0 ) wab t
= expfl− t , vb t )
T d(va 2σ2 2
.
( 25 )
Similar to σ1 , σ2 is also estimated by the median value of all the tag distances .
5.2 Inter links
As shown in Eq ( 20 ) , there are three types of inter links , ie , from tag graph to user graph ( Πt∼u ) , from photo graph to tag graph ( Πp∼t ) , and from user graph to photo graph ( Πu∼p ) . Accordingly , three link matrices are built as follows .
• Πt∼u ≡ [ πab t∼u](Zt×Zu ) : measuring the link strength of entities in tag and user graph . It is defined as :
πab t∼u =fl 1/nva
0 t u ∈ va vb t else
,
( 26 ) t denotes the number of users who provide tag va t u annotates a photo with t means user vb u ∈ va where nva to a photo , vb tag va t .
Figure 2 : The illustration for building sub nets .
• Πp∼t ≡ [ πab p∼t](Zp×Zt ) : measuring the link strength of entities in photo and tag graph . It is given by :
πab p∼t =fl 1/nva
0 p t ∈ va vb p else
,
( 27 ) p denotes the tag number of visual photo va p , and t belongs to photo va p . where nva vb t ∈ va • Πu∼p ≡ [ πab p means tag vb entities in user and photo graph . Similarly , we have : u∼p](Zu×Zp ) : measuring the link strength of
πab u∼p =fl 1/nva
0 u p ∈ va vb u else
,
( 28 ) where nva p ∈ va vb u denotes the photo number shared by user va u , and u means photo vb p is shared by user va u .
5.3
Implementations
In practice , it is not necessary to run the multi level graph propagation as a whole in the social network . Instead , the network itself is usually formed by disconnected sub nets , and the propagation can be conducted separately on each sub net . In our implementation , two users are connected if one of the following conditions is met : ( 1 ) the maximal initial tag similarity is above an average value ; ( 2 ) their photos are taken in nearby locations ; ( 3 ) they comment each other ’s photos or comment on a photo contributed by a third party . This could result in a number of sub nets . To make the finding of sub nets computationally efficient , we first detect the “ promising cores ” as seeds and then grow the sub nets from the seeds , by connecting other users fulfilling the aforementioned three conditions . Fig 2 illustrates the procedure of forming social sub nets .
The “ promising core ” of a sub net , intuitively , is the user who has a large number of photos , attracts significant photo views and comments from others , while not connecting to the cores of other sub nets . Referred to as Fig 2 , we select cores as the users with a minimum of 500 photos , accumulate at least 2,000 comments , and share no more than 20 % of similar tags with others . Then the rest of users are selected as the promising cores(Fig 2(b) ) . Nearby cores as in Fig 2(c ) may be merged if they have high initial user similarity . Finally , users are connected to the cores based on their initial user similarities . Based on this implementation , taking our experiment as an example , we detect 101 sub nets from 40,170 Flickr users . Typically , a sub net contains about 400 users . It is also worth noting that only tags with high frequency will be used in the propagation since tags provided by Flickr users are often imprecise , even containing form and spelling form [ 10 ] . We empirically select top 1,000 tags .
6 . EXPERIMENTS
In this section , we systematically evaluate the effectiveness of the proposed unified formulation and solution to en s r e s u f o #
6000
5000
4000
3000
2000
1000
0
6
3 2
0 4
7 5
4 7
1 9
8 0 1
5 2 1
2 4 1
9 5 1
6 7 1
3 9 1
0 1 2
7 2 2
4 4 2
1 6 2
8 7 2
5 9 2
2 1 3
9 2 3
6 4 3
3 6 3
0 8 3
7 9 3
# of photos
Figure 3 : The statistics of photo number owned by users ( users owned less than five photos are removed ) . s o t o h p f o #
3500
3000
2500
2000
1500
1000
500
0
1
6 2
1 5
6 7
1 0 1
6 2 1
1 5 1
6 7 1
1 0 2
6 2 2
1 5 2
6 7 2
1 0 3
6 2 3
1 5 3
6 7 3
1 0 4
6 2 4
1 5 4
6 7 4
1 0 5
6 2 5
1 5 5
6 7 5
1 0 6
6 2 6
1 5 6
6 7 6
1 0 7
6 2 7
# of comments
Figure 4 : The statistics of comment number given by photos . tity search in social media community , and report comparative results on three popular entity search tasks , ie , friend suggestion , image tagging and personalized image search .
6.1 Dataset
We empirically verify the merit of entity search on a dataset crawled from Flickr [ 4 ] . The data from Flickr consists of five main elements : users , uploaded photos , the tags associated with each photo , geo location of each photo , and users who comment on the photo ( called “ cmt users ” for short ) . We randomly collect 165,558 users and the corresponding photos , tags and comments by using Flickr API . For our experiment , we remove the users who have less than 5 photos , and then the dataset includes 40,170 users ( not includes the cmt users ) , owning about 9 million photos .
Fig 3 shows the number of photos owned by users . The long tail indicates most of users share similar number of photos , and very few users own the extremely large number of photos . In average , a user owns around 200 photos in our experiment . Fig 4 shows the number of comments on photos . The long tail phenomenon also exists , which indicates although the social interaction is complex , the comments on each photo are not too many ( 13 comments per photo in average ) . Fig 5 illustrates the tag frequency , where the noise ( misspelling words , combination of words and affix variation ) and some special words form the long tail .
6.2 Exp I : Friend Suggestion
Friend suggestion aims to search a list of users , which have similar interests to the given user . Obviously , the entity type of both query and searching pool is “ user . ” Therefore , in this task , the user similarity is mainly explored and a ranking list of users can be obtained according to Eq ( 19 ) . We compare y c n e u q e r f g a t
350000
300000
250000
200000
150000
100000
50000
0
1
6 9
1 9 1
6 8 2
1 8 3
6 7 4
1 7 5
6 6 6
1 6 7
6 5 8
1 5 9
6 4 0 1
1 4 1 1
6 3 2 1
1 3 3 1
6 2 4 1
1 2 5 1
6 1 6 1
1 1 7 1
6 0 8 1
1 0 9 1
6 9 9 1
1 9 0 2
6 8 1 2
1 8 2 2
6 7 3 2
1 7 4 2
6 6 5 2
1 6 6 2
6 5 7 2 tag ID
Figure 5 : The tag frequency distribution . our unified framework based friend suggestion ( UFS ) with the following five methods in both subjective and objective experiments :
• Initial user similarity ( IUS ) . The friends are ranked based on the initial user similarities , which are directly determined by user interaction in photo sharing activities as mentioned in Section 51
• Tag correlations ( Tag ) . A tag correlation measured by the number of common tags on the users’ photos . The higher the number of common tags , the more likely to be friends of the two users .
• Visual relationships ( Visual ) . A visual relationship estimated according to the visual similarity of representative photos of users .
• Fusion of user , tag and visual similarity ( Fusion ) . A linear fusion of IUS , Tag and Visual .
• Context based friend suggestion ( Context ) [ 22 ] . It aim s to leverage multiple contexts , including user contributed photos , their associated tags and geo locations , as well as user behaviors like viewing and commenting .
621
Subjective User Study
To evaluate the proposed friend suggestion strategy , we randomly selected 1,000 users as the query users . The similarity of each user pair was manually labeled by three subjects on a scale of 1 3 : ( 1 ) dissimilar ( totally different interest ) , ( 2 ) similar ( somewhat relevant interest ) , and ( 3 ) strongly similar ( almost same interest ) . The ground truth similar degree of each pair is the median scale of three evaluations . Considering the pairs with high similarity have especially important for most of applications , we adopted the Normalized Discounted Cumulative Gain ( NDCG ) as the performance metric . The NDCG score at the depth d in the ranked lists is defined by :
N DCG@d = ZdXd j=1
− 1
2rj log(1 + j )
( 29 ) where rj is the rating of the j th pair , Zd is a normalization constant and is chosen so that a perfect ranking ’s N DCG@d value is 1 . After computing the NDCG measure of each query user , we average them to obtain an overall performance evaluation on friend suggestion .
Fig 6 shows the experimental results . Overall , the results across different depth of NDCG consistently indicate that UFS achieves a performance boost compared to IUS , Tag
 
 
 
 
 
 
 
!#&$
!#&
!#%$
!# %
!#"$
! " !#"
!#!$
!
'( )
*+ ,
./0+1
20/.34
5346786
( 2 )
Figure 6 : Subjective evaluation on friend suggestion .
Figure 8 : Objective evaluation on friend suggestion .
9:5;<" 9:5;< % 9:5;<& 9:5;<= 9:5;<$ 9:5;<> 9:5;< ? 9:5;<@ 9:5;<A 9:5;<"!
User Id
Representative photos s r e s u y r e u Q t s i l d n e i r f d e t s e g g u S
8519617@N03
8789171@N07
11771426@N03
14307969@N03
21362899@N08
21512060@N06
Figure 7 : The representative photos of suggested friends for the user Id “ 8519617@N03 . ” and Visual which using single entity . Furthermore , in contrast to the linear fusion and context based method , the superiority of UFS demonstrates that allowing entity interaction can lead to better performance gain . As indicated by our results , the friend suggestion based on our unified entity search framework can better express the user relationship by reinforcing the mutual exchange of information across multiple entities over an integrated graph model .
Fig 7 shows the top five users’ representative photos to a query user according to the final user intra relations . From the representative photos of each user , we can see that these photos are similar with each other . These users are likely to have similar interest and thus are potential candidates for friend suggestion .
622 Objective Evaluation of Friend Suggestion
The objective evaluation was conducted according to the contacts function in Flickr site , which is organized by users themselves . If a user exists in the other user ’s contact list , we view the two users as friends . We first filtered out the users who have no contacts in Flickr site or in our user set . After filtering , we obtained 2,975 users and took them as the query users . Similar to the subjective user study , the objective comparison as shown in Fig 8 also indicates the strong performance of our proposed UFS in comparison to others .
6.3 Exp II : Image Tagging
Image tagging is to assign a set of tags to a given image to describe the image content . In our unified entity search framework , the query type is “ image ” and the type of entities to be searched is “ tag . ” By exploring the affinity matrix Wt , and link matrix Πp∼t , the tag ranking list can be obtained by Eq ( 19 ) .
We compare our unified framework based image tagging
( UIT ) with the following two baseline methods .
• Initial image tags in Flickr site ( IIT ) : The tags origi nally provided by the image owners .
• Tagging ranking ( TR ) . A Random walk is performed over a tag similarity graph to estimate the relevance score of tags for a given image [ 10 ] .
To demonstrate the effectiveness of the image tagging methods , we randomly select 200 images from our collected Flickr image dataset to perform image tagging . We also invite people to label the tags on a 1 3 scales : ( 1 ) “ irrelevant , ” ( 2 ) “ relevant , ” and ( 3 ) “ excellent , ” and adopt NDCG as the performance metric . After computing the NDCG score of each image ’s tag list , we average them to obtain an overall performance evaluation of the image tagging method . Fig 9 shows the experimental results . We can see our proposed unified solution achieves much better performance compared to the other baseline algorithms at different depths of NDCG . The improvements demonstrate that UIT can facilitate the relationship and interaction of different entities through mutual reinforcement and all the relationships can be refined .
Fig 10 further illustrates some exemplary images with the top five tags generated by three image tagging methods . We can clearly see that our recommended tags can better characterize the image content .
6.4 Exp III : Personalized Image Search
Given the large and growing importance of search engines , personalized search has the potential to significantly improve searching experience [ 15 ] . Compared with the common image search , in personalized image search , the user specific information is considered to distinguish the exact intentions of textual queries and rank the images . Formally in our framework , the query types are “ user ” and “ textual tags , ” while the entities in searching pool are “ images . ” To obtain the image ranking list , we estimate the affinity matrix based on the photo affinity matrix Wp , and link matrixes Πu∼p and Πp∼t . According to Eq ( 19 ) , we can obtain the image ranking list .
IIT
TR
UIT
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
Figure 9 : Performance comparison of image tagging methods .
IIT : lion , Panthera leo , Masai Mara , grass , NikonflickrAward TR : grass , animal , mountain , yellow , cloud UIT : lion , wildlife , mammal , grass , Africa
IIT : Baja , wildwife , seaofcortez , mexico , mammal TR : fish , water , mexico , nature , texture UIT : dolphin , whale , mammal , sea , wildlife
IIT : ABigFave , amazing photo , america , best sunset , canon TR : building , cloud , sunset , nature , autumn UIT : sunset , sky , sea , landscape , nature
IIT : 091211 , St . Paul , Minnesota , parks , Como Park TR : green , tree , garden , outdoor , football UIT : tree , grass , sky , mountain , outdoor
IIT : helo , helicopter TR : helicopter , garden , spring , landmark , bird UIT : helicopter , rescue , flying , sky , tree
IIT : 2012 , 50D , Dingo , Heal , Healesville TR : raining , bird , flower , nature , beautiful UIT : bird , tree , nature , wild , woodland
IIT : Ferrari , Fxx , spa , francorchamps TR : car , road , sand , wildlife , landscape UIT : car , Ferrari , racecar , road , sports
IIT : Nikon , NikonD90 , D90 , nature , Arun TR : flower , color , tree , plant , yellow UIT : bee , flower , nature , yellow , leaf
Figure 10 : Example results of image tagging .
We select the following three state of the art models as the baselines and compare them with our unified framework based method ( UPIS ) .
• Non personalized ( Non ) . Use the common text based image search mainly based on tf idf functions [ 16 ] .
• Topic based ( Topic ) . It aims to explore folksonomy for personalized search [ 19 ] .
• Preference based ( Pref ) . Perform personalized image search by predicting user interests based preference [ 12 ] .
Similar to [ 12 ] , we use comment based evaluation approach , where the images attract comments from user u are treated as relevant when u issues queries . We build two test scenarios for the comment based evaluation : 1 ) 50 randomly selected users who gave comments to 10 30 photos , denoted as Dataset 10 30 , and 2 ) 20 users who gave comments to more than 100 photos , denoted as Dataset 100 . 15 tags frequently appearing in the tags of commented images are selected as the test queries . The metric of mMAP [ 15 ] is utilized to evaluate the performance and the results are demonstrated in Fig 12 . From the results , we have the following observations . ( 1 ) Our proposed unified solution achieves better performance compared to the other three baseline algorithms . This clearly demonstrates the effectiveness of our proposed unified solution in the personalized image search task . ( 2 ) All mMAP values are not very high . This phenomenon reflects the problem of comment based evaluation
0.03
0.025
0.02
0.015
0.01
0.005
0
Non
Topic
Pref
UPIS
Dataset_10 30
Dataset_100
Figure 12 : Performance comparison of personalized image search for different methods . scheme : the commented images are considered relevant for all the test queries . As no query information is involved , for those queries non relevant with the topic of the commented images , the performance tends to be low . ( 3 ) Comparing between the two test scenarios , the average performance of Data 100 also improves over Data 10 30 . One possible reason for the improvement is that those users having more comments are active users who are likely to also attend more interest groups and tag more images .
Fig 11 displays exemplary search results for the query “ sunrise . ” The top eight non personalized results and the personalized results of three users ( User A , User B and User C ) are shown . We can see that by simultaneously considering query relevance and user information , the unified framework based personalized image search could capture the user ’s preference under certain topics . From the results , we can see that the top search results for user A mainly focus on sunrise at the seaside , while for user B and user C , the top search results are often co exist with cloud and plants . For the baseline method ( non personalized ) which separate query relevance and user preference , most of the search results are relevant to query , yet may hard to interpret a clear search intent .
6.5 Complexity Analysis
The complexity of our approach includes offline and online two parts . The offline multi level graph construction on 40,170 users with their photos , tags and comments can be finished in ten hours on five servers , each having 4GB memories and running four threads . Our online entity search algorithm is extremely efficient . The complexity of the algorithm is O(|V | lg |V | + |E| ) , where |V | and |E| represent the number of vertices and edges , respectively . Take 200 images to perform image tagging for example , our algorithm takes less than 60.2 seconds on a regular PC ( Intel dualcore 3.33GHz CPU and 4 GB RAM ) to complete the whole process . In other words , tagging one image only takes 0.3 seconds . It can be even faster if executed on a more powerful machine with parallel computing capability . Clearly , the speed is efficient and provides almost instant response .
7 . CONCLUSIONS
In this paper , we have shown how to integrate various entities in a multi level graph model , which includes the content from images , tags and geo locations , as well as the rich context derived from user behaviors . Specifically , the relations between users , images and tags are fully exploited by reinforcing the mutual exchange and propagation of information relevancy across different entities . Upon the model , entity
Figure 11 : Example of non personalized ( top ) and personalized ( second , third and fourth for User A , User B and User C respectively ) search results for query “ sunrise . ” search is explicitly formulated within a unified framework , in which friend suggestion , image tagging and personalized image search can be implemented in one single way . Future work includes the extension to multiple media sharing sites , such as Facebook and LinkedIn . It would be a promising topic to investigate whether these entities are consistent across different social media sharing sites and whether specific factors may impact the way users create , share , use and annotate content .
8 . ACKNOWLEDGMENTS
This work was supported in part by a grant from the RGC of the Hong Kong SAR , China ( CityU 119610 ) , a grant from the National Natural Science Foundation of China ( #61272290 ) , and a grant from Microsoft Research Asia Windows Phone Academic Program ( FY12 RES OPP 107 ) .
9 . REFERENCES [ 1 ] H . M . Chen , M . H . Chang , P . C . Chang , M . C . Tien , W . H .
Hsu , and J . L . Wu . Sheepdog group and tag recommendation for flickr photos by automatic search based learning . In Proceedings of ACM Multimedia , 2008 .
[ 2 ] R . L . Cilibrasi and P . M . Vitanyi . The google similarity distance . IEEE Trans . on Knowledge and Data Engineering , 19(3):370–383 , 2007 .
[ 3 ] D . Easley and J . Kleinberg . Networks and Crowds and Markets : Reasoning About a Highly Connected World . Cambridge University Press , 2010 .
[ 4 ] Flickr . http://wwwflickrcom/ [ 5 ] ImageClef . http://imagecleforg/ [ 6 ] Y . Jing and S . Baluja . Pagerank for product image search .
In Proceedings of International WWW Conference , 2008 . [ 7 ] J . Li and J . Z . Wang . Real time computerized annotation of pictures . IEEE Trans . on Pattern Analysis and Machine Intelligence , 2008 .
[ 8 ] Q . Li , Y . Zheng , X . Xie , Y . Chen , W . Liu , and W Y Ma .
Mining user similarity based on location history . In Proceedings of ACM GIS , 2008 .
[ 9 ] Y R Lin , J . Sun , P . Castro , R . Konuru , H . Sundaram , and
A . Kelliher . Metafac : Community discovery via relational hypergraph factorization . In Proceedings of ACM KDD , 2009 .
[ 10 ] D . Liu , X S Hua , L . Yang , M . Wang , and H J Zhang .
Tag ranking . In Proceedings of International WWW Conference , 2009 .
[ 11 ] D . Lowe . Object recognition with informative features and linear classification . In Proceedings of ICCV , 2003 .
[ 12 ] D . Lu and Q . Li . Personalized search on flickr based on searcher ’s preference prediction . In Proceedings of International WWW Conference , 2011 .
[ 13 ] R A Negoescu , B . Adams , D . Phung , S . Venkatesh , and
D . Gatica Perez . Flickr hypergroups . In Proceedings of ACM Multimedia , 2009 .
[ 14 ] M . Roth , A . David , D . Deutscher , G . Flysher , I . Horn ,
A . Leichtberg , N . Leiser , Y . Matias , and R . Merom . Suggesting friends using the implicit social graph . In Proceedings of ACM KDD , 2010 .
[ 15 ] J . Sang , C . Xu , and D . Lu . Learn to personalized image search from the photo sharing websites . IEEE Trans . on Multimedia , 14(4 ) , 2012 .
[ 16 ] J . Sivic and A . Zisserman . Video google : A text retrieval approach to object matching in videos . In Proceedings of IEEE International Conference on Computer Vision , 2003 . [ 17 ] M . Sniedovich . Dijkstra ’s algorithm revisited : the dynamic programming connexion . Control and Cybernetics , 35(3 ) , 2006 .
[ 18 ] C . Wilson , A . Sala , K . P . N . Puttaswamy , and B . Y . Zhao .
Beyond social graphs : User interactions in online social networks and their implications . ACM Trans . on the Web , 2012 .
[ 19 ] S . Xu , S . Bao , B . Fei , Z . Su , and Y . Yu . Exploring folksonomy for personalized search . In Proceedings of ACM SIGIR , 2008 .
[ 20 ] Yahoo . http://peopleyahoocom/ [ 21 ] T . Yao , T . Mei , and C W Ngo . Co reranking by mutual reinforcement for image search . In ACM CIVR , 2010 . [ 22 ] T . Yao , C W Ngo , and T . Mei . Context based friend suggestion in online photo sharing community . In Proceedings of ACM Multimedia , 2011 .
[ 23 ] T . Yao , C W Ngo , and T . Mei . Circular reranking for visual search . IEEE Trans . on Image Processing , 22(4 ) , April 2013 .
[ 24 ] N . Zheng , Q . Li , S . Liao , and L . Zhang . Flickr group recommendation based on tensor decomposition . In Proceedings of ACM SIGIR , 2010 .
[ 25 ] D . Zhou , O . Bousquet , T . Lal , J . Weston , and B . Sch¨olkopf .
Learning with local and global consistency . In Proceedings of NIPS , 2003 .
[ 26 ] J . Zhuang , T . Mei , S . Hoi , X S Hua , and S . Li . Modeling social strength in social media community via kernel based learning . In Proceedings of ACM Multimedia , 2011 .
