∗
†
Department of Science and Technology , Pohang University of Science and Technology(POSTECH ) , Pohang , South Korea
{kurin , dingga , hwanjoyu}@postechackr
2011 11th IEEE International Conference on Data Mining
Novel Recommendation based on Personal Popularity Tendency
∗
Jinoh Oh
, Sun Park
∗
, Hwanjo Yu
∗
, Min Song
† and Seung Taek Park
‡
Department of Information Systems , New Jersey ’s Science and Technology University , Newark , New Jersey
‡
DMC R&D Center , SAMSUNG ELECTRONICS CO . , LTD . , Suwon , South Korea seungtaekpark@samsungcom song@njit.edu
Abstract—Recently , novel recommender systems have attracted considerable attention in the research community . Recommending popular items may not always satisfy users . For example , although most users likely prefer popular items , such items are often not very surprising or novel because users may already know about the items . Also , such recommender systems hardly satisfy a group of users who prefer relatively obscure items . Existing novel recommender systems , however , still recommend mainly popular items or degrade the quality of recommendation . They do so because they do not consider the balance between novelty and preference based recommendation . This paper proposes an efficient novel recommendation method called Personal Popularity Tendency Matching ( PPTM ) which recommends novel items by considering an individual ’s Personal Popularity Tendency ( or PPT ) . Considering PPT helps to diversify recommendations by reasonably penalizing popular items while improving the recommendation accuracy . We experimentally show that the proposed method , PPTM , is better than other methods in terms of both novelty and accuracy .
Keywords Novel recommendation ; Personal Popularity Ten dency ; EMD
I . INTRODUCTION
Collaborative Filtering ( CF ) has been actively researched [ 16 ] , [ 8 ] , [ 17 ] , [ 4 ] , [ 6 ] . Traditional CF methods predict the preference score of each item by comparing preference histories of users [ 16 ] , [ 8 ] , [ 11 ] or analyzing relationships among items [ 17 ] , [ 13 ] , [ 2 ] . To some extent , these methods succeeded in predicting the degree of preference for unseen items , and recommending items reflecting user preferences by picking the items of the highest preference score .
However , conventional CF techniques suffer from lack of novelty [ 9 ] , [ 15 ] , [ 14 ] . That is , recommended items are usually popular , well known items . Thus , users are already likely to have made conscious decisions regarding these popular items . Therefore , the recommendation rarely leads users to additional purchases . Furthermore , vendors are already aware of such popular items , so such recommendations also not helpful to vendors [ 9 ] .
To overcome this limitation , several methods have been proposed with various definitions of “ novelty ” . One group of methods defines a novel item as an item that broadens users’ interests [ 12 ] , [ 15 ] . These methods find items bridging several groups of users by explicitly calculating user clusters [ 12 ] , or a bridging score of items without clustering [ 15 ] . Another group of methods defines novel recommendation as diversified recommendation and diversifies recommendation by incorporating ontology [ 20 ] , [ 14 ] . However , these works have several they either 1 ) recommend too many popular items or 2 ) severely degrade the quality of recommendation . limitations :
The cause of these limitations is that existing methods do not consider balance between novelty and preference based recommendation . Though considering novelty is necessary , it can ruin the quality of recommendation if it is excessive . For example , if the system places too much emphasis on novelty , it will recommend very few popular items , and then it will not fulfill the needs of people who prefer popular items . However , it is not easy to keep the balance because there are no criteria to decide the extent to which we should diversify results and penalize popularity .
To resolve the problem of balancing novelty and popularity , we introduce a new notion , called Personal Popularity Tendency ( PPT ) , for novel recommendation . Intuitively , people have different preferences in terms of the popularity of items . For example , some prefer music from underground bands , while others enjoy music from MTV stars such as Beyonce or Justin Timberlake . This kind of tendency can also apply to books and movies . We call this Personal Popularity Tendency . We prove the existence of PPT and also confirm the various types of PPT through a series of analyses on real world dataset . Considering PPT can bring three major advantages : 1 ) The recommender system naturally prevents popular item focused recommendation . 2 ) The penalties on popular items make the preference of an active user more conspicuous , thereby helping to reflect users’ preference and diversify results . 3 ) The performance degradation is avoided since considering PPT makes the recommendation system keeps the balance automatically .
Incorporating PPT into the novel recommendation system involves several challenges : First , we need to measure the difference between PPTs in order to ensure that recommendation matches users’ PPTs . For this purpose , the Earth Mover ’s Distance ( EMD ) is used to measure the semantic
1550 4786/11 $26.00 © 2011 IEEE DOI 101109/ICDM2011110
507 distance between two PPTs . Second , the algorithm should avoid the performance degradation when it incorporates the PPTs into recommendations . We resolve the problem by exploiting optimization techniques used for the multiple objective problem . We propose PPT Matching ( PPTM ) , which not only matches PPTs of users with those of recommendations but reflects the preference of users as much as possible . The main contributions of the proposed work are as follows :
• We experimentally verify the lack of novelty for existing methods and the existence of a Personal Popularity Tendency ( PPT ) through a series of analyses on realworld data .
• We proposed an efficient novel recommendation method considering both PPT and the preference of each individual .
The remainder of this paper is organized as follows . Section II discusses related work . Section III verifies the problem of lack of novelty and the existence of Personal Popularity Tendencies ( PPT ) . Section IV proposes a novel method called PPTM which aims to match the PPTs of each individual while reflecting the preference of each user . We experimentally demonstrate the excellence of our method in Section V .
II . RELATED WORK
A . Traditional Collaborative Filtering
Collaborative Filtering methods can be categorized as ( 1 ) item based CF [ 17 ] , [ 13 ] , [ 2 ] or ( 2 ) user based CF [ 16 ] , [ 5 ] , [ 8 ] , [ 11 ] . Item based CF methods compute the similarity between items by using historical rating datasets . Then , for an active user , they recommend items which are similar to the ones that active users have already seen . The userbased approach utilizes the relationship between users and recommends items preferred by the neighbors of an active user . Some works have combined the two approaches to make up for each one ’s defects [ 19 ] , [ 1 ] .
Recently , a graph based CF was proposed [ 3 ] , [ 4 ] , [ 6 ] , [ 10 ] . Huang et al . [ 10 ] introduced a graph based approach to resolve the sparsity problem in CF . Usually , graph based methods model the problem as a bipartite graph consisting of user nodes , item nodes , and edges between them . Fouss et al . [ 4 ] summarized the alternatives to weight edges and evaluate the effect of those alternatives . Gori et al . [ 6 ] proposed ItemRank , one of the state of art methods for CF , by applying the Random Walk with Restart framework for a graph .
B . Novel Recommender System
The notion of novelty is ambiguous , and it is defined in different ways [ 9 ] , [ 15 ] , [ 14 ] or often confused with serendipity . Among them , Herlocker et al [ 9 ] defined novelty most clearly and showed how it differ from serendipity . The main difference between the two notions is that
508 novel recommendation is a “ non obvious ” recommendation and a serendipitous recommendation aims to recommend “ surprising ” items [ 18 ] , [ 9 ] . By definition , serendipitous recommendation is novel but novel recommendation is not always serendipitous . In this paper , we follow the definition of Herlocker et al .
Novelty is also defined as the ability to extend an active user ’s interest [ 12 ] , [ 15 ] . Kamahara et al . [ 12 ] proposed a method that find such items based on an explicit community clustering , thus proposed method requires several parameters for tuning the performance . Similarly , Onuma et al . [ 15 ] proposed a technique to recommend items that lead users to nearby communities without community clustering . Both methods mainly focused on the topological information of items , which is shared for all users regardless of the preference of each individual .
Some works attempted to recommend a novel item by utilizing ontology . Ziegler et al . [ 20 ] interpreted novelty recommendation as diversified items and incorporate topic ontology into traditional CF recommendation . Similarly , Nakatsuji et al . [ 14 ] , which is the most recent work , expects to find a novel item by adjusting the similarity between users and incorporating the similarity into traditional CF methods . However , the works do not consider users’ interest or a preference patterns while diversifying recommendation results , thereby degrades the accuracy of the recommendation .
III . ANALYSIS FOR NOVELTY AND PERSONAL
POPULARITY TENDENCY
Although the novelty problem has been considerably addressed many times in recent research publications , no systematic study has answered such questions as “ Does the novelty problem really exist ? ” and “ How severe is it ? ” This section introduces a new way to measure novelty and analyzes a real world dataset to answer the questions .
A . Data set for analysis
We use two frequently used movie data sets , ie , IMDB and MovieLens [ 7 ] , for the analyses . We combine these data sets into one so that the integrated dataset has both popularity and users’ ratings for the movies . We use the rating data from MovieLens and we crawl the US boxoffice gross earnings of each movie from IMDB based on an assumption that the total earnings of a movies reflects the popularity of the movie . The preprocessed data set contains 942 users with 48,014 ratings for 1,306 movies . The preprocessed dataset is available through our web site http://dmpostechackr/pptm We applied a log function to popularity ( BoxOffice gross earning ) to extract more meaningful results . There is a huge gap between the profits of movies ; thus , it is hard to extract useful information from the basic histogram using gross earnings without any preprocessing . Taking the logarithm is known to help discover the characteristics of such distributions similar to power law distributions . Figure 1(a ) shows
0.5
0.4
0.3
0.2
0.1
0 0
0.2
0.15
0.1
0.05
1
2
3
4
5
6
7 8 x 108
( a ) linear scale
0 5 5.5 6 6.5 7 7.5 8 8.5 9
( b ) log scale
Figure 1 . Distribution of user ratings at each degree of popularity . X axis : degree of popularity ; Y axis : The normalized number of ratings . the number of rating with respect to popularity degree of movies in linear scale while Figure 1(b ) shows it in log scale . We use the log scaled popularity histogram for the analyses throughout this paper .
B . Measuring novelty of a system
As discussed in Section II , novel recommendation is defined as recommending non obvious items [ 9 ] . However , the definition is still vague . Thus , it is hard to measure novelty directly . Here we discuss and try to measure obviousness or ineffectiveness instead of measuring novelty directly . Our key observation is that obviousness or ineffectiveness still can be a good medium to infer the novelty of a recommender system though it does not directly guarantee the novelty of the system . If the level of ineffectiveness of a system is high , then the system is hardly effective . Also , we can infer that a system is effective if it maintains a fairly high level of recommendation quality while retaining a low level of ineffectiveness .
We mainly consider two scenarios and induce two measures for the ineffectiveness of a recommender system . First , as discussed in Section II , when the system mainly recommends popular movies , the system becomes ineffective . Second , the system becomes ineffective when the recommendation results are highly concentrated on a specific item set . In this case , the system lacks diversity . Suppose the recommendation comes from a constrained item set . Then , the resources for the recommendation will be limited as well as the number of cases . Due to the possibility limitation , users tend to receive similar recommendations regardless of their preferences . We investigate the ineffectiveness of existing and proposed methods based on these two features , popularity and diversity .
C . Evaluation of methods in terms of popularity and diversity
Focusing on popularity , we investigate the ineffectiveness of the existing methods by analyzing the top 10 recommendation result . ItemRank[6 ] and Tangent[15 ] are considered the state of the art methods of collaborative filtering and novel recommender systems , respectively . The Figure 2 shows the number of user ratings and recommendations obtained from two algorithms for each degree of popularity . Two existing methods recommend more items with popularity over 8 , but less items with popularity below 8 . For example , Tangent recommends almost twice as many as the number of rating , when degree of popularity is between 8.0 and 825 On the other hand , for the items between 7.0 and 7.25 , both methods recommend less than 50 % of the number of rating . i s e v o m f o r e b m u n d e z i l a m r o n e h T
0.3
0.25
0.2
0.15
0.1
0.05
0
5
5.5
User ’s Rating
Item Rank
Tangent
6.5
6 8 log scaled popularity
7
7.5
8.5
9
Figure 2 . A histogram on the relative frequency of movies with respect to popularity
We also measure ineffectiveness of existing approaches based on diversity . we sort movies in each bin based on the number of received ratings or recommendation . Frequently rated or recommended items in each bin are located in the bottom while lesser rated or recommended items are located on the top . Darkness of each point indicates frequency of ratings or recommendation on each item . Note that the Figure 3(a ) are totally independent from accuracy of recommendation and solely represent ratings spread status . The darker points imply more ratings and brighter points imply less ratings .
0.2
0.15
0.1
0.05
0
3.5
4.5
5.5
6.5
7.5
8.5
0.2
0.15
0.1
0.05
0
3.5
4.5
5.5
6.5
7.5
8.5
0.2
0.15
0.1
0.05
0
3.5
4.5
5.5
6.5
7.5
8.5
( a ) Users’ rating
( b ) ItemRank
( c ) Tangent
Figure 3 . Distribution of recommendation . X axis : the degree of popularity , Y axis : the normalized number of movies , and the darkness indicates the frequency of rating or recommendation on each movies
509
As shown in the Figure 3(a ) , users enjoy various movies . Even though popular movies get more user ratings , many other unpopular movies also get some ratings . However , as shown in the Figure 3(b) (c ) , existing methods focus on only a small set of popular items and these highly shaded items receive most of recommendations . This investigation results implies that recommendation results of existing methods are not good in terms of diversity .
Furthermore , the coverage of recommendation shrinks because of the over concentration . The inner line in the Figure 3(b) (c ) indicates the number of items having at least one recommendation . For both methods , the gap between the coverage line and shaded region is narrow . In particular , in the case of Tangent , the covered item set is quite similar to the over concentrated item set . The over concentration in the result of Tangent is attributed to the bridging score which is shared for all users regardless of preference of each individual . This score becomes a dominant factor and , finally , makes Tangent recommend highly similar results for all users .
D . Personal popularity tendency
Intuitively , users have different movie viewing patterns . For example , some people prefer Hollywood blockbuster movies more frequently while some others prefer artistic films which have received awards at famous film festivals held in Cannes or Berlin . We verify , through an analysis , the existence of this tendency called a Personal Popularity Tendency ( PPT ) . 0.3
0.3
0.3
0.2
0.1
0 5 10
8
6
4
2
0 5
0.2
0.1
0 5 10
8
6
4
2
0 5
6
7
8
9
6
7
8
9
0.2
0.1
0 5 10
8
6
4
2
0 5
6
7
8
9
6
7
8
9
6
7
8
9
6
7
8
9
( a ) User 585
( b ) User 265
( c ) User 568
Figure 4 . Representative PPTs . X axis : the degree of popularity , Y axis for the fist row : the normalized number of watched movies , Y axis for the second row : the ratios of PPTs compared to average PPTs
We discover several PPT types . However , we present only three of them due to the page limitation . The first row in the Figure 4 shows the representative PPTs of real users , and the second row shows the relative PPTs . The relative PPTs indicate the ratios of PPTs compared to the average PPT ( Figure 1(b ) ) for each popularity .
The ratio of a bin is 1 if watching frequency of an active user is the same as that of average PPT over all users . As the Figure 4 is shown , PPT becomes more distinguishable when it is compared to the average PPT . We found that some people prefer less popular movies ( Figure 4(a ) ) while others
510 enjoy only very popular movies ( Figure 4(b) ) . Another category of people usually watch moderately popular movies ( Figure 4(c) ) . The PPTs of all users are presented on our web site http://dmpostechackr/pptm
IV . PPT MATCHING RECOMMENDATION
The main drawback of traditional collaborative filtering methods is not their capacity to capture the users preference but the unintended emphasis on the popular items . In fact , traditional collaborative filtering methods succeeded in reflecting the users’ preference between items having similar popularity . Therefore , all we have to do is just remove the unintended emphasis on popular items by penalizing them . However , penalizing popular items is not straightforward . One simple and naive way is to penalize items in proportion to degree of popularity . However , such a naive penalty policy may cause dissatisfaction of recommendation for some users who like only popular movies . Thus we need to consider preference of users while penalizing popular items .
Our key idea is that matching PPT of an individual and that of a recommendation is a good starting point for penalizing popular items . By matching PPT of individuals , we expect several advantages . 1 ) First of all , the recommendation will naturally avoid recommending too many popular items . 2 ) The system could avoid performance degradation caused by considering novelty , since considering PPT would help to generate balanced recommendation . For example , if the system recommends items according to the user ’s personal popularity tendency , it will naturally penalize popular blockbuster movies for users who love special genre movies while being able to recommend popular movies for popular movie fans . Therefore , we can avoid the overall performance degradation by recommending special genre movies to blockbuster fans or vice versa .
Furthermore , 3 ) the penalty on popular items can make the preference of an active user more conspicuous . Thus , it helps to diversify the results . As already mentioned , the main defect of traditional CF methods is not their capability to catch users’ preferences but their tendency to give popular items a higher score . Through the penalty on popularity , competition happens only among items having a similar degree of popularity . Thus , traditional CF methods can make the best recommendation for each user because they are free from the unintended emphasis on popularity items .
In this section , we propose a method called Personal Popularity Tendency Matching ( PPTM ) , PPT based recommendation . In particular , our proposed method aims 1 ) to recommend items similar to the PPT of each individual while 2 ) reflecting active users’ preferences as much as possible . In the following sections , we will explain how we solve the problems of 1 ) measuring the difference between two PPTs ( Sec IV A ) and 2 ) incorporating tendency difference into the recommendation process ( Sec IV B ) .
A . Measuring the PPT difference
The first challenge for developing the method is that we need a measure reflecting the difference between the PPT of active users and our recommendations . Kullback Leighbler divergence We tried KL divergence based on the observation that PPT can be treated as a distribution since it is a relative frequency . The KL divergence measures the difference of two distributions p , q based on the following equation . DKL(P||Q ) =
. ∞ p(x ) log(
)dx p(x ) q(x )
−∞
If two distributions p , q are exactly same , KL divergence will be 0 . And the distance becomes larger when two distributions become more mismatched . Note that the KL divergence is a non symmetric measure ( ie , DKL(P||Q ) .= DKL(Q||P ) ) in which there is no upper bound .
Probability p1 p2 p3
Figure 5 . The weakness of KL divergence
Popularity
The KL divergence has a weakness , which is that it focuses on measuring difference but does not consider distance . For example , suppose we have three users , and each of them likes The Lord of The Rings , Star Wars , and Dogville respectively . Those movies earn 870 million , 775 million and 8 million dollars . Thus , PPT of users will be similar to the Figure 5 ( p3 for a user who likes The Lord of The Rings , p2 for a user who likes Star Wars , and p1 for a user who likes Dogville ) . In terms of popularity , The Lord of The Rings is more similar to Star Wars than Dogville ( D(p2||p3 ) < D(p1||p3 ) ) because the gross difference between the former pair is closer than that of the later pair . However , from the KL distance point of view , the three PPT have the similar distance since they do not have any common region ( DKL(p2||p3 ) ≈ DKL(p1||p3) ) . To remedy this weakness , we exploit another measure that can catch such relations .
Earth Mover ’s Distance ( EMD ) : A distribution can be interpreted as an arbitrary arrangement of a mass of particles . In this view , a distribution can be transformed to another distribution by moving particles . EMD captures the minimum costs of transporting particles to equalize two distributions , which can be formally defined using the transportation problem . Suppose P and Q can be represented by P = {(p1 , wp1 ) , ( p2 , wp2 ) , . . . , ( pm , wpm )} , and Q = {(q1 , wq2 ) , . . . , ( qn , wqn )} . The workload , needed to make two distributions the same , is defined as follows .
WORK(P , Q , F ) = mfi nfi i=1 j=1 with constraints fij ≥ 0 , 'n j=1 fij ≤ wpi 'm i=1 fij ≤ wqj 'n j=1 fij = min
1 ≤ i ≤ m , , ff'm
1 ≤ j ≤ n 1 ≤ i ≤ m 1 ≤ j ≤ n 'n j=1 wqj i=1 wpi ,
,
'm i=1 where fij is a flow of mass ( the amount of moving particles ) from pi to qj , dij is the ground distance from pi to qj , and all flows F = [ fij ] . From this setting , EMD measures the minimum workload , defined as EM D ( P , Q ) = min F
WORK(P , Q , F ) .
D
The Figure 6 shows how EMD works to measure the distance between two PPTs . Consider that we want to measure the distance of two candidate PPTs from a target PPT . To make candidate 1 similar to the target PPT , we have to move gray colored block to lower popularity bin as in the Figure 6(b ) . The total workload for this movement , which is defined as the product of the moving weight and moving distance , will be the size of block · 3 . In the case of candidate 2 , the moving weight is similar to candidate 1 but the moving distance is shorter than that of candidate 1 ( Figure 6(c) ) . The total workload for this candidate is the size of block · 1 which is also smaller than that for candidate 1 . Based on the EMD distance we can conclude that candidate 2 is more similar to the target PPT than candidate 1 .
The virtue of EMD is in adjusting the ground distance which enables us to capture semantic differences . In our case , the ground distance ( dij ) is set to be the difference between log scaled popularity . In this setting , the EMD distance from The Lord of The Rings to Star Wars is smaller than the distance to Dogville because the ground distance of the former pair ( log($870 million ) log($775 million ) ) is smaller than that of the later one ( log($870 million ) log($8 million) ) . From this point of view , EMD is a better measure than the KL divergence for our application . Thus , we adopt EMD as the measure for popularity tendency distance .
B . Incorporating tendency difference
As mentioned at the early part of this section , the goals of our approach are 1 ) to recommend items following the PPT of each individual while 2 ) reflecting active users’ preferences as much as possible . To this end , we formulate the optimization problem which has two different objectives . max min Subject to fi pi ∗ zi i EM D ( R , P ) D zi ∈ {0 , 1} for all i fi zi = k i fijdij
( 1 ) where pi is a preference score obtained by using the traditional CF method and zi is an indicator vector of the item Ii
511
( 1 if Ii is included in the recommendation and 0 if not ) , R is the PPT of the recommendation result , and P is the PPT of an active user . We take a common approach to optimization and convert multi objective programming to single objective programming by using a linear combination of two objective functions with weight parameter c ( Equation 2 ) . If c is high then the final result will be totally determined by EMD distance . On the other hands , if c is low enough then EMD distance will be ignored , thus , the final recommendation results will be similar to that of traditional CF methods .
' ' zi ∈ {0 , 1} for all i i pi ∗ zi − c · DEM D ( R , P ) i zi = k
( 2 ) max Subject to
Unfortunately , it is not easy to solve this problem ( Equation 2 ) because calculating the EMD distance between two PPTs is another optimization problem itself . Thus , the naive method is trying all possible recommendation sets and choosing an optimal solution among them . However , such a naive method is not applicable because the complexity of the naive method is Θ(( n k )k ) , where n is the number of items and k is the number of items in the recommending set , and n is a very large number in most applications .
We propose a novel efficient method based on several theoretical analyses and the greedy approach . Our method is divided into two phases . In the first phase , our method filters out a seed set without calculation of EMD ( Section IV B1 ) . After that , in the second phase , we iteratively pick an item or replace an item in a greedy way until convergence ( Section IV B2 ) .
1 ) Seed set selection : Our basic idea to reduce the amount of computation is that there is a set of items that are included in final results regardless of the value of the weight parameter c . Then , we can reduce both n and k . By definition , a seed item should be in an optimal solution regardless of c , and this definition induces two requirements for seed items . 1 ) The seed items should have a relevance score high enough to be in the top k items because , if c is zero , then the final results set will consist of the top k items . 2 ) The seed items should not contribute to the EMD distance . Even if the relevance score of an item is very high , if it causes an extra increase of EMD distance , the item will not be chosen when c is very high . However , measuring the contribution of each item to final EMD distance without calculating EMD is not an easy task . Thus , we find a way to discover items that do not contribute to EMD distance instead of measuring the exact contribution of each item based on theoretical analysis of EMD . Theorem 1 : Consider a domain X consists of {x1 , . . .} , and we measure EMD distance between two probabilities p and q defined on X ( ie , p = {(x1 , wp1 ) , . . .} and q = {(x1 , wq1 ) , . . } ) Let fij is a optimal flow from xi to xj required to make p equal to q .
' If ground distance defined on X satisfies triangular ink fki = 0 for all xi . equality , then either In other words , if there is an outflow from xi ( ie , fij > 0 for an arbitrary j ) , then there is no inflow to xi ( ie , fki = 0 for all k ) and vice versa . j fij = 0 or
'
Proof : Suppose there is a xi which have both of inflow and outflow in optimal solution . Let one of inflow be fki , one of outflow be fij , and ffi be min(fki , fij ) . According to Equation 1 , workload caused by the flows fki and fij is dki · fki + dij · fij . dki · fki + dij · fij
= dki · ( fki − ffi ≥ dki · ( fki − ffi
) + dij · ( fij − ffi ) + dij · ( fij − ffi
) + ffi · ( dki + dij ) ) + ffi · dkj ) , dij · ( fij − ffi
Note that one of dki · ( fki − ffi ) is zero because ffi = min(fki , fij ) . The derivation implies that we can always reduce the total workload by removing one of inflow and outflow when triangular inequality holds . Proof by contradiction .
Based on Theorem 1 , we reformulate optimization problem ( Equation 2 ) to an alternative problem which is similar to bin packing problem as follows .
'
Problem 1 : Suppose that there is B bags which each of bags are numbered and have capacity of wb respectively , and the sum of wb is one ( ie , wb = 1 ) . Consider there are n numbers of items which have different value pi but same volume as 1/k . The goal of problem is to find value maximizing set of items while satisfying following two condition .
1 ) The items are tagged as a number and are only able to be in the bag of the same number .
2 ) The capacity of bags can be exchanged with penalty which is calculated as product of the amount of moving capacity and the difference between tag of bags .
In this interpretation , we easily notify that only the item addition over the given capacity causes the penalty , which i t h g e W i t h g e W t i h g e W i t h g e W t i h g e W
Popularity
Popularity
Popularity
Popularity
Popularity
( a ) Target PPT
( b ) Candidate 1 and needed workload
( c ) Candidate 2 and needed workload
Figure 6 . The working example for EMD distance
512 is actually EMD distance . Based on this observation , we develop an algorithm which selects set of items , which do not contribute EMD distance , among top k items . Algorithm 1 is the formal description of the algorithm where wS b and wU indicate the weight of the PPT of the seedset and b the active user at a b th popularity bin , respectively . Note that , since the total number of recommendations is fixed as k , an addition of an item affects the inflow by 1 k at the corresponding bin . Algorithm 1 : Seed set selection Data : A item set I = {i1 , i2 , . . . , in} , and a PPT of an active user
Result : A seed set S .
1 begin 2 3 4 5 6 7 8
S ←− ∅ K = top k items from I foreach ij ∈ K do b = the popularity bin of ij if wU k then b + 1 b > wS S ←− S ∪ ij b + 1 b = wS wS k
2 ) Greedy selection : Calculating the actual EMD distance is unavoidable after seedset selection because an optimal solution varies as the parameter c varies . Therefore , we need to find a way to reduce the number of EMD computations to make the method more efficient .
Theorem 2 : Suppose two items Ii and Ij belong to the same popularity bin and pi > pj . If Ii is not in the optimal solution , then Ij cannot be in the optimal solution .
Proof : Assume that there are two items Ii , Ij where pi > pj and Ii is not in the optimal solution but Ij is in the optimal solution . Exchange between Ii and Ij does not increase the EMD distance because two items are in the same popularity bin . Therefore , exchange between Ii and Ij increases an objective function by an amount of pi − pj . Consequently , Ii should be included in the optimal solution instead of Ij , and this is an obvious assumption violation . Proof by contradiction .
We adapt the greedy approach based on Theorem 2 . As revealed in Theorem 2 , if an item is not in the optimal set , then the other items which are in the same bin but have a smaller preference score cannot be in the optimal
5 6
7 8
9 10 11
12 13 set . Therefore , we do not need to test all combinations . We iteratively consider only the top items for each popularity bin and pick the item which increases the objective the most until k − |S| items selected where |S| is the size of the seed set . After that , we test all possible replacements upon the selected items using the greedy approach until the recommendation converges , because the simple greedy method does not guarantee the optimality of the solution . Algorithm 2 is a formal description of the method where top(B ) is a set of items which are top score unselected items for each bin and Objective( ) is the objective of Equation 2 . Algorithm 2 : Greedy selection Data : B a set containing top k − |S| items for each bin , seed set S
Result : The optimal solution R .
1 begin 2 3 4
R = S for 1 to k − |S| do Item = argi∈top(B ) max Objective(R ∪ i ) R = R ∪ Item B = B − Item repeat
( i , q ) = argi∈top(B),q∈R−S max Objective(R ∪ i − q ) if Objective(R ∪ i − q ) > Objective(R ) then
R = R ∪ i − q B = B ∪ q − i until No change occurs on R return R
The Figure 7 is a running example to explain how greedy selection works . Assume that there is room for 3 more items ( k − |S| = 3 ) . First , the method aligns 3 items for each popularity by order of preference score ( Figure 7(a) ) . Note that other items cannot be in the optimal solution by Theorem 2 . We pick 3 items while calculating the objective function . ( Algorithm 2 step 3 6 ) . Suppose the items are selected from b1 , b3 , b5 ( Figure 7(b) ) . Now , the remaining job is finding replacements that output larger objective values . Based on Theorem 2 , we only compare items in a colored cell with selected items . For example , the arrows in the Figure 7(b ) represent a possible substitution for items on b3 and b4 . If the replacement enhances the objective value , then
PPT
PPT
PPT b1 3.7 3.4 2.8 b2 4.8 4.6 3.2 b3 5.3 5.1 4.7
R b4 5.6 4.9 3.3
( a ) b5 5.4 5.1 5.0 b6 5.4 5.3 5.2 b1 3.7 3.4 2.8 b2 4.8 4.6 3.2 b3 5.3 5.1 4.7
R b4 5.6 4.9 3.3
( b ) b5 5.4 5.1 5.0 b6 5.4 5.3 5.2 b1 3.7 3.4 2.8 b2 4.8 4.6 3.2 b3 5.3 5.1 4.7
R b4 5.6 4.9 3.3
( c ) b5 5.4 5.1 5.0 b6 5.4 5.3 5.2
Figure 7 . Greedy algorithm running example . X axis : the log scaled popularity , Y axis : the probability
513 the method changes the pair ( Algorithm 2 step 9 11 ) . This process is repeated until we obtain the final results ( Figure 7(c) ) .
V . EXPERIMENT
In this section , we present the results of our experiment . The MovieLens [ 7 ] dataset originally contained 100,000 ratings from 943 users on 1,682 movies . Among those ratings , we only use positive ratings because one of our competitor is designed to use only positive ratings [ 15 ] . Therefore , we ignored negative ratings to make pair comparison . In preprocessed dataset , the total number of users is 942 and the dataset has 48,014 ratings for 1,306 movies .
We gathered the top 10 recommendations for all users in the MovieLens dataset by using 3 methods , ItemRank , Tangent , PPTM with c = 0.01 , 0001 c value is chosen experimentally . Since our method and Tangent require precomputed relevance scores , we run Tangent and PPTM based on the relevance scores of ItemRank .
Popularity The Figure 8 shows comparison of recommendation from three algorithms in terms of popularity . In this figure , we present the difference between the distribution of rating and recommendation . From the results , our method outperformed competitors in terms of popularity matching . As analyzed in Section III , existing methods tend to recommend more items having high popularity . However , the result of PPTM is quite similar to that of rating so the differences is small for all degree of popularity . The comparison results for each individual are dropped from this paper because they are similar to the overall comparison results . All results for each individual are published on our website .
Diversity We also measure the novelty of our method in terms of diversity in a way similar to the one we used in the analysis . The Figure 9(a ) is the distribution of top 10 recommendation using PPTM with c = 0001 The figure is generated in same way as we did in the investigation . Our method shows more diversified results and the overconcentrated items set is smaller than that of others . In addition , the inner line indicating the coverage of PPTM is also located higher than that of other methods .
Item Rank Tangent PPTM 0.001 PPTM 0.01
0.15
0.1
0.05
0
−0.05 n o i t u b i r t s d i f o e c n e r e f f i d
−0.1
5
5.5
6.5
6 8 log scaled popularity
7.5
7
8.5
9
Figure 8 . Popularity aspect comparison
To compare the results more clearly , we measure the diversity and coverage of each method ( Figure 9(b) (c ) ) quantitatively . First , we measure EMD distance for the distribution of each method from that of rating ( Figure 9(b) ) . Our method always shows a smaller EMD distance , which indicates more diversified results , than other methods regardless of the number of recommendations . Note that , in this evaluation , EMD distance measures the distance between distribution of rating and recommendation . Thus , it is independent from EMD distance for PPTs . Furthermore , the coverage of our method is also higher than that of other competitors ( Figure 9(c) ) . When we recommend 50 items for each user , the coverage of PPTM is over 60 % but that of ItemRank is near 45 % and that of Tangent is around 25 % . All these evaluation results show that our methods is better than other method in terms of diversity .
Accuracy We evaluate the accuracy of our method and competitor . To compare the accuracy , we run 3 fold cross validation 30 times for each 942 users and aggregated the result . For more detail , we divide rating history of a user into 3 folds . After that , we use 2 folds to infer the taste of user , and measure the accuracy by comparing the recommendation result with remaining 1 fold , which is a relevant itemset for test . We use recall to measure accuracy ( Equation 3 ) . It is because our method is a top k recommendation method thus traditional accuracy measures , which are based on scores or the order of item , do not work . In this equation , the accuracy increases when the method recommends more items which i s e v o m f o r e b m u n d e z i l a m o n e h T
0.14
0.1
0.05
0
3.5
Item Rank Tangent PPTM 0.001 PPTM 0.01
0.25
0.2
0.15
0.1
0.05 e c n a i t s d D M E
4.5 log scaled popularity
5.5
6.5
7.5
8.5
0 0
50
100 K
150
200 e g a r e v o C
90 % 80 % 70 % 60 % 50 % 40 % 30 % 20 % 10 % 0 % 0
( a ) The distribution of top 10 of PPTM with c = 0.001
( b ) EMD distance
Figure 9 . The evaluation results in aspect of diversity
514
Item Rank Tangent PPTM 0.001 PPTM 0.01
150
200
50
100 K
( c ) Coverage
Item Rank Tangent PPTM 0.001 PPTM 0.01
1.2
1.1
1
0.9
0.8 y c a r u c c A
0
50
100
150
200
250
K
Figure 10 . The accuracy comparison result are in the relevant itemset for the test .
|recommend itemset ∩ relevant itemset|
Acc . =
|relevant itemset|
( 3 )
We measure the accuracy change according to the change of the number of recommendations , and compare the accuracy of PPTM and Tangent to that of ItemRank ( Figure 10 ) . If the accuracy of a method is the same as ItemRank , it will be 1 for all k . It turns out that Tangent suffers from a performance degradation of around 15 20 % . On the other hand , our method shows better results than ItemRank when c is 0001 Excessive engagement of PPT also results in a performance degradation of around 10 % but , still , it is better than Tangent .
Qualitative Evaluation We conduct a case study for user 585 , who is the representative minor movie fan in the Figure 4(a ) , to evaluate the recommendation results also in a qualitative way ( Figure 11 ) . To the best of our knowledge , the user prefers films having artistic value and reputation . The Unbearable Lightness of Being is a movie based on the novel of the same name by Milan Kundera , a famous Czech writer . The user also saw the Three Color series : Blue , Red and White , which are known for their cinematic quality . Other movies such as Tin Drum and La Double Vie de V´eronique are also treated as art films . In terms of popularity , the user also saw many films that grossed under 1 million . The earnings of most movies that watched are less than 25 million dollars . The average gross was 10.7 million . However , in the recommendations of ItemRank , there are already 3 out of 10 films that earned more than 25 million . The average gross of ItemRank recommendation is three times higher than that of the watched list . In the case of Tangent , it is more severe . Only 2 movies , Casablanca and
A v e r a g e
E m m a
( 1 9 9 6 )
B e l l e d e j o u r
( 1 9 6 7 )
$
1 0
,
7 5 4
,
2 0 6
$
,
2 2 2 0 1 8 8 3
,
$
,
4 0 3 7 0 1 7
,
R o s e n c r a n t z a n d G u i l d
. . .
( 1 9 9 0 )
$
7 3 9
,
1 0 4
P o s t i n o
,
I l
( 1 9 9 4 )
E n g l i s h P a t i e n t ,
T h e
( 1 9 9 6 )
$
$
,
1 1 1 4 1 5 1 3 2
,
,
2 0 6 8 1 3 0 1
,
S e n s e a n d S e n s i b i l i t y
( 1 9 9 5 )
M y L e f t
F o o t
( 1 9 8 9 )
T h r e e
C o l o r s :
B l u e
( 1 9 9 3 )
A n g e l s a n d
I n s e c t s
( 1 9 9 5 )
R e n d e z v o u s i n P a r i s
( 1 9 9 5 )
F a r i n e l l i : i l c a s t r a t o
( 1 9 9 4 )
P r i s o n e r o f t h e
M o u n t a i n s
( 1 9 9 6 )
R e m a i n s o f t h e
D a y
,
T h e
( 1 9 9 3 )
J e a n d e
F l o r e t t e
( 1 9 8 6 )
C i n e m a
P a r a d i s o
( 1 9 8 8 )
$
6 2
,
4 9 3
,
7 7 4
$
2
,
1 2 2
,
9 4 8
$
6 6 1 3 6 1
,
$
,
1 4 7 4 3 3 9 1
,
$
$
,
1 3 2 4 9 7 4
,
,
5 3 0 4 0 0 0
,
$
7 3 0 0 9 9
,
$
,
2 2 9 5 4 9 6 8
,
$
,
3 9 2 0 4 5
$
,
4 9 4 0 9 3 9
,
M i c r o c o s m o s :
L e p e u p l e d e
. . .
( 1 9 9 6 )
$
1
,
5 7 3
,
8 4 2
J a n e
E y r e
( 1 9 9 6 )
A p a r a j i t o
( 1 9 5 6 )
O t h e l l o
( 1 9 9 5 )
S h a d o w l a n d s
( 1 9 9 3 )
P a t h e r
P a n c h a l i
( 1 9 5 5 )
T h r e e
C o l o r s :
R e d
( 1 9 9 4 )
C é r é m o n i e ,
L a
( 1 9 9 5 )
T h r e e
C o l o r s :
W h i t e
( 1 9 9 4 )
R a i s e t h e
R e d L a n t e r n
( 1 9 9 1 )
D o u b l e v i e d e
V é r o n i q u e ,
L a
( 1 9 9 1 )
B e f o r e t h e
R a i n
( P r e d d o z h d o t )
( 1 9 9 4 )
$
,
5 1 7 3 8 6 0
,
$
1 7 0 2 1 5
,
$
$
,
2 1 1 2 9 5 1
,
,
4 0 4 3 6 8 6
,
$
5 3 6 3 6 4
,
$
2 5
,
8 4 2
,
0 0 0
$
1
,
9 9 9
,
9 5 5
$
6 7 0 6 5 9
,
$
$
,
1 4 6 4 6 2 5
,
,
2 6 0 3 0 6 1
,
$
7 6 3 8 4 7
,
S t e a l i n g B e a u t y
( 1 9 9 6 )
$
,
4 5 7 3 3 3 0
,
F o u r
W e d d i n g s a n d a
F u n e r a l
( 1 9 9 4 )
U m b r e l l a s o f
C h e r b o u r g
,
T h e
( 1 9 6 4 )
$
$
,
7 5 8 8 8 8 3 2
,
,
1 8 4 2 5
C y r a n o d e
B e r g e r a c
( 1 9 9 0 )
$
,
5 8 2 0 0 2 0
,
E n f e r ,
L
'
( 1 9 9 4 )
$
1 9 4
,
2 2 3
F i l l e s e u l e ,
L a
(
A S i n g l e
G i r l )
( 1 9 9 5 )
$
1 3 6
,
1 5 3
R e t u r n o f
M a r t i n G u e r r e ,
T h e
( 1 9 8 2 )
$
,
2 3 8 2 4 8 2
,
T i n D r u m
,
T h e
( 1 9 7 9 )
$
3
,
9 6 3
,
7 7 3
E a t
D r i n k M a n W o m a n
( 1 9 9 4 )
$
,
7 2 9 4 4 0 3
,
H e n r y V
( 1 9 8 9 )
$
1 0
,
1 6 1
,
0 9 9
E n c h a n t e d A p r i l
( 1 9 9 1 )
$
,
1 3 2 0 0 1 7 0
,
T h e u n b e a r a b l e
L i g h t n e s s
. . .
( 1 9 8 8 )
$
1 0
,
0 0 6
,
8 0 6
G a r d e n o f
F i n z i
C o n t i n i ,
T h e
( 1 9 7 0 )
$
5 9 6 6 9 4
,
W o r l d o f
A p u
,
T h e
(
A p u r S a n s a r )
( 1 9 5 9 )
$
,
1 6 0 0 0
S e c r e t o f
R o a n
I n i s h
,
T h e
( 1 9 9 4 )
$
,
6 1 0 1 6 0 0
,
T i t l e
G e r m i n a l
( 1 9 9 3 ) s
B o x O f f i c e
G r o s
$
3 7 8 8 5 4
,
W a t c h i n g l i s t o f
U s e r
5 8 5
ItemRank Top 10 recommendation
Tangent Top 10 recommendation
PPTM Top 10 recommendation
Title Piano , The ( 1993 ) Fargo ( 1996 ) Casablanca ( 1942 ) Dr . Strangelove or : How I ( 1963 ) Citizen Kane ( 1941 ) Lawrence of Arabia ( 1962 ) Schindler's List ( 1993 ) My Life as a Dog ( 1985 ) Rear Window ( 1954 ) Clockwork Orange , A ( 1971 ) Average
BoxOffice Gross Title $ 40,158,000 Fargo ( 1996 ) $ 24,611,975 Star Wars ( 1977 ) $ 5,806,467 Godfather , The ( 1972 ) $ 5,074,621 Schindler's List ( 1993 ) $ 1,640,769 Casablanca ( 1942 ) $ 20,652,481 Silence of the Lambs , The ( 1991 ) $ 140,409,248 Full Monty , The ( 1997 ) $ $ $ 38,589,355 Pulp Fiction ( 1994 ) $ 29,204,778 Average
8,345,266 Piano , The ( 1993 ) 6,759,601 Secrets & Lies ( 1996 )
5,806,467 Fargo ( 1996 )
BoxOffice Gross Title $ 24,611,975 Dr . Strangelove or : How I ( 1963 ) $ 731,853,665 Once Were Warriors ( 1994 ) $ 291,702,411 Wallace & Gromit : The Best ( 1996 ) $ 140,409,248 Wings of Desire ( 1987 ) $ $ 137,332,208 Citizen Kane ( 1941 ) $ $ $ $ $ 151,517,092 Average
45,857,453 Great Dictator , The ( 1940 ) 40,158,000 Secrets & Lies ( 1996 ) 13,417,292 Diva ( 1981 ) 84,022,201 Annie Hall ( 1977 )
BoxOffice Gross $ 5,074,621 $ 2,201,126 $ 900,976 $ 3,806,540 $ 24,611,975 $ 1,640,769 $ 395,872 $ 13,417,292 $ 108,372 $ 57,253,791 $ 10,941,133
Figure 11 . The watched list of the user 585 and recommendation results of existing methods for the user . The shaded cells for the Tangent and PPTM are newly added items compared to the ItemRank recommendation
515
Fargo , earned less than 25 million . The average is 151 million which is 15 times higher than the average gross of the watched list . Furthermore , newly added items do not seem to be suitable for the interest of the user . The Godfather , Star Wars , Pulp Fiction and other newly added movies are also quite popular movies but they seem quite different from the movies the user has watched .
PPTM shows better recommendation results than others . First of all , in terms of popularity , our method outperformed other methods . The average gross of our method is highly similar to that of the actual watched list , and there is only one item of which the gross earning exceeded 25 million . In addition , newly added items seem similar to the user ’s preference . Wings of Desire is considered an art film . And Wallace & Gromit opened up a new genre called clay animation and thus it has quite a reputation . The Great Dictator is a Charles Chaplin movie , and he is considered by some to be the greatest comedian of the 20th century .
VI . CONCLUSION
In this paper , we introduced a new way of measuring novelty based on popularity and diversity . Existing methods recommend only popular items or degrade accuracy of recommendation significantly due to lack of balance between novelty and user preference . We also found that there existed a Personal Popularity Tendency in real data . Based on the discovery of Personal Popularity Tendencies , we proposed a new recommendation method that balances novelty and user preference by matching PPT of recommendation to that of active users . We used EMD to measure the difference between PPTs and proposed method incorporating the EMD based on theoretical analysis . Our empirical results showed that PPTM performs well comparing to existing CF and novel recommendation method in terms of both novelty and accuracy .
Acknowledgement This work was supported by the Brain Korea 21 Project in 2011 , and the Korea Research Foundation Grant funded by the Korean Government(KRF 20110016029 ) .
REFERENCES
[ 1 ] G . Chen , F . Wang , and C . Zhang . Collaborative filtering using orthogonal nonnegative matrix tri factorization . Information Processing & Management , 2009 .
[ 2 ] M . Deshpande and G . Karypis . Item based top n recommen dation algorithms . ACM TOIS , 2004 .
[ 3 ] F . Fouss , A . Pirotte , J m Renders , and M . Saerens . RandomWalk Computation of Similarities between Nodes of a Graph with Application to Collaborative Recommendation . IEEE TKDE , 2007 .
[ 4 ] F . Fouss , a . Pirotte , and M . Saerens . A Novel Way of Computing Similarities between Nodes of a Graph , with Application to Collaborative Recommendation . The 2005 IEEE/WIC/ACM WI , 2005 .
[ 5 ] N . Good , J . Schafer , J . Konstan , A . Borchers , B . Sarwar , J . Herlocker , and J . Riedl . Combining collaborative filtering with personal agents for better recommendations . In AAAI , 1999 .
[ 6 ] M . Gori and A . Pucci .
Itemrank : A random walk based scoring algorithm for recommender engines . In IJCAI , 2007 .
[ 7 ] GroupLens Research . MovieLens .
[ 8 ] J . Herlocker , J . Konstan , A . Borchers , and J . Riedl . An algorithmic framework for performing collaborative filtering . In ACM SIGIR , 1999 .
[ 9 ] J . L . Herlocker , J . a . Konstan , L . G . Terveen , and J . T . Riedl . Evaluating collaborative filtering recommender systems . ACM TOIS , 2004 .
[ 10 ] Z . Huang , H . Chen , and D . Zeng . Applying associative retrieval techniques to alleviate the sparsity problem in collaborative filtering . ACM TOIS , 2004 .
[ 11 ] R . Jin , J . Y . Chai , and L . Si . An automatic weighting scheme for collaborative filtering . In ACM SIGIR , 2004 .
[ 12 ] J . Kamahara , T . Asakawa , S . Shimojo , and H . Miyahara . A Community Based Recommendation System to Reveal Unexpected Interests . In 11th IEEE International Multimedia Modelling Conference , 2005 .
[ 13 ] G . Linden , B . Smith , and J . York . Amazon . com recommenIEEE Internet dations : Item to item collaborative filtering . computing , 7(1):76–80 , 2003 .
[ 14 ] M . Nakatsuji , Y . Fujiwara , K . Fujimura , A . Tanaka , T . Ishida , and T . Uchiyama . Classical Music for Rock Fans ? : Novel Recommendations for Expanding User Interests . ACM CIKM , 2010 .
[ 15 ] K . Onuma , H . Tong , and C . Faloutsos . novel , ’s urprise me’ , recommendation algorithm . SIGKDD , 2009 .
Tangent : a In ACM
[ 16 ] P . Resnick , N . Iacovou , M . Suchak , P . Bergstrom , and J . Riedl . GroupLens : an open architecture for collaborative filtering of netnews . In Proceedings of the 1994 ACM conference on Computer supported cooperative work , 1994 .
[ 17 ] B . Sarwar , G . Karypis , J . Konstan , and J . Reidl . Item based In ACM collaborative filtering recommendation algorithms . WWW , 2001 .
[ 18 ] V . Schickel Zuber and B . Faltings .
Inferring user ’s prefer ences using ontologies . In AAAI , 2006 .
[ 19 ] J . Wang , A . De Vries , and M . Reinders . Unifying userbased and item based collaborative filtering approaches by similarity fusion . In ACM SIGIR , 2006 .
[ 20 ] C . Ziegler , S . McNee , J . Konstan , and G . Lausen . Improving recommendation lists through topic diversification . In WWW , 2005 .
516
