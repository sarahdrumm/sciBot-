Statistical Arbitrage Mining for Display Advertising
Weinan Zhang , Jun Wang
Department of Computer Science , University College London
{w.zhang , jwang}@csuclacuk
ABSTRACT We study and formulate arbitrage in display advertising . Real Time Bidding ( RTB ) mimics stock spot exchanges and utilises computers to algorithmically buy display ads per impression via a real time auction . Despite the new automation , the ad markets are still informationally inefficient due to the heavily fragmented marketplaces . Two display impressions with similar or identical effectiveness ( eg , measured by conversion or click through rates for a targeted audience ) may sell for quite different prices at different market segments or pricing schemes . In this paper , we propose a novel data mining paradigm called Statistical Arbitrage Mining ( SAM ) focusing on mining and exploiting price discrepancies between two pricing schemes . In essence , our SAMer is a meta bidder that hedges advertisers’ risk between CPA ( cost per action) based campaigns and CPM ( cost per mille impressions) based ad inventories ; it statistically assesses the potential profit and cost for an incoming CPM bid request against a portfolio of CPA campaigns based on the estimated conversion rate , bid landscape and other statistics learned from historical data . In SAM , ( i ) functional optimisation is utilised to seek for optimal bidding to maximise the expected arbitrage net profit , and ( ii ) a portfolio based risk management solution is leveraged to reallocate bid volume and budget across the set of campaigns to make a risk and return trade off . We propose to jointly optimise both components in an EM fashion with high efficiency to help the meta bidder successfully catch the transient statistical arbitrage opportunities in RTB . Both the offline experiments on a real world large scale dataset and online A/B tests on a commercial platform demonstrate the effectiveness of our proposed solution in exploiting arbitrage in various model settings and market environments . Keywords Statistical Arbitrage , Real Time Bidding , Display Ads 1 .
INTRODUCTION
“ Half the money I spend on advertising is wasted ; the trou ble is I don’t know which half . ” — John Wanamaker ( July 11 , 1838 December 12 , 1922 ) Permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page . Copyrights for components of this work owned by others than ACM must be honored . Abstracting with credit is permitted . To copy otherwise , or republish , to post on servers or to redistribute to lists , requires prior specific permission and/or a fee . Request permissions from Permissions@acmorg KDD’15 , August 10 13 , 2015 , Sydney , NSW , Australia . cfl 2015 ACM . ISBN 978 1 4503 3664 2/15/08 $1500 DOI : http://dxdoiorg/101145/27832582783269
A popular quotation from John Wanamaker , a pioneer in advertising and department stores , illustrates how difficult it was to quantify the response and performance in advertising a hundred years ago . Over the last twenty years , advancement of the World Wide Web has fundamentally changed this by providing an effective feedback mechanism to measure the response through observing users’ search queries , navigation patterns , clicks , conversions etc . Recently , RealTime Bidding ( RTB ) has emerged to be a frontier for Internet advertising [ 27 , 17 ] . It mimics stock spot exchanges and utilises computers to programmatically buy display ads in real time and per impression via an auction mechanism between buyers ( advertisers ) and sellers ( publishers ) [ 32 ] .
Such automation not only improves efficiency and scales of the buying process across lots of available inventories , but , most importantly , encourages performance driven advertising based on targeted clicks , conversions etc . , by using real time audience data . As a result , ad impressions become more and more commoditised in the sense that the effectiveness ( quality ) of an ad impression does not rely on where it is bought or whom it belongs to any more , but depends on how much it will benefit the campaign target ( eg , underlying Web users’ satisfactions and their direct responses)1 .
According to the Efficient Market Hypothesis ( EMH ) in finance , in a perfectly “ efficient ” market , security ( such as stock ) prices should fully reflect all available information at any time [ 13 ] . As such , no arbitrage opportunity exists , ie , one can neither buy securities which are worth more than the selling price , nor sell securities worth less than the selling price without making riskier investment [ 18 ] . However , due to the heavily fragmented , non transparent ad marketplaces and the existence of various ad types , eg , sponsored search , display ads , affiliated networks , and pricing schemes , eg , cost per mille impressions ( CPM ) , cost per click ( CPC ) , cost per action ( CPA ) , the ad markets are not informationally efficient . In other words , two display opportunities with similar or identical targeted audiences and visit frequency may sell for quite different prices . While exploiting such price discrepancies is still debatable in the advertising field , the following four arbitrage situations exist :
I Inter exchange arbitrage . Multiple ad exchanges exist . As the supply and demand vary across exchanges for the same user types or targeting rules , there exist intermediary agencies that act as a buyer with low bid in exchange A and as a seller with high reserve price in exchange B in order to make profits [ 4 ] .
1Our discussion is limited to performance driven ads and direct responses such as clicks and conversions only , whereas for the purpose of branding , the quality of publishers still play an important role in defining the ad inventory quality .
1465 II Guaranteed delivery and spot market arbitrage . Some demand side platforms ( DSPs ) offer advertisers the contracts with guaranteed delivery [ 3 ] while buying ad inventories over an RTB exchange with nonguaranteed spot prices [ 25 ] . Conversely , some ad agencies buy inventories in advance in bulk for fixed “ preferential rates ” from private marketplaces , and then charge a client for their campaigns with the spot prices .
III Publisher volume I/O arbitrage . A publisher can purchase traffic to her Web page and subsequently make more from ad revenue than the initial inbound click cost . An extreme case is a homepage purely dedicated to host ads : the Million Dollar Homepage2 .
IV Pricing scheme arbitrage . In RTB , different counter parties prefer different pricing schemes in order to reduce their risk of deficit [ 19 ] . CPM is commonly used for RTB auction and preferred by publishers because it is likely to generate stable income from the site volume . By contrast , advertisers focusing on performance are likely to follow CPA and CPC pricing schemes as they are directly related to return on investment ( ROI ) [ 10 ] . As such , if the CPM cost to acquire a user conversion is less than the CPA payoff for the conversion , an intermediate agent can earn a positive profit .
Scientifically , this is of great interest as it presents a new type of data mining problem , which demands a principled mathematical formulation and novel computational solution to mine and exploit arbitrage opportunities in real time display advertising . Commercially and socially , principled ad arbitrage algorithms would not only ensure the business more smooth and risk free ( eg , III & IV ) , but also make the ad markets more transparent and informationally more efficient ( eg , I , II & IV ) by connecting otherwise segmented markets to correct the misallocation of risks and prices , and eventually reach an “ arbitrage free ” equilibrium .
In this paper , we formulate Statistical Arbitrage Mining ( SAM ) and present a solution in the context of display advertising . We focus on modelling discrepancies between CPAbased campaigns and CPM based ad inventories ( IV above ) , while the arbitrage models for the remaining cases can be obtained analogically . The studied arbitrage is a stochastic one due to the uncertainty of market supply/demand and users responses . The probability distribution of the arbitrage net profit from an ad display opportunity is estimated by user response predictors [ 21 ] and the bid landscape forecasting models [ 8 ] , trained on historic large scale data . Essentially , the proposed Statistical Arbitrage Miner is a campaign independent RTB bidder , which assesses the arbitrage opportunity for an incoming CPM bid request against a portfolio of CPA campaigns , then selects a campaign and provides a bid accordingly . Different from previous work on per campaign RTB bidding strategies [ 28 , 34 ] , we introduce the concept of meta bidder , which performs the bidding for a portfolio of ad campaigns , similar to a hedge fund holding a set of valid assets in financial markets . In our SAM framework , ( i ) functional optimisation is utilised to seek for an optimal bidding function to maximise the expected arbitrage net profit , and ( ii ) a portfolio based risk management solution is leveraged to reallocate the bidding volume and budget across multiple campaigns to make a trade off between arbitrage risk and return . We propose to jointly optimise those two components in an EM fashion with high efficiency to make meta bidder successfully catch the transient statistical
2http://wwwmilliondollarhomepagecom/ arbitrage opportunities in RTB . Experiments on both largescale datasets and online A/B tests demonstrate the large improvement of our proposed SAM solutions over the stateof the art baselines . 2 . RELATED WORK
Display Advertising Optimisation . Before the emerging of the auction based RTB market , most research work on display advertising optimisation is about ad inventory allocation on behalf of publishers in order to maximise the revenue with the guaranteed delivery constraints [ 2 , 14 ] . The authors in further [ 3 ] propose an automatic model for pricing the guaranteed contracts based on the prices of the targeted individual user visits in a spot market . With the arrival of ad exchange and RTB , a lot of work emerges on auction based optimisation for display advertising . On the publisher side , the placement level reserve price optimisation is studied in [ 31 ] . The authors in [ 16 ] suggest that the publisher could act as a bidder on behalf of its guaranteed contracts so as to make smart inventory allocations among the guaranteed and non guaranteed contracts . One step further , the pricing model of guaranteed contracts with the alternatives of RTB spot market is proposed in [ 7 ] . On the advertiser side , the bid optimisation for campaign performance improvement is studied . The authors in [ 20 ] propose a budget pacing scheme embedded in a campaign conversion revenue optimisation framework to maximise the campaign revenue . The authors in [ 28 , 34 ] focus on a bidding function formulation to maximise the campaign clicks . Bid landscape forecasting models [ 8 ] are studied to estimate the campaign ’s impression volume and cost given a bidding function .
The authors in [ 5 ] study auction mechanisms considering arbitrage between CPC and CPM pricing schemes . The study aims for designing an auction mechanism on behalf of the ad exchange and yielding truthful bidding from advertisers and truthful CTR reporting from arbitrageurs . By contrast , our work focuses on developing a statistical method for mining and exploiting arbitrage opportunities between CPA and CPM .
Statistical Arbitrage in Finance .
In financial markets , as a trading strategy , statistical arbitrage is a quantitative approach to security trading . It utilises statistical methods with high frequency trading systems to detect statistical mispricing of securities caused by market inefficiency to make profit with a large number of transactions [ 18 ] .
Drawing an analogy with the statistical arbitrage of security pairs trading [ 15 ] in finance , in our paper , the campaign ’s CPA contract and its performance in RTB spot markets can be regarded as a pair of correlated securities . Statistically speaking , if the campaign ’s performance in an RTB market ensures that the average cost to acquire a conversion ( ie , eCPA ) is lower than the payoff from the CPA contract , then a statistical arbitrage opportunity exists . Such opportunity could also be considered to be caused by informational inefficiency of the advertising market where the advertisers fail to lower their CPA payoff when their campaigns in RTB spot market have a good performance .
Modern Portfolio Theory in Finance . As Nobel Prize work [ 24 ] , modern portfolio theory ( MPT ) originates from modelling uncertainty of the return of financial assets . MPT utilises the mean variance analysis to make an investment solution for any tradeoff between the expected return and the risk , or wrt a reference investment [ 29 ] .
Recently , MPT has been introduced into information retrieval ( IR ) fields to model the expectation and uncertainty
1466 Table 1 : Notations and descriptions .
Notation Description x The bid request represented by its features . px(x ) The probability density function of x . i The ith campaign in the meta bidder portfolio .
M Number of campaigns in the meta bidder portfolio . ri The payoff of campaign i for each conversion . R The variable of meta bidder arbitrage net profit . C The variable of meta bidder arbitrage cost .
θ(x , i ) The predicted CVR if i wins the auction of x .
We occasionally use θ to refer to a specific CVR . pi θ(θ ) The probability density function of CVR θ for campaign i .
B The meta bidder total budget . T The estimated number of bid requests during the arbitrage period . b(θ , r ) The bidding function which returns the bid . b is also used to refer to a specific bid value . w(b ) The probability of winning a bid request with bid price b . vi The probability of selecting campaign i .
For multiple campaigns , the campaign selection probability vector is v = ( v1 , v2 , . . . , vM )T . of users’ preference on the retrieved documents for search engines [ 30 ] or from recommender systems [ 33 ] . To our knowledge , there is no work adopting MPT into the revenue optimisation in online advertising . In our paper , we present a novel way of using MPT and it is naturally integrated into our bid optimisation framework .
3 . STATISTICAL ARBITRAGE MINING
In this section we formulate and solve the SAM problem in the context of RTB display advertising . Our paper is intended to be self contained , but for a detailed introduction of RTB and its ecosystem , we refer to [ 32 , 35 ] . 3.1 Problem Definition
Let us suppose there is an ad agent acting on behalf of advertisers to run their ad campaigns . To hedge advertisers’ risk , quite often an ad agent gets paid on the basis of the performance : receive a payoff each time a placed ad eventually leads to a product purchase ( cost per action , CPA)3 . Note that it remains active research to determine whether and how much a purchase action is attributed to the previously ads shown to the user . In this paper , we adopt the last touch attribution model commonly used in the industry – the last ad impression before the user ’s conversion event is assigned with the full attribution credit [ 9 ] . To run the campaigns and place the ads , the agent then goes to the RTB market to purchase ad impressions . In RTB , the ad agent pays the cost for each ad impression displayed ( cost per mille , CPM ) on the basis of second price auction . In essence , the ad agent is an arbitrageur , making a profit so long as the payoff by conversions ( CPA ) is higher than the cost ( CPM ) of acquiring relevant users to making the purchase . Potentially , the agent could in parallel run a large number of campaigns from various advertisers to scale up their profit . Note that the ad agent builds their business by taking the risk from the uncertainty of market competitions and user behaviours . For the entire ad ecosystem , it is healthy as it protects both advertisers and publishers by introducing an intermediary layer that exploits ( and ultimately remove ) the discrepan
3A notable example is mobpartner.com who explicitly offers payoffs ( CPA deals ) for anyone who can acquire the needed customers programmatically .
Figure 1 : An ad agent running a meta bidder ( arbitrageur ) for statistical arbitrage mining . cies between market segments ( in this case , the two pricing schemes , CPA and CPM ) .
Traditionally , these arbitrages are accomplished manually . With statistical approaches , it is possible that the above operations can be automatically done by an intelligent metabidder across campaigns , where for a certain CPA campaign , the meta bidder seeks cost effective ad impressions with high conversion possibility and low market competition .
Mathematically , we formulate the problem below : Suppose there exist M CPA based campaigns . Each campaign i has set its payoff for a conversion as ri . Over period T , the meta bidder keeps receiving bid requests at time t ∈ {1 , . . . , T} , where each bid request is represented with high dimensional feature vector xt and if won , it is charged based on CPM . For each of the incoming bid requests , the Statistical Arbitrage Mining ( SAM ) problem is to select a campaign and specify its bid such that over the period T the expected total arbitrage net profit ( accumulated payoff minus cost ) is maximised . vi to participate the RTB auction , whereM
We consider the following process . When a bid request comes , the meta bidder samples campaign i with probability i=1 vi = 1 . Once campaign i is selected , the meta bidder then estimates its conversion rate ( CVR ) , denoted as θ(xt , i ) , ie , if the ad is placed in this impression , how likely the underlying user will see the ad and eventually convert ( purchase ) [ 21 ] . After that , the meta bidder generates the bid price via a bidding function b(θ , ri ) depending on CVR θ(xt , i ) and conversion payoff ri [ 34 ] . The notations are summarised in Table 1 ; an illustration on how the SAMer works is given in Figure 1 .
Given campaign selection probability v and bidding function b(θ , r ) , the meta bidder ’s total arbitrage net profit is given by summation over bid requests and campaigns :
T
M
·
T
M
R(v , b(θ , r ) ) =
θ(xt , i)ri − b(θ(xt , i ) , ri ) t=1 i=1 w(b(θ(xt , i ) , ri))vi ,
( 1 ) where w(b ) is the probability of winning an RTB auction given bid b . Product w(b)vi specifies the probability a campaign is selected and wins the auction ; ( θri − b ) is net profit for the winning campaign . The total cost upper bound is
C(v , b(θ , r ) ) = b(θ(xt , i ) , ri)w(b(θ(xt , i ) , ri))vi , ( 2 ) t=1 i=1 where bid price b is the maximal possible cost for a campaign to be placed due to the second price auction [ 31 ] . Next , we need to model how likely we will see an ad impression with feature xt in the future . We assume xt ∼ px(xt ) ; that is for a relatively short period , the bid request feature is drawn from an iid built from historic data . The
RTB AdExchange5 . Auction0 . Bid Request6 . FeedbackConversionCPM AdInventory4 . Bid Responsei1 . CampaignSelection2 . CVREstimation3 . ArbitrageBiddingCampaign iCVR ӨCampaign 1 , CPA r1Campaign 2 , CPA r2Campaign M , CPA rMMeta bidderCPA CampaignsCPA riCPA ri1467
M whole model needs to be re trained periodically with the latest data . Detailed empirical study on the re training frequency for dynamic arbitrage will be given in Section 44 Taking the integration over x gives the expected net profit :
θ(x , i)ri − b(θ(x , i ) , ri ) w(b(θ(x , i ) , ri))vipx(x)dx
E[R(v , b(θ , r) ) ]
M
M i=1 x vi i=1
θ
=T
=T
θ(θ(x , i ) ) = px(x)/||∇θ(x , i)|| as there is a determinwhere pi istic relationship between x and its estimated CVR θ(x , i ) , also given in [ 34 ] . Similarly the total cost is rewritten as
E[C(v , b(θ , r) ) ] = T vi b(θ , ri)w(b(θ , ri))pi
θ(θ)dθ . ( 4 ) i=1
θ
Finally , the SAM is cast as a constrained optimisation problem : to find campaign selection probability v and bidding function b(θ , r ) to maximise the expected arbitrage net profit with budget and risk constraints : E[R ]
( ) = argmax bSAM( ) , v
( 5 )
∗ b(),v st E[C ] ≤ B
Var[R ] ≤ h 0 ≤ v ≤ 1 vT 1 = 1 ,
( 6 ) ( 7 ) ( 8 )
( 9 ) where we use variance Var[R ] to measure the risk of the net profit and h is a parameter for an upper tolerable risk .
We propose to solve the problem ( Eq ( 5 ) ) in an EM fashion . In particular , the campaign selection probability v is regarded as the latent factors to infer and the bidding function b(θ , r ) is regarded as the parameter used to maximise the optimisation target . In E step , we fix the current estimated bidding function b(θ , r ) and solve the optimal campaign selection probability v with the constraints Eqs . ( 7 ) , ( 8 ) , & ( 9 ) . In M step , we fix the campaign selection probability v and seek for the optimal bidding function b(θ , r ) to maximise the target under the budget constraint Eq ( 6 ) . When the EM iterations get converged , all the constraints are satisfied and the target is maximised . The following Section 3.2 will describe the detailed solution of optimal bidding function ( M step ) , and Section 3.3 will discuss the solution of campaign selection probability v ( E step ) . 3.2 Optimal Arbitrage Bidding Function
With the fixed v and the budget constraint at Eq ( 6 ) , we have a functional optimisation problem in M step :
Taking its functional derivative wrt b(θ , r ) , we have ∂L(b(θ , r ) , λ )
∂w(b(θ , ri ) )
( θri − ( 1 + λ)b(θ , ri ) )
= T
∂b(θ , ri )
M i=1
− ( 1 + λ)w(b(θ , ri ) ) vipi
θ(θ ) . ( 13 )
A sufficient condition of making this derivative be zero is
∂w(b(θ , ri ) )
∂b(θ , ri )
− b(θ , ri )
∂b(θ , r )
θri
1 + λ
= w(b(θ , ri) ) ,
( 14 ) for all campaign i . With the specific functional form of winning function w(b ) we can derive the optimal SAM bidding function . Below we show solutions in two special cases . 321 Uniform Market Price Solution Here we make a simple example of linear winning function form ( see Figure 2(a ) ) based on the assumption of the uniform market price4 distribution in [ 0 , l ] : w(b(θ , r ) ) = b(θ , r ) l
,
( 15 ) where the function domain is also [ 0 , l ] . l is the upper bound of bid price and there is no need to bid higher than l .
Replacing Eq ( 15 ) into Eq ( 14 ) gives the optimal arbi trage bidding function bsam1 as bsam1(θ , r ) = rθ
2(1 + λ )
.
( 16 )
To calculate optimal λ , a sufficient condition of the partial derivative ∂L(b(θ , r ) , λ)/∂λ = 0 in Eq ( 12 ) is B T b(θ , r)w(b(θ , r))pθ(θ)dθ =
.
θ
Taking Eqs . ( 15 ) and ( 16 ) into Eq ( 17 ) gives r2 where if we denote φ ≡
4(1 + λ)2l
θ2pθ(θ)dθ =
B T
,
θ θ2pθ(θ)dθ , we have
θ
( 17 )
( 18 )
( 19 )
Replacing Eq ( 19 ) into Eq ( 16 ) gives the final solution of bidding function bsam1(θ , r ) =
Bl T φ
θ ,
( 20 )
θri − b(θ , ri ) w(b(θ , ri))pi
θ(θ)dθ ,
( a ) Winning function
( b ) CVR pdf
( 3 )
Figure 2 : Linear winning function w(b(θ ) ) and beta CVR pdf pθ(θ ) .
θri − b(θ , ri ) w(b(θ , ri))pi
θ(θ)dθ
( 10 )
λ = r 2
− 1 .
T φ Bl b(θ , ri)w(b(θ , ri))pi
θ(θ)dθ ≤ B .
( 11 )
θ
θ vi vi i=1
M M i=1 max b( )
T st T
M
T vi i=1
θ
The Lagrangian L(b(θ , r ) , λ ) =
θri − ( λ + 1)b(θ , ri ) w(b(θ , ri))pi
θ(θ)dθ + λB .
( 12 )
4Market price refers to the highest bid price amongst the competitors for each auction [ 1 ] . From a bidder ’s perspective , it can win an auction if the its bid price is higher than the market price on this auction .
00002505007510001/3l2/3llbid pricewinning probability0123000025050075100CVRprobabilistic density1468 where surprisingly the bidding function does not depend on r . This is because the linear forms of w(b ) in Eq ( 15 ) and bsam1(θ , r ) in Eq ( 16 ) make θ factorised out from r/(1 + λ ) in Eq ( 18 ) , which in turn removes the factor of r/(1 + λ ) . φ depends on the probabilistic distribution pθ(θ ) , eg , the beta distribution Beta(2,8 ) as shown in Figure 2(b ) , and can be calculated with empirical data . 322 Long Tail Market Price Solution We now consider a more practical winning function used in [ 34 ] , which is based on a long tail market price distribution pz(z ) = l/(z + l)2 with parameter l . As such , the winning function is w(b(θ , r ) ) = pz(z)dz = b(θ , r ) b(θ , r ) + l
.
( 21 ) b(θ,r )
0
The real world data analysis on winning bids in [ 34 ] demonstrates the feasibility of adopting the winning function in Eq ( 21 ) in practice . Taking Eq ( 21 ) into Eq ( 14 ) gives the optimal arbitrage bidding function bsam2 as + l2 − l , rlθ bsam2(θ , r ) =
( 22 )
1 + λ which is in a concave form wrt CVR θ . Solution of λ . It is possible that the optimal situation does not exhaust the budget and we can leverage the training data to tune the empirically best λ as a parameter . However , if we assume that the bid request volume T is large enough to exhaust the budget , then the optimal case is an equality condition for Eq ( 11 ) . To calculate the optimal λ , the EulerLagrange condition of λ is Eq ( 17 ) . With Eq ( 22 ) , we explicitly regard λ as an input of bidding function b(θ , r , λ ) and rewrite ∂L(b(θ , r ) , λ)/∂λ = 0 from Eq ( 12 ) as
M vi i=1
θ
M vi i=1
θ
M min
λ vi i=1
θ
M
Ni min
λ vi i=1 k=1
Ni
λ ←λ − η vi
M ∂b(θi k=1 i=1 k , ri , λ ) ∂λ b(θ , ri , λ)w(b(θ , ri , λ))pi
θ(θ)dθ =
B T
.
( 23 )
In most situations except some special cases like Section 321 ,
λ has no analytic solution . For numeric solution , we can rewrite Eq ( 23 ) as b(θ , ri , λ)w(b(θ , ri , λ ) ) − B T pi θ(θ)dθ = 0 ,
( 24 ) which has the same solution with the minimisation problem
1 2 b(θ , ri , λ)w(b(θ , ri , λ ) ) − B T pi θ(θ)dθ .
If we have a very large number Ni of observations of θ ’s for each campaign i , we can write the above equation as
1 2 b(θi k , ri , λ)w(b(θi k , ri , λ ) ) − B T
,
( 25 ) where we can use ( mini )batch descent or stochastic gradient descent to solve λ by the following iteration :
· ( 26 ) b(θi k , ri , λ)w(b(θi k , ri , λ ) ) − B T w(b(θi k , ri , λ ) ) + b(θi k , ri , λ )
∂w(b(θi k , ri , λ ) ) ∂λ k , r , λ)w(b(θi against b(θ , r , λ ) , b(θi k , r , λ ) ) has a monotonic relationship with λ . For example , with the bidding function as Eq ( 22 ) and the winning function as Eq ( 21 ) , the factor b(θi k , r , λ ) ) decreases monotonically against λ , which makes the optimal solution quite easy to find . 3.3 Optimal Campaign Selection k , r , λ)w(b(θi
Fixing the resolved optimal arbitrage bidding function b(θ , r ) from previous M step , we can optimise the campaign selection probability v and check whether it is better to reallocate the volume for each campaign .
We here introduce the concept of SAM net profit margin γ in RTB display advertising . The net profit margin is the ratio of the net profit of the advertising , either from one campaign or a set of them ( meta bidder ) , divided by the advertising cost during the corresponding period . In fact , γ = R/C = ROI−1 . γ is a random variable with expectation and variance . By modelling γi for each campaign i , the optimal campaign selection can be solved by portfolio based risk management methods . 331 Single Campaign With optimal arbitrage bidding function b(θ , r ) by Eq ( 14 ) , we calculate the expectation and variance of the net profit margin γi for each campaign i by
µi(b ) = E[γi ] = E Ri(vi=1 , b ) i ( b ) = E Ri(vi=1 , b)2
Ci(vi=1 , b )
σ2
Ci(vi=1 , b)2
,
− E Ri(vi=1 , b )
2
,
( 27 )
( 28 )
Ci(vi=1 , b ) where Ri(vi=1 , b ) and Ci(vi=1 , b ) are as in Eqs . ( 1 ) and ( 2 ) with vi = 1 and vj = 0 for all other campaign j . Both µi(b ) and σ2 i ( b ) can be estimated from MCMC methods : ( i ) repeat N times on sampling T bid requests from the training data and calculate Ri(vi=1 , b ) and Ci(vi=1 , b ) , then ( ii ) calculate the expectation and variance using these N observations of Ri(vi=1 , b ) and Ci(vi=1 , b ) . 332 Campaign Portfolio Suppose there are M campaigns in the meta bidder with CPA contracts . For each campaign i , as discussed in Section 331 , there is a variable of achieved net profit margin γi given the bidding function b( ) , and its expectation is µi(b ) and standard deviation is σi(b ) . As such , the vector of expected net profit margins for these M campaigns is
µ(b ) = ( µ1(b ) , µ2(b ) , . . . , µM ( b))T
( 29 ) and the covariance matrix for the net profit margins of the M campaigns is Σ(b ) = {σi,j(b)}i=1M,j=1M , where each element
σi,j(b ) = βi,jσi(b)σj(b ) ,
( 30 ) where βi,j ∈ [ −1 , 1 ] is the net profit margin correlation factor between campaign i and j , which can be calculated by routine given the net profit margin time series of the two campaigns i and j [ 24 ] .
We call such probabilistic campaign combination as campaign portfolio . With the campaign selection probability v , the campaign portfolio expected net profit margin and its variance are
µp(v , b ) = vT µ(b ) , σ2 p(v , b ) = vT Σ(b)v .
( 31 )
,
2
2 until convergence . Usually , as b(θ , r , λ ) has a monotonic relationship with λ and w(b(θ , r , λ ) ) monotonically increases
Generally , the arbitrage net profit margin may change wrt the allocated volume : the more bid request volume , the more
1469 Algorithm 1 Statistical Arbitrage Mining for Display Ads Require : Meta bidder winning function w(b ) Require : CTR distribution pi
θ(θ ) for each campaign i
Initialise b(θ , r ) = rθ and v = 1/M . while not converged do
E step :
Get µ(b ) and Σ(b ) by Eq ( 29 ) and Eq ( 30 ) Solve optimal v by Eq ( 32 )
M step :
Get the bidding function form by w(b ) and Eq ( 14 ) Solve λ by Eq ( 26 ) Update the SAM bidding function b(θ , r ) by Eq ( 22 ) end while return v and b(θ , r ) statistical arbitrage opportunities , and the higher margin . For simplicity , we assume that the net profit margin distribution does not change much wrt the auction volume allocated to the campaign during a short period . The empirical results in Section 4.3 will demonstrate the eligibility of the assumption . 333 Campaign Portfolio Optimisation The E step of the original optimisation problem Eq ( 5 ) , with the fixed bidding function and constraint Eqs . ( 7 ) , ( 8 ) , & ( 9 ) , can be rewritten by taking the Lagrangian as vT µ(b ) − αvT Σ(b)v , max st vT 1 = 1 , 0 ≤ v ≤ 1 , v
( 32 ) where the Lagrangian multiplier α acts as a risk averse parameter to balance the the expected net profit margin and its variance . This optimisation framework is widely used as portfolio optimisation [ 30 , 33 ] .
When the risk , ie , the variance of the net profit margin , is not considered , α is set as 0 . Then the campaign i with the highest µi(b ) will be always selected , ie , vi = 1 , while vj = 0 for all other campaigns j .
Finally , the overall operations to get the optimal campaign selection probability v and the arbitrage bidding function b(θ , r ) are summarised in Algorithm 1 . Theoretically , just like the EM algorithms for likelihood maximisation , every EM iteration in our case will at least not drop the expected net profit ( Eq ( 5) ) . In practice , v and b(θ , r ) will get converged within 5 EM iterations . For E step , the computationally costly parts are the MCMC methods for evaluating the margin of M individual campaign ( Eqs . ( 27 ) and ( 28) ) , where the time complexity is O(M N T ) , and the campaign correlation calculation ( βi,j in Eq ( 30) ) , which is O(M 2N T ) . For M step , the bidding function is derived with closed form ; the calculation of λ by numeric descent methods Eq ( 26 ) , which depends on the data values but is normally much efficient . The performance in Section 4.4 will demonstrate the capability of our proposed solution for highly efficient re training in dynamic arbitrage tasks .
4 . EXPERIMENTS 4.1 Experiment Setting 411 Datasets We conduct our experiments5 based on two real world large scale bidding logs collected from two DSP companies . iPinYou RTB dataset was published after iPinYou ’s global RTB algorithm competition in 2014 . This dataset contains the bidding and user feedback log from 9 campaigns during 10 days in 2013 , which consists of 64.75M bid records , 19.50M impressions , 14.79K clicks and 16K CNY expense . The dataset disk size is 35GB . According to the data publisher [ 23 ] , the last three day data of each campaign is split as the test data and the rest as the training data . More statistics and analysis of the dataset is available in [ 35 ] .
BigTree RTB dataset is a proprietary dataset from our partner DSP company BigTree Times Co . This dataset is collected from Nov . 2014 to Feb . 2015 for 3 iOS mobile game campaigns . It consists of 10.85M impressions and 46.38K actions6 with $0.083 CPA . We use this dataset to train the model and conduct online A/B test on BigTree DSP during Feb . 2015 .
Both datasets are in a record per line format , where each line consists of three parts : ( i ) the features for this auction , eg , the time , location , IP address , the URL/domain of the publisher , ad slot size , user interest segments etc . ; ( ii ) the auction winning price , which is the threshold of the bid to win this auction ; ( iii ) the user feedback on the ad impression , ie , click , conversion or not .
412 Evaluation Protocol Evaluation procedure . We adopt the evaluation procedure similar to the previous work on bid optimisation [ 34 , 35 ] . In addition , for the evaluation related to the campaign sampling process ( via v ) , we follow an offline evaluation scheme similar to previous work on evaluating interactive systems [ 22 ] . As in the historic data , the user ’s feedback is only associated with the winning campaign of the auction , there is no corresponding user feedback if a different campaign is sampled . As such , based on the bid request iid assumption made before , for each round , we first sample a campaign i , then pass the next test data record of this campaign to the bid agent for bidding . If there is no more test data left for this campaign , ie , the bid requests are run out , the test ends .
Budget constraints . It is easy to see that if we set the budget the same as the original total cost in the test log , then simply bidding as much as possible for each auction will exactly run out the budget and get all the logged clicks . In our work , to test the performance against various budget constraints , for each campaign , we respectively run the evaluation test using 1/2 , 1/4 , 1/8 , . . . , 1/256 of the original total cost in the test log as the budget .
Payoff setting . To set up various difficulties in arbitrage , for our offline experiments , we manually adjust the CPA payoff for each iPinYou campaign . Specifically , for each campaign i , we set a high and a low CPA payoff in order to test the algorithms’ performance under an easy and a hard arbitrage situation , denoted as reasy , respectively : i = eCPAi × 0.8 and rhard reasy and rhard = eCPAi × 0.2 , i i i where eCPAi is the original average cost for acquiring each conversion of campaign i in the training data without any arbitrage strategy . In addition , the conversion data in iPinYou is unavailable for 7 out of 9 campaigns . To have more tests done , we thus regard the user clicks as a proxy for the desired actions ( conversions ) in our offline experiment .
5The experiment code has been published at https:// githubcom/wnzhang/rtbarbitrage
6According to the advertiser ’s contract , here the action is defined by users’ landing on the game ’s page on app store .
1470 To complement the offline tests , in our online experiments , we directly adopt the CPA payoff specified by genuine advertisers to test the real business case .
413 Compared Strategies We compare the following baseline and state of the art bidding strategies in our experiment . Their parameters are tuned on the training data . Constant bidding ( const ) . A constant bid regardless bid requests and campaigns . Though trivial , it is a simple solution widely used by many DSPs .
Random bidding ( rand ) . Randomly choose a bid value in a given range .
Truth telling bidding ( truth ) . If there is no budget constraint , one should bid the true value for each ad impression , which is CPA×CVR of the impression [ 21 ] . Linear bidding ( lin ) . In [ 28 ] , the bid value is linearly proportional to the CVR with the bid scale parameter tuned to maximise the expected conversion number .
Optimal real time bidding ( ortb ) . This is an optimal bidding strategy proposed in [ 34 ] to maximise clicks . Here we compared the ortb1 bid strategy in [ 34 ] .
Statistical arbitrage mining ( sam1 , sam2 ) . These are the two bidding strategies proposed in this paper : sam1 is from Eq ( 16 ) and sam2 is from Eq ( 22 ) , collectively denoted as samx .
SAM with competition modelling ( sam1c , sam2c ) . In a real online environment , the advertisers will tune their bidding strategies according to their campaign perforIf many bidders adopt our samx bidding smance . trategies , it is possible that this may change the market prices . In our offline empirical study , we follow [ 36 ] to adopt the opt bidding strategy [ 6 ] to simulate the market price changes towards a locally envy free equilibrium7 . Note that this is not for comparing bidding strategies but for comparing auction environment where we would like to check whether our proposed samx algorithms would still make arbitrage profit when the market changes according to our actions . We only compare the performance of samx algorithms with those in the corresponding samxc settings .
For campaign selection strategies , we compare the uniform campaign selection , ie , v = 1/M , and the portfolio based campaign selection , where portfolio will be denoted as greedy when α in Eq ( 32 ) is set as 0 . The conventional campaign selection scheme based on internal auctions [ 32 ] will be compared in online A/B test in Section 45 414 Evaluation Measures We use the net profit as the prime evaluation measure , which is calculated as #conversions * cpa_payoff cost . We also evaluate the net profit margin for each strategy , which is calculated by the net profit divided by the cost . In addition , we report the number of impressions and conversions as well as the cost for each strategy . 4.2 Single Campaign Arbitrage
In Table 2 , we report the overall performance on the tested 9 campaigns from the iPinYou dataset . We see that samx bidding strategies outperform all others regarding to the net
7The work [ 6 ] is on sponsored search with generalised second price auctions . By setting the slot number for each keyword auction as 1 and the CTR as 1.0 , the opt bidding strategy can be used for our display advertising scenario .
Table 2 : Single campaign overall performance .
Easy payoff , 1/16 budget setting profit margin cnvs . bids ( M ) 2.68 2.97 1.89 2.71 2.87 3.26 3.42 3.24 3.41 bids ( M ) 4.10 4.10 4.03 2.71 2.87 3.89 4.10 3.88 4.10 imps . ( K ) 761.91 612.90 420.19 531.49 632.38 471.46 606.97 389.09 563.74 imps . ( K ) 81.55 8.36 373.66 531.49 632.38 319.77 301.99 308.44 298.51 cost ( CNY ) 194.44 166.60 208.33 220.90 215.78 189.55 194.40 183.34 194.38 cost ( CNY ) 5.53 0.10 100.30 220.90 215.78 90.59 60.47 90.98 61.13
297 223 1,137 1,161 1,172 1,504 1,534 1,473 1,513
10 4 1,430 1,161 1,172 1,328 1,326 1,322 1,322 bid . algo . const rand truth lin ortb sam1 sam2 sam1c sam2c bid . algo . const rand truth lin ortb sam1 sam2 sam1c sam2c
( CNY ) 41.77 19.65 749.75 845.22 869.43 1,141.72 1,161.24 1,118.61 1,141.01
0.21 0.12 3.60 3.83 4.03 6.02 5.97 6.10 5.87
( CNY ) 1.40 1.08 214.08 45.63 55.52 207.34 227.76 204.73 225.95
0.25 10.47 2.13 0.21 0.26 2.29 3.77 2.25 3.70
Hard payoff , 1/16 budget setting profit margin cnvs .
( a ) net profit ( easy )
( b ) net profit margin ( easy )
Figure 3 : Single campaign arbitrage performance . profit . sam2 further outperforms sam1 particularly in the hard payoff settings due to its more practical winning function . In addition , samxc strategies still make high arbitrage profit with the market competition modelling , which demonstrates the potential of samx strategies in a real market competition environment .
Furthermore , we monitor the performance change on the arbitrage net profit and margin of each algorithm wrt the budget setting in Figure 3 . For the page limit , we only report the results with the easy payoff setting , while the results on the hard payoff setting are similar . The value on the x axis means the proportion of the original total cost in the test data divided by the test budget . The higher the proportion is , the less the budget is . From Figure 3 we have the following observations . ( i ) sam1 and sam2 outperform the rest in almost all the profit and margin comparisons with different budget settings . ( ii ) Under the higher budget setting , eg , 2 or 4 budget proportions , truth produces comparable profit as samx . This is because when the budget is abundant , the tight budget constraint ( ie , the equation in Eq ( 11 ) ) is unnecessary to meet in order to maximise the net profit . Under such situation , the bidding problem will get back to the classic second price auction problem , where the truthtelling bidding strategy is optimal [ 11 ] . ( iii ) Under the lower budget setting , eg , 64 , 128 and 256 budget proportions , the profit from truth drops significantly because of the budget constraint is quite important and the optimal bidding strategy is never truth telling . On the contrary , lin and ortb act almost the same as samx . This is reasonable because under the lower budget settings , the budget is always exhausted . With the cost the same as the budget , the more conversions the more arbitrage profit .
( cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)0400800120041664256budget proportionprofit(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)020406041664256budget proportionmarginalgorithm(cid:176)constlinortbrandsam1sam2truth1471 ( a ) net profit ( easy )
( b ) net profit ( hard )
( c ) competition profit drop ( easy )
( d ) portfolio α tuning ( easy )
( e ) efficient frontier
( f ) v allocation wrt risk
Figure 4 : Multiple campaign arbitrage performance comparison and campaign portfolio selection analysis .
Table 3 : Multi campaign overall performance . strategies bid . algo . lin lin lin ortb ortb ortb sam1 sam1 sam1 sam2 sam2 sam2 truth truth truth cam . select . greedy portfolio uniform greedy portfolio uniform greedy portfolio uniform greedy portfolio uniform greedy portfolio uniform easy payoff profit margin hard payoff profit margin
( CNY ) 501.12 925.45 747.00 517.02 802.15 765.12 966.02 1,037.98 768.38 961.68 983.01 774.09 787.10 787.10 326.57
6.63 13.11 9.53 6.65 10.32 9.89 20.81 15.84 9.78 28.73 17.21 10.32 14.69 14.69 4.14
( CNY ) 68.59 181.54 127.14 70.96 146.13 133.16 230.38 240.63 172.43 235.31 248.65 168.15 227.86 242.07 101.12
0.91 2.50 1.62 0.91 1.88 1.72 11.13 7.96 7.57 24.00 13.61 5.16 29.05 18.34 5.36
4.3 Multiple Campaign Arbitrage
We test 6 campaign portfolios from the iPinYou dataset . Each portfolio contains 4 campaigns with the data from the same period . For each portfolio , after the convergence of EM iterations , the empirically optimal v and bidding function b(θ , r ) are deployed in the campaign portfolio ’s test stage , where the auction volume and the budget are set as the same as in the training stage . Compared with the previous single campaign part , this part of experiment focuses more on the campaign portfolio selection , where the uniform , greedy and portfolio selection methods are compared .
The overall results with 1/32 budget setting are reported in Table 3 . For the comparison among the bidding strategies , samx overall outperforms others in both payoff settings . Figure 4 provides more detailed analysis . The profit trend against the budget setting , as shown in Figures 4(a ) and 4(b ) , is consistent with the single campaign setting . The competitor model setting does not significantly drop the arbitrage net profit as shown in Figure 4(c ) . Specifically , when the budget gets lower , the profit drop percentage gets lower . The reason is that fewer auctions are won with lower budget so that the market does not change much . To compare campaign selection , Table 3 shows that portfolio selection constantly outperforms uniform and greedy selection . Compared with uniform , greedy allocates all the auction volume and the budget onto the campaign evaluated as with the highest arbitrage net profit margin , which theoretically maximises the expected net profit . However , the result that portfolio outperforms greedy indicates there exists a return risk tradeoff point which practically generalises better than the maximum expectation solution . Furthermore , Figure 4(d ) shows the change of total profit from the 6 tested campaign portfolios based on sam2 against the portfolio risk averse parameter α in Eq ( 32 ) . Here setting α as a small enough value is equivalent to the greedy campaign selection . As we can see , as α increases from 10−3 , the net profit first rises to the peak value and then drops significantly . Among the different budget setting , we can observe a trend from Figure 4(d ) that is the more budget , the higher the optimal α is . For 1/256 budget setting , the optimal α is 0.01 , while 0.1 is optimal for 1/4 budget setting . This may be due to the fact that more budget brings more auction volume across a longer period , importing more risk , which is required to be carefully hedged .
In addition , we present a case study on a campaign portfolio ( 3358 , 3386 , 3427 and 3476 are four campaign IDs ) . Its return risk analysis plot is shown in Figure 4(e ) and the corresponding campaign selection probability allocation is shown in Figure 4(f ) . In Figure 4(e ) the dark blue points stand for the expected net profit margin and its standard deviation for 4 individual campaigns . As we can see , campaign 3358 has the highest expected margin as well as the highest risk while campaign 3386 is the most stable one but with the lowest expected margin . The best empirical portfolio selection is shown as the vertical dashed line in Figure 4(f ) , where 94.9 % auction volume is allocated to campaign 3358 and 4.1 % is allocated to campaign 3427 . However , if the meta bidder is more risk averse , other two campaigns can be included in order to further reduce the standard deviation . The parameter α in Eq ( 32 ) provides a flexible way to adjusting such risk and return trade off .
4.4 Dynamic Multiple Campaign Arbitrage
In practice , as the market competition and the user behaviour change across the time , the meta bidder should dynamically change its bidding strategy and campaign selection . In this part of experiment , we test the capability of our proposed sam2 bidding strategy with dynamic campaign portfolio selection over a 72 hour test period . The arbitrage bidding function and campaign selection probability
( cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)0250500750100041664256budget proportionprofitalgorithm(cid:176)constlinortbrandsam1sam2truth(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)−200−100010020041664256budget proportionprofitalgorithm(cid:176)constlinortbrandsam1sam2truth(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)−00100000100241664budget proportionprofit dropalgorithm(cid:176)sam1−sam1csam2−sam2c(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)20040060080010001e−031e−021e−011e+001e+011e+021e+03profitproportion(cid:176)41664256portfolio selection , sam21472 ( a ) easy payoff setting
( b ) hard payoff setting
Figure 5 : Dynamic multi campaign arbitrage net profit distribution with different update frequency . are updated periodically , and we refer the interval between two updates as one round . Specifically , at the beginning of each round , we re train the arbitrage bidding function and campaign selection probability using Algorithm 1 based on the bidding data collected from previous round . A problem here is that how frequent the update should be ? It is apparent that if the round period is too long , it is difficult for the meta bidder to catch the transient statistical arbitrage opportunities ; if the round period is too short , the training data could be sparse and the model might overfit the data . We test the dynamic multiple campaign arbitrage on 5 portfolios , each of which consists of 4 campaigns with the data logged within the same period . For each test campaign portfolio , we try the different update frequencies as well as different risk averse α ’s . The box plots [ 26 ] of the arbitrage net profit distribution with different update frequencies under two payoff settings are shown in Figure 5 . From the results we observe that ( i ) the positive net profit values over all cases demonstrate the capability of sam2 to make dynamic arbitrages . ( ii ) In both payoff settings , the dynamic SAM ( period no more than 24 hours ) have much better performance than the static SAM ( period equals to 72 hours , ie , only one update ) , which indicates the importance of dynamically re training the models to catch the latest market situation . ( ii ) Among the different frequencies of dynamic updating , updating every 6 hours leads to the highest arbitrage net profit . We believe this is a trade off point between the abundance and recency of the training data . Note that the optimal update frequency may be different for other campaigns or different training settings .
In addition , Figure 6 presents a case study of the 72 hour dynamic 4 campaign arbitrage with the model updated for every 6 hours . In each round , the calculated campaign selection probability ( ie , the volume allocation ) from portfolio optimisation , the estimated net profit margin of each campaign , the empirical net profit and cost are depicted . We observe that the estimated margin for each campaign varies over time , which results in the change of campaign volume allocation across the time . The empirical profit shows the same trend with the estimated campaign margin , which to some extent highlights the effectiveness of the margin estimation in our model . Moreover , the cost in each round ( ie , 6 hours ) is different , not necessarily be the average budget allocated for each round . It is possible that if the market is too competitive to make arbitrage profit , the resulting cost and profit could be both much low . 4.5 Online Test
Our SAM algorithm has been deployed and tested in a live environment provided by BigTree DSP . The model training follows the scheme in Section 43 Specifically , with Algorithm 1 , we obtain the empirically optimal sam2 bidding
Figure 6 : A case study of dynamic multi campaign arbitrage performance and the corresponding margin estimation and volume allocation .
Figure 7 : Online performance on BigTree DSP . function b(θ , r ) and campaign selection probability v for the meta bidder based on the 3 campaign training data described in Section 411 , where the hyperparameter α in Eq ( 32 ) is set as 01 As a control baseline , we deployed another metabidder with the basic linear bidding function [ 28 , 21 ] and the internal auction based campaign selection scheme [ 32 ] , denoted as base . During the online A/B test , every received bid request from the router of BigTree DSP will be randomly assigned to either of the two meta bidders , which returns the bid response , including the selected campaign ad and the bid price , back to the ad exchange for auction . The online test is conducted during 23 hours between 13 and 14 Feb . 2015 with $60 budget for each meta bidder .
Figure 7 presents the overall online performance of sam and the baseline algorithm base . The online results on the commercial DSP verify the effectiveness of our algorithm in a real commercial setting : sam leads to $30.6 arbitrage net profit with $60 budget , which is a 51.1 % margin and a 31.8 % improvement over the base bidder setting . An interesting observation is that in spite of the higher CPM , sam brings lower eCPA than base , which ultimately leads to higher arbitrage net profit . This suggests that despite the market price and arbitrage margin are different across the campaigns , our SAM algorithm would be able to successfully identify and target to the cases that have higher arbitrage margin from those high value impressions ( reflected by their high CPM ) .
( cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)200300400500136122472hourprofit(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)255075100125136122472hourprofit000025050075100122436486072hourallocationcampaign1458335833863476Campaign volume allocation against time050100150200250122436486072hourmarginEstimated campaign margin against time(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)20304050122436486072hourprofitEmpirical net profit against time(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)(cid:176)0246122436486072hourcostEmpirical cost against timecampaign14583358338634760102030basesamNet profit ( $)00020406basesamCVR ( %)050100150basesamImpressions ( K)0100200300basesamCPM ( Micro $)0300600900basesamActions000002004006basesameCPA ( $)1473 5 . CONCLUSIONS
In this paper , we conducted the first study on statistical arbitrage mining in RTB display advertising . We proposed a joint optimisation framework to maximise the expected arbitrage net profit with budget and risk constraints , which is then solved in an EM fashion . In the E step the bid volume is reallocated according to the individual campaign ’s estimated risk and return , while in the M step the arbitrage bidding function is optimised to maximise the expected arbitrage net profit with the campaign volume allocation . Aside from the theoretical insights , the offline and online largescale experiments with real world data demonstrated the effectiveness of our proposed solution in exploiting arbitrage in various model settings and market environments . We believe this would open up a whole new set of research questions that intersect between financial methods such as highfrequency trading [ 15 ] , risk management [ 24 , 12 ] and data mining methodologies for display advertising and beyond . In the future work , we plan to further improve the dynamic nature of the SAM model and extend it to mine arbitrage in other domains such as cloud computing and e commence .
Acknowledgement . We thank the engineers Tianchi Zhu , Jie Liu , Lei Gong , Yanjun He and Zhao Yang for helping conduct the online experiment on BigTree DSP .
6 . REFERENCES [ 1 ] K . Amin , M . Kearns , P . Key , and A . Schwaighofer .
Budget optimization for sponsored search : Censored learning in MDPs . UAI , 2012 .
[ 2 ] A . Bhalgat , J . Feldman , and V . Mirrokni . Online allocation of display ads with smooth delivery . In KDD , 2012 .
[ 3 ] V . Bharadwaj , W . Ma , M . Schwarz ,
J . Shanmugasundaram , E . Vee , J . Xie , and J . Yang . Pricing guaranteed contracts in online display advertising . In CIKM , 2010 .
[ 4 ] D . Bloomfield . High speed ad traders profit by arbitraging your eyeballs . http://goo.gl/3XoWd6 , 2014 . [ Accessed 2 Feb 2015 ] .
[ 5 ] R . Cavallo , R . P . McAfee , and S . Vassilvitskii . Display advertising auctions with arbitrage . In EC , 2012 .
[ 6 ] N . Chaitanya and Y . Narahari . Optimal equilibrium bidding strategies for budget constrained bidders in sponsored search auctions . Operat . Res . , 2012 .
[ 7 ] B . Chen , S . Yuan , and J . Wang . A dynamic pricing model for unifying programmatic guarantee and real time bidding in display advertising . ADKDD , 2014 .
[ 8 ] Y . Cui , R . Zhang , W . Li , and J . Mao . Bid landscape forecasting in online ad exchange marketplace . In KDD , 2011 .
[ 9 ] B . Dalessandro , C . Perlich , O . Stitelman , and
F . Provost . Causally motivated attribution for online advertising . In ADKDD , 2012 .
[ 10 ] B . Edelman . The design of online advertising markets .
Handbook of Market Design , 2010 .
[ 11 ] B . Edelman , M . Ostrovsky , and M . Schwarz . Internet advertising and the generalized second price auction : Selling billions of dollars worth of keywords . National Bureau of Economic Research , 2005 .
[ 12 ] E . J . Elton , M . J . Gruber , S . J . Brown , and W . N .
Goetzmann . Modern portfolio theory and investment analysis . JWS , 2009 .
[ 13 ] E . F . Fama . Efficient capital markets : A review of theory and empirical work . J . Finance , 1970 .
[ 14 ] J . Feldman , M . Henzinger , N . Korula , V . S . Mirrokni , and C . Stein . Online stochastic packing applied to display ad allocation . In Algorithms–ESA . 2010 .
[ 15 ] E . Gatev , W . N . Goetzmann , and K . G . Rouwenhorst .
Pairs trading : Performance of a relative value arbitrage rule . Review of Financial Studies , 2006 .
[ 16 ] A . Ghosh , P . McAfee , K . Papineni , and
S . Vassilvitskii . Bidding for representative allocations for display advertising . In WINE . 2009 .
[ 17 ] Google . The arrival of real time bidding . 2011 . [ 18 ] S . Hogan , R . Jarrow , M . Teo , and M . Warachka .
Testing market efficiency using statistical arbitrage with applications to momentum and value strategies . Journal of Financial economics , 73(3 ) , 2004 .
[ 19 ] Y . J . Hu . Performance based pricing models in online advertising . Available at SSRN 501082 , 2004 .
[ 20 ] K C Lee , A . Jalali , and A . Dasdan . Real time bid optimization with smooth budget delivery in online advertising . In ADKDD , 2013 .
[ 21 ] K C Lee , B . Orten , A . Dasdan , and W . Li .
Estimating conversion rate in display advertising from past performance data . In KDD , 2012 .
[ 22 ] L . Li , W . Chu , J . Langford , and X . Wang . Unbiased offline evaluation of contextual bandit based news article recommendation algorithms . In WSDM , 2011 . [ 23 ] H . Liao , L . Peng , Z . Liu , and X . Shen . iPinYou global rtb bidding algorithm competition dataset . In ADKDD , 2014 .
[ 24 ] H . Markowitz . Portfolio selection . The journal of finance , 7(1 ) , 1952 .
[ 25 ] R . P . McAfee and S . Vassilvitskii . An overview of practical exchange design . Current Science , 2012 .
[ 26 ] R . McGill , J . W . Tukey , and W . A . Larsen . Variations of box plots . The American Statistician , 1978 .
[ 27 ] S . Muthukrishnan . Ad exchanges : Research issues . In
WINE . 2009 .
[ 28 ] C . Perlich , B . Dalessandro , R . Hook , O . Stitelman ,
T . Raeder , and F . Provost . Bid optimizing and inventory scoring in targeted online advertising . In KDD , 2012 .
[ 29 ] W . F . Sharpe . The sharpe ratio . Streetwise–the Best of the Journal of Portfolio Management , 1998 .
[ 30 ] J . Wang and J . Zhu . Portfolio theory of information retrieval . In SIGIR , 2009 .
[ 31 ] S . Yuan , J . Wang , B . Chen , P . Mason , and S . Seljan .
An empirical study of reserve price optimisation in real time bidding . In KDD . ACM , 2014 .
[ 32 ] S . Yuan , J . Wang , and X . Zhao . Real time bidding for online advertising : measurement and analysis . In ADKDD , 2013 .
[ 33 ] W . Zhang , J . Wang , B . Chen , and X . Zhao . To personalize or not : a risk management perspective . In RecSys , 2013 .
[ 34 ] W . Zhang , S . Yuan , and J . Wang . Optimal real time bidding for display advertising . In KDD , 2014 .
[ 35 ] W . Zhang , S . Yuan , and J . Wang . Real time bidding benchmarking with ipinyou dataset . arXiv preprint arXiv:1407.7073 , 2014 .
[ 36 ] W . Zhang , Y . Zhang , B . Gao , Y . Yu , X . Yuan , and
T Y Liu . Joint optimization of bid and budget allocation in sponsored search . In KDD , 2012 .
1474
